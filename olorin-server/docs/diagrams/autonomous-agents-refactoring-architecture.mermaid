```mermaid
graph TB
    subgraph "BEFORE: Single Large File (943 lines)"
        A[structured_agents.py<br/>943 lines<br/>❌ Violates 200-line rule]
    end

    subgraph "AFTER: Modular Architecture (All files < 200 lines)"
        B[structured_agents.py<br/>~20 lines<br/>✅ Import/Export Only]
        
        C[base_agents.py<br/>~180 lines<br/>✅ Core Agent Classes]
        
        D[domain_agents.py<br/>~190 lines<br/>✅ Domain Implementations]
        
        E[agent_communication.py<br/>~120 lines<br/>✅ Context & Communication]
        
        F[agent_factory.py<br/>~90 lines<br/>✅ Agent Creation & Config]
    end

    subgraph "Module Dependencies"
        C --> E
        D --> C
        D --> E
        D --> F
        F --> C
        B --> C
        B --> D
        B --> E
        B --> F
    end

    subgraph "Core Components Detail"
        subgraph "base_agents.py"
            C1[StructuredInvestigationAgent<br/>- __init__<br/>- structured_investigate<br/>- _create_investigation_prompt<br/>- _parse_structured_result<br/>- _extract_findings_from_content]
        end
        
        subgraph "domain_agents.py"
            D1[Domain Agent Functions<br/>- structured_network_agent<br/>- structured_device_agent<br/>- structured_location_agent<br/>- structured_logs_agent]
        end
        
        subgraph "agent_communication.py"
            E1[Communication Utilities<br/>- _extract_investigation_info<br/>- _create_error_response<br/>- _get_or_create_structured_context<br/>- _broadcast_agent_progress]
        end
        
        subgraph "agent_factory.py"
            F1[Factory Functions<br/>- create_structured_agent<br/>- configure_domain_tools<br/>- get_domain_objectives<br/>- initialize_llm_with_tools]
        end
    end

    subgraph "Integration Points"
        G[Existing Imports<br/>✅ Backward Compatible]
        H[WebSocket Manager<br/>✅ Preserved]
        I[Journey Tracker<br/>✅ Preserved]
        J[Tools Integration<br/>✅ Preserved]
    end

    B --> G
    D --> H
    D --> I
    C --> J

    style A fill:#ffcccc,stroke:#ff0000
    style B fill:#ccffcc,stroke:#00ff00
    style C fill:#ccffcc,stroke:#00ff00
    style D fill:#ccffcc,stroke:#00ff00
    style E fill:#ccffcc,stroke:#00ff00
    style F fill:#ccffcc,stroke:#00ff00
```