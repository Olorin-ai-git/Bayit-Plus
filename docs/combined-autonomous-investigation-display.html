<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Structured Investigation Display</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0b0d;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .main-container {
            padding: 20px;
            max-width: 1800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #4a90ff;
            font-size: 2.5rem;
            text-shadow: 0 0 20px rgba(74, 144, 255, 0.3);
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .top-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
            height: 500px;
        }

        .panel {
            background: linear-gradient(135deg, #1a1d23 0%, #2a2f38 100%);
            border: 1px solid #3a4050;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px rgba(74, 144, 255, 0.15);
        }

        .panel-header {
            padding: 15px 20px;
            background: linear-gradient(90deg, #4a90ff 0%, #6c5ce7 100%);
            border-bottom: 1px solid #3a4050;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .panel-subtitle {
            opacity: 0.9;
            font-size: 0.85rem;
        }

        .panel-content {
            padding: 20px;
            height: calc(100% - 80px);
            position: relative;
        }

        /* Neural Network Styles */
        .neural-network {
            position: relative;
            height: 100%;
            background: radial-gradient(circle at center, #1a1d23 0%, #0a0b0d 100%);
            border-radius: 12px;
            overflow: hidden;
        }

        .neural-node {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.7rem;
            border: 3px solid;
            animation: neuralPulse 3s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .neural-node:hover {
            transform: scale(1.2);
            z-index: 10;
        }

        .neural-node.active {
            box-shadow: 0 0 30px currentColor;
            animation: neuralPulse 1.5s infinite;
        }

        .neural-node.completed {
            animation: completedPulse 2s infinite;
        }

        .neural-connection {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, transparent 0%, #4a90ff 20%, #6c5ce7 50%, #00ff88 80%, transparent 100%);
            transform-origin: left center;
            animation: dataFlow 2s infinite;
            opacity: 0.8;
        }

        .neural-connection.active {
            animation: activeDataFlow 1s infinite;
        }

        /* Interactive Graph Styles */
        .graph-container {
            position: relative;
            height: 100%;
            background: radial-gradient(circle at 30% 70%, #1a1d23 0%, #0a0b0d 100%);
            border-radius: 12px;
            overflow: hidden;
        }

        .graph-node {
            position: absolute;
            width: 90px;
            height: 80px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.65rem;
            font-weight: 600;
            border: 2px solid;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .graph-node:hover {
            transform: scale(1.15) translateY(-3px);
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .graph-node.active {
            animation: graphPulse 2s infinite;
            box-shadow: 0 0 25px currentColor;
        }

        .graph-node i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }

        .graph-edge {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, transparent 0%, #4a90ff 20%, #6c5ce7 80%, transparent 100%);
            transform-origin: left center;
            opacity: 0.6;
            animation: edgeFlow 3s infinite;
        }

        .graph-edge.active {
            animation: activeEdgeFlow 1.5s infinite;
            opacity: 1;
        }

        /* Command Terminal Styles */
        .terminal-container {
            background: linear-gradient(135deg, #1a1d23 0%, #2a2f38 100%);
            border: 1px solid #3a4050;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            height: 400px;
        }

        .terminal {
            background: #0a0a0a;
            border-radius: 8px;
            border: 1px solid #333;
            font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .terminal-header {
            background: #2a2a2a;
            padding: 10px 16px;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-title {
            margin-left: 10px;
            color: #ccc;
            font-size: 0.9rem;
        }

        .terminal-content {
            padding: 16px;
            font-size: 0.85rem;
            line-height: 1.4;
            height: calc(100% - 50px);
            overflow-y: auto;
        }

        .terminal-line {
            margin-bottom: 6px;
            opacity: 0;
            animation: fadeInLine 0.3s ease-in forwards;
            white-space: nowrap;
        }

        .terminal-prompt {
            color: #4a90ff;
            font-weight: 600;
        }

        .terminal-success {
            color: #00ff88;
        }

        .terminal-warning {
            color: #ffaa00;
        }

        .terminal-error {
            color: #ff4444;
        }

        .terminal-info {
            color: #4a90ff;
        }

        .typing-cursor {
            display: inline-block;
            background-color: #4a90ff;
            margin-left: 3px;
            width: 8px;
            height: 18px;
            animation: blink 1s infinite;
        }

        .typewriter-text {
            overflow: hidden;
            border-right: 3px solid #4a90ff;
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 2s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        /* Animations */
        @keyframes neuralPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes completedPulse {
            0%, 100% { box-shadow: 0 0 20px currentColor; }
            50% { box-shadow: 0 0 40px currentColor; }
        }

        @keyframes dataFlow {
            0% { opacity: 0; transform: scaleX(0); }
            50% { opacity: 1; transform: scaleX(1); }
            100% { opacity: 0; transform: scaleX(0); }
        }

        @keyframes activeDataFlow {
            0% { opacity: 0.3; transform: scaleX(0) translateX(0); }
            50% { opacity: 1; transform: scaleX(1) translateX(0); }
            100% { opacity: 0.3; transform: scaleX(0) translateX(100px); }
        }

        @keyframes graphPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes edgeFlow {
            0% { 
                opacity: 0.3; 
                background: linear-gradient(90deg, transparent 0%, #4a90ff 50%, transparent 100%);
            }
            50% { 
                opacity: 0.8;
                background: linear-gradient(90deg, transparent 0%, #00ff88 50%, transparent 100%);
            }
            100% { 
                opacity: 0.3;
                background: linear-gradient(90deg, transparent 0%, #4a90ff 50%, transparent 100%);
            }
        }

        @keyframes activeEdgeFlow {
            0% { 
                opacity: 0.5;
                transform: scaleX(0);
            }
            50% { 
                opacity: 1;
                transform: scaleX(1);
            }
            100% { 
                opacity: 0.5;
                transform: scaleX(0);
            }
        }

        @keyframes fadeInLine {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #4a90ff }
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .top-panels {
                grid-template-columns: 1fr;
                height: auto;
            }

            .panel {
                height: 400px;
            }

            .neural-node, .graph-node {
                transform: scale(0.8);
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .panel {
                height: 350px;
            }

            .terminal-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1><i class="fas fa-brain"></i> Structured Investigation Command Center</h1>
            <p>Real-time AI agent coordination and investigation monitoring</p>
        </div>
        
        <div class="top-panels">
            <!-- Neural Network Flow Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title"><i class="fas fa-project-diagram"></i> Neural Network Flow</div>
                    <div class="panel-subtitle">AI agent coordination with real-time data flow</div>
                </div>
                <div class="panel-content">
                    <div class="neural-network">
                        <!-- Central Orchestrator -->
                        <div class="neural-node active" id="orchestrator" 
                             style="top: 45%; left: 45%; background: #4a90ff; border-color: #4a90ff; color: white;">
                            <i class="fas fa-cog"></i>
                            <span>CTRL</span>
                        </div>
                        
                        <!-- Agent nodes -->
                        <div class="neural-node completed" id="network-node"
                             style="top: 15%; left: 20%; background: #00ff88; border-color: #00ff88; color: black;">
                            <i class="fas fa-network-wired"></i>
                            <span>NET</span>
                        </div>
                        
                        <div class="neural-node active" id="device-node"
                             style="top: 15%; left: 70%; background: #ffa500; border-color: #ffa500; color: white;">
                            <i class="fas fa-mobile-alt"></i>
                            <span>DEV</span>
                        </div>
                        
                        <div class="neural-node" id="location-node"
                             style="top: 75%; left: 20%; background: #9c88ff; border-color: #9c88ff; color: white;">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>LOC</span>
                        </div>
                        
                        <div class="neural-node" id="logs-node"
                             style="top: 75%; left: 70%; background: #ff6b6b; border-color: #ff6b6b; color: white;">
                            <i class="fas fa-file-alt"></i>
                            <span>LOG</span>
                        </div>
                        
                        <!-- Risk Assessment -->
                        <div class="neural-node" id="risk-node"
                             style="top: 85%; left: 45%; background: #ff4444; border-color: #ff4444; color: white;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>RISK</span>
                        </div>
                        
                        <!-- Animated connections -->
                        <div class="neural-connection active" style="top: 35%; left: 35%; width: 120px; transform: rotate(25deg);"></div>
                        <div class="neural-connection active" style="top: 35%; left: 58%; width: 120px; transform: rotate(-25deg);"></div>
                        <div class="neural-connection" style="top: 65%; left: 35%; width: 120px; transform: rotate(-25deg);"></div>
                        <div class="neural-connection" style="top: 65%; left: 58%; width: 120px; transform: rotate(25deg);"></div>
                        <div class="neural-connection" style="top: 75%; left: 48%; width: 60px; transform: rotate(90deg);"></div>
                    </div>
                </div>
            </div>

            <!-- Interactive Graph Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title"><i class="fas fa-sitemap"></i> Interactive Graph</div>
                    <div class="panel-subtitle">3D investigation flow with WebSocket updates</div>
                </div>
                <div class="panel-content">
                    <div class="graph-container">
                        <!-- Start node -->
                        <div class="graph-node active" id="start-graph"
                             style="top: 10px; left: 30px; background: rgba(74, 144, 255, 0.9); border-color: #4a90ff; color: white;">
                            <i class="fas fa-play"></i>
                            <span>START</span>
                        </div>
                        
                        <!-- Agent execution nodes -->
                        <div class="graph-node completed" id="network-graph"
                             style="top: 80px; left: 120px; background: rgba(0, 255, 136, 0.9); border-color: #00ff88; color: black;">
                            <i class="fas fa-network-wired"></i>
                            <span>NETWORK</span>
                        </div>
                        
                        <div class="graph-node active" id="device-graph"
                             style="top: 80px; left: 260px; background: rgba(255, 165, 0, 0.9); border-color: #ffa500; color: white;">
                            <i class="fas fa-mobile-alt"></i>
                            <span>DEVICE</span>
                        </div>
                        
                        <div class="graph-node" id="location-graph"
                             style="top: 200px; left: 120px; background: rgba(156, 136, 255, 0.9); border-color: #9c88ff; color: white;">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>LOCATION</span>
                        </div>
                        
                        <div class="graph-node" id="logs-graph"
                             style="top: 200px; left: 260px; background: rgba(255, 107, 107, 0.9); border-color: #ff6b6b; color: white;">
                            <i class="fas fa-file-alt"></i>
                            <span>LOGS</span>
                        </div>
                        
                        <!-- Decision point -->
                        <div class="graph-node" id="decision-graph"
                             style="top: 140px; left: 380px; background: rgba(108, 92, 231, 0.9); border-color: #6c5ce7; color: white;">
                            <i class="fas fa-code-branch"></i>
                            <span>DECIDE</span>
                        </div>
                        
                        <!-- Risk assessment -->
                        <div class="graph-node" id="risk-graph"
                             style="top: 280px; left: 380px; background: rgba(255, 68, 68, 0.9); border-color: #ff4444; color: white;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>RISK</span>
                        </div>
                        
                        <!-- Connections -->
                        <div class="graph-edge active" style="top: 50px; left: 110px; width: 70px; transform: rotate(20deg);"></div>
                        <div class="graph-edge active" style="top: 50px; left: 250px; width: 70px; transform: rotate(-20deg);"></div>
                        <div class="graph-edge" style="top: 150px; left: 200px; width: 100px; transform: rotate(45deg);"></div>
                        <div class="graph-edge" style="top: 150px; left: 320px; width: 100px; transform: rotate(-45deg);"></div>
                        <div class="graph-edge active" style="top: 120px; left: 340px; width: 80px; transform: rotate(15deg);"></div>
                        <div class="graph-edge" style="top: 220px; left: 420px; width: 80px; transform: rotate(90deg);"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Command Terminal Panel -->
        <div class="terminal-container">
            <div class="panel-header">
                <div class="panel-title"><i class="fas fa-terminal"></i> Command Terminal</div>
                <div class="panel-subtitle">Live investigation logs with typewriter effect</div>
            </div>
            <div class="terminal">
                <div class="terminal-header">
                    <div class="terminal-dot" style="background: #ff4444;"></div>
                    <div class="terminal-dot" style="background: #ffaa00;"></div>
                    <div class="terminal-dot" style="background: #00ff88;"></div>
                    <span class="terminal-title">olorin-structured-investigation</span>
                </div>
                <div class="terminal-content" id="terminal-content">
                    <!-- Content will be dynamically generated -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Terminal typewriter effect with realistic investigation logs
        const terminalContent = document.getElementById('terminal-content');
        
        const investigationLogs = [
            { type: 'prompt', text: 'investigation@olorin:~$', delay: 500 },
            { type: 'success', text: ' Starting structured investigation framework...', delay: 800 },
            { type: 'info', text: '[ORCHESTRATOR] Multi-agent system initialized', delay: 1200 },
            { type: 'info', text: '[ORCHESTRATOR] Target entity: user_847291', delay: 600 },
            { type: 'success', text: '[NETWORK-AGENT] Connected to threat intelligence APIs', delay: 800 },
            { type: 'info', text: '[NETWORK-AGENT] Analyzing IP geolocation patterns...', delay: 900 },
            { type: 'warning', text: '[NETWORK-AGENT] âš ï¸  VPN usage detected (confidence: 87%)', delay: 1000 },
            { type: 'warning', text: '[NETWORK-AGENT] âš ï¸  Suspicious proxy chain identified', delay: 700 },
            { type: 'success', text: '[DEVICE-AGENT] Device fingerprinting initiated...', delay: 800 },
            { type: 'info', text: '[DEVICE-AGENT] Browser signature analysis in progress', delay: 900 },
            { type: 'error', text: '[DEVICE-AGENT] âŒ Device spoofing detected! Score: 94/100', delay: 1100 },
            { type: 'error', text: '[DEVICE-AGENT] âŒ Emulation environment confirmed', delay: 600 },
            { type: 'info', text: '[LOCATION-AGENT] Processing GPS coordinates...', delay: 800 },
            { type: 'warning', text: '[LOCATION-AGENT] âš ï¸  Impossible travel velocity: 2,847 km/h', delay: 1000 },
            { type: 'error', text: '[LOCATION-AGENT] âŒ Geographic impossibility detected', delay: 700 },
            { type: 'info', text: '[LOGS-AGENT] Querying Splunk for behavioral patterns...', delay: 900 },
            { type: 'warning', text: '[LOGS-AGENT] âš ï¸  Automated activity patterns found', delay: 800 },
            { type: 'error', text: '[LOGS-AGENT] âŒ Bot-like behavior confirmed', delay: 600 },
            { type: 'info', text: '[RISK-AGENT] Aggregating findings from all agents...', delay: 800 },
            { type: 'info', text: '[RISK-AGENT] Running ML fraud models...', delay: 900 },
            { type: 'error', text: '[RISK-AGENT] ðŸš¨ CRITICAL FRAUD ALERT: Score 96/100', delay: 1200 },
            { type: 'error', text: '[RISK-AGENT] ðŸš¨ HIGH CONFIDENCE: Organized fraud ring', delay: 800 },
            { type: 'success', text: '[ORCHESTRATOR] Investigation completed in 34.7 seconds', delay: 1000 },
            { type: 'prompt', text: 'investigation@olorin:~$', delay: 500 },
            { type: 'info', text: ' Investigation results saved to case_847291.json', delay: 600 }
        ];

        let logIndex = 0;
        let isTyping = false;

        function typeWriter(element, text, speed = 50) {
            return new Promise((resolve) => {
                isTyping = true;
                let i = 0;
                element.innerHTML = '';
                
                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    } else {
                        isTyping = false;
                        resolve();
                    }
                }
                type();
            });
        }

        async function addTerminalLine(logEntry) {
            const line = document.createElement('div');
            line.className = 'terminal-line';
            
            let content = '';
            switch (logEntry.type) {
                case 'prompt':
                    content = `<span class="terminal-prompt">${logEntry.text}</span>`;
                    break;
                case 'success':
                    content = `<span class="terminal-success">${logEntry.text}</span>`;
                    break;
                case 'warning':
                    content = `<span class="terminal-warning">${logEntry.text}</span>`;
                    break;
                case 'error':
                    content = `<span class="terminal-error">${logEntry.text}</span>`;
                    break;
                case 'info':
                default:
                    content = `<span class="terminal-info">${logEntry.text}</span>`;
                    break;
            }
            
            terminalContent.appendChild(line);
            
            // Typewriter effect
            await typeWriter(line, content, 30);
            
            // Auto-scroll
            terminalContent.scrollTop = terminalContent.scrollHeight;
            
            // Wait for the specified delay
            await new Promise(resolve => setTimeout(resolve, logEntry.delay));
        }

        async function runInvestigationSequence() {
            for (const log of investigationLogs) {
                if (logIndex >= investigationLogs.length) break;
                await addTerminalLine(log);
                logIndex++;
            }
            
            // Add blinking cursor at the end
            const cursor = document.createElement('span');
            cursor.className = 'typing-cursor';
            terminalContent.appendChild(cursor);
        }

        // Node interaction handlers
        document.querySelectorAll('.neural-node, .graph-node').forEach(node => {
            node.addEventListener('click', function() {
                const nodeType = this.id.includes('neural') ? 'Neural Network' : 'Interactive Graph';
                const agentName = this.textContent.trim();
                console.log(`${nodeType} - ${agentName} clicked`);
                
                // Add a visual feedback
                this.style.transform = 'scale(1.3)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 200);
            });

            node.addEventListener('mouseenter', function() {
                const tooltip = document.createElement('div');
                tooltip.style.cssText = `
                    position: absolute;
                    background: rgba(0,0,0,0.9);
                    color: white;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 0.8rem;
                    pointer-events: none;
                    z-index: 1000;
                    top: -40px;
                    left: 50%;
                    transform: translateX(-50%);
                    border: 1px solid #4a90ff;
                `;
                tooltip.textContent = `Click for details: ${this.textContent.trim()}`;
                this.appendChild(tooltip);
                
                setTimeout(() => tooltip.remove(), 3000);
            });
        });

        // Simulate real-time updates
        function simulateAgentUpdates() {
            const nodes = document.querySelectorAll('.neural-node, .graph-node');
            const connections = document.querySelectorAll('.neural-connection, .graph-edge');
            
            setInterval(() => {
                // Randomly activate nodes
                const randomNode = nodes[Math.floor(Math.random() * nodes.length)];
                randomNode.classList.toggle('active');
                
                // Randomly activate connections
                const randomConnection = connections[Math.floor(Math.random() * connections.length)];
                randomConnection.classList.toggle('active');
            }, 2000);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runInvestigationSequence, 1000);
            simulateAgentUpdates();
        });

        // Responsive handling
        window.addEventListener('resize', function() {
            // Adjust layouts for mobile if needed
            if (window.innerWidth < 768) {
                document.querySelector('.top-panels').style.gridTemplateColumns = '1fr';
            } else if (window.innerWidth < 1200) {
                document.querySelector('.top-panels').style.gridTemplateColumns = '1fr';
            } else {
                document.querySelector('.top-panels').style.gridTemplateColumns = '1fr 1fr';
            }
        });
    </script>
</body>
</html>