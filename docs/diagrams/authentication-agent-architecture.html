<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olorin Authentication Agent Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .content {
            padding: 0;
        }
        
        .section {
            padding: 40px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section h2 {
            color: #1e3c72;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #2d3748;
            font-size: 1.4rem;
            font-weight: 600;
            margin: 30px 0 15px 0;
        }
        
        .section p {
            color: #4a5568;
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .mermaid-container {
            background: #f8fafc;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow-x: auto;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }
        
        .feature-card h4 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .feature-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .feature-card li {
            padding: 5px 0;
            position: relative;
            padding-left: 20px;
        }
        
        .feature-card li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #90cdf4;
            font-weight: bold;
        }
        
        .tools-section {
            background: #f7fafc;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tool-badge {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .tool-badge:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .tool-badge.primary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border-color: #38a169;
        }
        
        .tool-badge.secondary {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white;
            border-color: #3182ce;
        }
        
        .tool-badge.ai {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
            border-color: #dd6b20;
        }
        
        .phases-timeline {
            position: relative;
            padding: 20px 0;
        }
        
        .phase {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #667eea;
        }
        
        .phase-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }
        
        .phase-content h4 {
            color: #1e3c72;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .phase-content p {
            color: #4a5568;
            margin: 0;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-left: auto;
        }
        
        .status-pending {
            background: #fed7d7;
            color: #c53030;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .header p { font-size: 1rem; }
            .section { padding: 20px; }
            .feature-grid { grid-template-columns: 1fr; }
            .tools-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîê Authentication Agent Architecture</h1>
<<<<<<< HEAD
            <p>Autonomous Investigation System for Authentication Fraud Detection</p>
=======
            <p>Structured Investigation System for Authentication Fraud Detection</p>
>>>>>>> 001-modify-analyzer-method
        </div>
        
        <div class="content">
            <div class="section">
                <h2>üèóÔ∏è System Architecture Overview</h2>
                <p>The AuthenticationAgent integrates seamlessly with the existing Olorin domain agent ecosystem, providing specialized investigation capabilities for authentication-related fraud detection and analysis.</p>
                
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TB
                            subgraph "Authentication Investigation System"
                                AA[Authentication Agent] --> RAG[RAG Enhancement Engine]
                                AA --> TM[Tool Manager]
                                AA --> JT[Journey Tracker]
                                AA --> WS[WebSocket Manager]
                            end
                            
                            subgraph "Data Sources"
                                SF[Snowflake<br/>TRANSACTIONS_ENRICHED] --> AA
                                SL[SumoLogic<br/>Authentication Logs] --> AA
                                TI[Threat Intelligence<br/>APIs] --> AA
                            end
                            
                            subgraph "Investigation Tools"
                                TM --> ST[Snowflake Query Tool]
                                TM --> SLT[SumoLogic Query Tool]
                                TM --> IP[AbuseIPDB IP Tool]
                                TM --> VT[VirusTotal Analysis]
                                TM --> ML[ML/AI Analytics]
                                TM --> OS[OSINT Tools]
                            end
                            
                            subgraph "Analysis Engine"
                                AA --> FP[Failed Login Patterns]
                                AA --> AT[Account Takeover Detection]
                                AA --> DA[Device Anomalies]
                                AA --> GA[Geographic Analysis]
                                AA --> TA[Time-based Analysis]
                            end
                            
                            subgraph "Output & Integration"
                                AA --> IR[Investigation Report]
                                AA --> RS[Risk Score]
                                AA --> AL[Alert Generation]
                                AA --> DA2[Domain Agents Registry]
                            end
                            
                            classDef agentNode fill:#667eea,stroke:#4c51bf,color:#fff
                            classDef dataNode fill:#48bb78,stroke:#38a169,color:#fff
                            classDef toolNode fill:#4299e1,stroke:#3182ce,color:#fff
                            classDef analysisNode fill:#ed8936,stroke:#dd6b20,color:#fff
                            classDef outputNode fill:#9f7aea,stroke:#805ad5,color:#fff
                            
                            class AA,RAG,TM,JT,WS agentNode
                            class SF,SL,TI dataNode
                            class ST,SLT,IP,VT,ML,OS toolNode
                            class FP,AT,DA,GA,TA analysisNode
                            class IR,RS,AL,DA2 outputNode
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üìä Authentication Analysis Flow</h2>
                <p>Detailed workflow showing how the AuthenticationAgent processes authentication data and generates fraud insights.</p>
                
                <div class="mermaid-container">
                    <div class="mermaid">
                        sequenceDiagram
                            participant UI as Investigation UI
                            participant AA as Authentication Agent
                            participant RAG as RAG Engine
                            participant SF as Snowflake
                            participant SL as SumoLogic
                            participant TI as Threat Intelligence
                            participant ML as ML/AI Tools
                            
                            UI->>AA: Start Authentication Investigation
                            AA->>RAG: Get authentication context
                            RAG-->>AA: Return fraud patterns & strategies
                            
                            par Snowflake Analysis
                                AA->>SF: Query login patterns
                                SF-->>AA: Authentication transaction data
                            and SumoLogic Analysis
                                AA->>SL: Query application logs
                                SL-->>AA: Authentication event logs
                            and Threat Analysis
                                AA->>TI: Check IP reputation
                                TI-->>AA: Threat intelligence data
                            end
                            
                            AA->>ML: Analyze behavior patterns
                            ML-->>AA: Anomaly detection results
                            
                            AA->>AA: Process & correlate findings
                            AA->>AA: Calculate risk scores
                            AA->>AA: Generate fraud indicators
                            
                            AA-->>UI: Return investigation results
                            
<<<<<<< HEAD
                            Note over AA,ML: Autonomous tool selection<br/>based on investigation context
=======
                            Note over AA,ML: Structured tool selection<br/>based on investigation context
>>>>>>> 001-modify-analyzer-method
                    </div>
                </div>
            </div>
            
            <div class="section tools-section">
                <h2>üõ†Ô∏è Tool Integration Strategy</h2>
                <p>Comprehensive tool ecosystem for authentication fraud investigation with intelligent selection and orchestration.</p>
                
                <h3>Primary Data Tools</h3>
                <div class="tools-grid">
                    <div class="tool-badge primary">
                        <h4>Snowflake Query Tool</h4>
                        <p>Transaction authentication analysis</p>
                    </div>
                    <div class="tool-badge primary">
                        <h4>SumoLogic Query Tool</h4>
                        <p>Application authentication logs</p>
                    </div>
                </div>
                
                <h3>Threat Intelligence Tools</h3>
                <div class="tools-grid">
                    <div class="tool-badge secondary">
                        <h4>AbuseIPDB</h4>
                        <p>IP reputation analysis</p>
                    </div>
                    <div class="tool-badge secondary">
                        <h4>VirusTotal</h4>
                        <p>Domain/URL analysis</p>
                    </div>
                    <div class="tool-badge secondary">
                        <h4>Shodan</h4>
                        <p>Infrastructure analysis</p>
                    </div>
                    <div class="tool-badge secondary">
                        <h4>OSINT Tools</h4>
                        <p>Account intelligence</p>
                    </div>
                </div>
                
                <h3>ML/AI Analytics Tools</h3>
                <div class="tools-grid">
                    <div class="tool-badge ai">
                        <h4>Anomaly Detection</h4>
                        <p>Login pattern anomalies</p>
                    </div>
                    <div class="tool-badge ai">
                        <h4>Behavioral Analysis</h4>
                        <p>Authentication behavior</p>
                    </div>
                    <div class="tool-badge ai">
                        <h4>Pattern Recognition</h4>
                        <p>Fraud pattern identification</p>
                    </div>
                    <div class="tool-badge ai">
                        <h4>Risk Scoring</h4>
                        <p>Authentication risk assessment</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üéØ Core Investigation Features</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üîç Login Pattern Analysis</h4>
                        <ul>
                            <li>Failed login ratio detection</li>
                            <li>Brute force attack identification</li>
                            <li>Credential stuffing patterns</li>
                            <li>Login frequency anomalies</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üåç Geographic Analysis</h4>
                        <ul>
                            <li>Impossible travel detection</li>
                            <li>Geographic login jumps</li>
                            <li>Country risk assessment</li>
                            <li>VPN/proxy detection</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üì± Device Analysis</h4>
                        <ul>
                            <li>Device fingerprint anomalies</li>
                            <li>Multi-device authentication</li>
                            <li>Device trust assessment</li>
                            <li>Session hijacking detection</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚è∞ Temporal Analysis</h4>
                        <ul>
                            <li>Off-hours authentication</li>
                            <li>Authentication timing patterns</li>
                            <li>Session duration analysis</li>
                            <li>Velocity-based detection</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üë• Account Takeover</h4>
                        <ul>
                            <li>Account behavior changes</li>
                            <li>Authentication method changes</li>
                            <li>Profile modification patterns</li>
                            <li>Multi-account correlations</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üîê MFA Analysis</h4>
                        <ul>
                            <li>MFA bypass attempts</li>
                            <li>Authentication flow anomalies</li>
                            <li>Token manipulation detection</li>
                            <li>Authentication weaknesses</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üìà Implementation Timeline</h2>
                
                <div class="phases-timeline">
                    <div class="phase">
                        <div class="phase-number">1</div>
                        <div class="phase-content">
                            <h4>Architecture Analysis & Design</h4>
                            <p>Deep dive into existing patterns, tool mapping, and authentication domain specification</p>
                        </div>
                        <div class="status-badge status-pending">‚è≥ Pending</div>
                    </div>
                    
                    <div class="phase">
                        <div class="phase-number">2</div>
                        <div class="phase-content">
                            <h4>Core Agent Implementation</h4>
                            <p>Authentication agent development, configuration setup, and investigation logic</p>
                        </div>
                        <div class="status-badge status-pending">‚è≥ Pending</div>
                    </div>
                    
                    <div class="phase">
                        <div class="phase-number">3</div>
                        <div class="phase-content">
                            <h4>Tool Integration & RAG Enhancement</h4>
                            <p>Snowflake/SumoLogic integration, RAG configuration, and intelligent tool orchestration</p>
                        </div>
                        <div class="status-badge status-pending">‚è≥ Pending</div>
                    </div>
                    
                    <div class="phase">
                        <div class="phase-number">4</div>
                        <div class="phase-content">
                            <h4>Integration & Testing</h4>
                            <p>Domain agent integration, comprehensive testing, and validation</p>
                        </div>
                        <div class="status-badge status-pending">‚è≥ Pending</div>
                    </div>
                    
                    <div class="phase">
                        <div class="phase-number">5</div>
                        <div class="phase-content">
                            <h4>Documentation & Quality Assurance</h4>
                            <p>Documentation creation, code review, and security audit</p>
                        </div>
                        <div class="status-badge status-pending">‚è≥ Pending</div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üîí Security & Compliance</h2>
                <p>Authentication data handling follows strict security protocols with comprehensive audit trails and privacy protection.</p>
                
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph LR
                            subgraph "Security Framework"
                                AD[Authentication Data] --> EC[Encryption Layer]
                                EC --> AL[Access Logging]
                                AL --> AT[Audit Trail]
                                AT --> PR[Privacy Protection]
                            end
                            
                            subgraph "Compliance Controls"
                                PR --> GC[GDPR Compliance]
                                PR --> DC[Data Classification]
                                PR --> RM[Retention Management]
                                PR --> AM[Access Management]
                            end
                            
                            subgraph "Quality Assurance"
                                AM --> CR[Code Review]
                                AM --> ST[Security Testing]
                                AM --> PA[Performance Audit]
                                AM --> VA[Vulnerability Assessment]
                            end
                            
                            classDef securityNode fill:#e53e3e,stroke:#c53030,color:#fff
                            classDef complianceNode fill:#38a169,stroke:#2f855a,color:#fff
                            classDef qaNode fill:#3182ce,stroke:#2c5aa0,color:#fff
                            
                            class AD,EC,AL,AT,PR securityNode
                            class GC,DC,RM,AM complianceNode
                            class CR,ST,PA,VA qaNode
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#4c51bf',
                lineColor: '#4a5568',
                sectionBkgColor: '#f7fafc',
                altSectionBkgColor: '#edf2f7',
                gridColor: '#e2e8f0',
                secondaryColor: '#48bb78',
                tertiaryColor: '#ed8936',
                background: '#fff',
                mainBkg: '#fff',
                secondBkg: '#f7fafc',
                tertiaryBkg: '#edf2f7'
            },
            flowchart: {
                nodeSpacing: 50,
                rankSpacing: 60,
                curve: 'basis',
                padding: 20
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 30,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35,
                mirrorActors: true,
                bottomMarginAdj: 1,
                useMaxWidth: true,
                rightAngles: false,
                showSequenceNumbers: false
            }
        });
    </script>
</body>
</html>