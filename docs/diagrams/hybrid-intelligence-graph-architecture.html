<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Intelligence Graph Architecture - Olorin Fraud Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #764ba2;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .metadata {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .metadata-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .metadata-label {
            font-weight: 600;
            color: #667eea;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        h2 {
            color: #764ba2;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
        }
        
        h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .diagram-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            overflow-x: auto;
        }
        
        .diagram-title {
            font-size: 1.2rem;
            color: #764ba2;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .description {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .feature-card h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .confidence-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .confidence-card {
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            color: white;
            font-weight: 600;
        }
        
        .confidence-high {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .confidence-medium {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .confidence-low {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .implementation-phases {
            margin: 1.5rem 0;
        }
        
        .phase {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .phase-title {
            font-size: 1.2rem;
            color: #764ba2;
            font-weight: 600;
        }
        
        .phase-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-in-progress {
            background: #dbeafe;
            color: #1e3a8a;
        }
        
        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .metric-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
        }
        
        .metric-label {
            color: #666;
            margin-top: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .feature-grid,
            .confidence-levels,
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Hybrid Intelligence Graph Architecture</h1>
            <p class="subtitle">Uniting AI Intelligence with Safety Mechanisms</p>
            <div class="metadata">
                <div class="metadata-item">
                    <span class="metadata-label">Author:</span>
                    <span>Gil Klainert</span>
                </div>
                <div class="metadata-item">
                    <span class="metadata-label">Date:</span>
                    <span>2025-01-09</span>
                </div>
                <div class="metadata-item">
                    <span class="metadata-label">Status:</span>
                    <span>Implementation Ready</span>
                </div>
                <div class="metadata-item">
                    <span class="metadata-label">Version:</span>
                    <span>1.0</span>
                </div>
            </div>
        </header>

        <section class="section">
            <h2>üìä Current Architecture Conflict</h2>
            <div class="description">
                The Olorin platform currently operates with two competing graph implementations that create architectural tension. This diagram shows the conflict between rigid phase routing and AI intelligence.
            </div>
            <div class="diagram-container">
                <div class="diagram-title">Current System Conflict</div>
                <div class="mermaid">
                    graph TB
                        subgraph "Clean Graph Builder (Rigid)"
                            A[Start] --> B[Snowflake Analysis]
                            B -->|FORCED| C[Tool Execution]
                            C -->|FORCED| D[Domain Analysis]
                            D -->|SEQUENTIAL| E[Network Agent]
                            E -->|SEQUENTIAL| F[Device Agent]
                            F -->|SEQUENTIAL| G[Location Agent]
                            G -->|SEQUENTIAL| H[Logs Agent]
                            H -->|SEQUENTIAL| I[Auth Agent]
                            I -->|SEQUENTIAL| J[Risk Agent]
                            J --> K[Summary]
                        end
                        
                        subgraph "AI Orchestrator (Ignored)"
                            AI[AI Decision Engine]
                            AI -.->|Skip Network| F
                            AI -.->|Focus Auth| I
                            AI -.->|Early Exit| K
                            AI -.->|Custom Path| X[Dynamic Route]
                        end
                        
                        style AI fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px,stroke-dasharray: 5 5
                        style X fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px,stroke-dasharray: 5 5
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üéØ Hybrid Intelligence Solution</h2>
            <div class="description">
                The hybrid approach combines AI intelligence with safety mechanisms through confidence-based routing. AI decisions are trusted when confidence is high, with progressive fallback to safety-first execution.
            </div>
            <div class="diagram-container">
                <div class="diagram-title">Hybrid Intelligence Graph Architecture</div>
                <div class="mermaid">
                    graph TB
                        Start([Investigation Start])
                        
                        Start --> DataIngestion[Data Ingestion]
                        DataIngestion --> SnowflakeAnalysis[Snowflake Analysis]
                        
                        SnowflakeAnalysis --> ConfidenceEngine{AI Confidence<br/>Assessment}
                        
                        ConfidenceEngine -->|High ‚â•0.8| AIControl[AI Full Control]
                        ConfidenceEngine -->|Medium 0.4-0.8| ValidatedAI[AI with Validation]
                        ConfidenceEngine -->|Low <0.4| SafetyFirst[Safety-First Mode]
                        
                        AIControl --> AIRouter{AI Strategic<br/>Router}
                        AIRouter -->|Critical Path| DirectSummary[Direct to Summary]
                        AIRouter -->|Focus Domain| FocusedAgents[Selected Agents Only]
                        AIRouter -->|Comprehensive| AdaptiveFlow[Adaptive Agent Flow]
                        
                        ValidatedAI --> SafetyCheck{Safety<br/>Validation}
                        SafetyCheck -->|Pass| AIRouter
                        SafetyCheck -->|Fail| SequentialExecution
                        
                        SafetyFirst --> SequentialExecution[Sequential<br/>Domain Analysis]
                        SequentialExecution --> NetworkAgent[Network Agent]
                        NetworkAgent --> DeviceAgent[Device Agent]
                        DeviceAgent --> LocationAgent[Location Agent]
                        LocationAgent --> LogsAgent[Logs Agent]
                        LogsAgent --> AuthAgent[Auth Agent]
                        AuthAgent --> RiskAgent[Risk Agent]
                        
                        FocusedAgents --> RiskAgent
                        AdaptiveFlow --> RiskAgent
                        DirectSummary --> Summary[Investigation<br/>Summary]
                        RiskAgent --> Summary
                        
                        Summary --> End([Investigation Complete])
                        
                        style AIControl fill:#10b981,stroke:#059669,stroke-width:3px
                        style ValidatedAI fill:#f59e0b,stroke:#d97706,stroke-width:3px
                        style SafetyFirst fill:#ef4444,stroke:#dc2626,stroke-width:3px
                        style AIRouter fill:#667eea,stroke:#764ba2,stroke-width:3px
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üîÑ Confidence-Based Routing Logic</h2>
            <div class="confidence-levels">
                <div class="confidence-card confidence-high">
                    <h4>HIGH CONFIDENCE (‚â•0.8)</h4>
                    <p>AI has full control</p>
                    <p>Dynamic limits (+30%)</p>
                    <p>Skip unnecessary phases</p>
                </div>
                <div class="confidence-card confidence-medium">
                    <h4>MEDIUM CONFIDENCE (0.4-0.8)</h4>
                    <p>AI with validation</p>
                    <p>Standard limits</p>
                    <p>Safety checks required</p>
                </div>
                <div class="confidence-card confidence-low">
                    <h4>LOW CONFIDENCE (<0.4)</h4>
                    <p>Safety-first mode</p>
                    <p>Strict limits (-30%)</p>
                    <p>Sequential execution</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üèóÔ∏è Component Architecture</h2>
            <div class="diagram-container">
                <div class="diagram-title">System Components and Integration</div>
                <div class="mermaid">
                    graph LR
                        subgraph "Core Components"
                            HSS[Hybrid State Schema]
                            ACE[AI Confidence Engine]
                            ASM[Advanced Safety Manager]
                            HGB[Hybrid Graph Builder]
                            IR[Intelligent Router]
                        end
                        
                        subgraph "Input Sources"
                            SF[Snowflake Data]
                            TR[Tool Results]
                            DF[Domain Findings]
                            PM[Performance Metrics]
                        end
                        
                        subgraph "Decision Outputs"
                            RD[Routing Decision]
                            SL[Safety Limits]
                            IS[Investigation Strategy]
                            AT[Audit Trail]
                        end
                        
                        SF --> ACE
                        TR --> ACE
                        DF --> ACE
                        PM --> ASM
                        
                        ACE --> HGB
                        ASM --> HGB
                        HGB --> IR
                        
                        IR --> RD
                        ASM --> SL
                        ACE --> IS
                        HGB --> AT
                        
                        HSS -.->|State Management| ACE
                        HSS -.->|State Management| ASM
                        HSS -.->|State Management| HGB
                        
                        style ACE fill:#667eea,stroke:#764ba2,stroke-width:2px
                        style HGB fill:#10b981,stroke:#059669,stroke-width:2px
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üìà Implementation Phases</h2>
            <div class="implementation-phases">
                <div class="phase">
                    <div class="phase-header">
                        <span class="phase-title">Phase 1: Foundation Components</span>
                        <span class="phase-status status-pending">Week 1</span>
                    </div>
                    <ul>
                        <li>Enhanced State Schema with AI tracking</li>
                        <li>AI Confidence Engine implementation</li>
                        <li>Advanced Safety Manager with dynamic limits</li>
                        <li>Comprehensive unit testing</li>
                    </ul>
                </div>
                
                <div class="phase">
                    <div class="phase-header">
                        <span class="phase-title">Phase 2: Core Integration</span>
                        <span class="phase-status status-pending">Week 2</span>
                    </div>
                    <ul>
                        <li>Hybrid Graph Builder combining both systems</li>
                        <li>Intelligent Router with confidence-based decisions</li>
                        <li>Migration utilities and feature flags</li>
                        <li>Integration testing</li>
                    </ul>
                </div>
                
                <div class="phase">
                    <div class="phase-header">
                        <span class="phase-title">Phase 3: Advanced Features</span>
                        <span class="phase-status status-pending">Week 3</span>
                    </div>
                    <ul>
                        <li>Real-time confidence monitoring</li>
                        <li>Investigation strategy selection</li>
                        <li>Comprehensive debugging and audit trails</li>
                        <li>A/B testing framework</li>
                    </ul>
                </div>
                
                <div class="phase">
                    <div class="phase-header">
                        <span class="phase-title">Phase 4: Production Readiness</span>
                        <span class="phase-status status-pending">Week 4</span>
                    </div>
                    <ul>
                        <li>Security audit and penetration testing</li>
                        <li>Load testing with production scale</li>
                        <li>Documentation and training</li>
                        <li>Gradual rollout plan</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üéØ Success Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">85%</div>
                    <div class="metric-label">AI Decision Accuracy</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">30%</div>
                    <div class="metric-label">Resource Efficiency Gain</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">15%</div>
                    <div class="metric-label">Detection Improvement</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">25%</div>
                    <div class="metric-label">Speed Improvement</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">99.9%</div>
                    <div class="metric-label">System Reliability</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">0</div>
                    <div class="metric-label">Infinite Loops</div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üîÑ Migration Strategy</h2>
            <div class="diagram-container">
                <div class="diagram-title">Safe Migration Path</div>
                <div class="mermaid">
                    graph LR
                        Current[Current System]
                        Current --> FeatureFlag{Feature Flag<br/>hybrid_graph_v1}
                        
                        FeatureFlag -->|Disabled| Legacy[Clean Graph Builder<br/>Original System]
                        FeatureFlag -->|Enabled 10%| Canary[Canary Deployment]
                        FeatureFlag -->|Enabled 50%| ABTest[A/B Testing]
                        FeatureFlag -->|Enabled 100%| Full[Full Hybrid System]
                        
                        Canary --> Monitor1[Quality Monitoring]
                        ABTest --> Monitor2[Performance Metrics]
                        Full --> Monitor3[Production Monitoring]
                        
                        Monitor1 -->|Regression| Rollback1[Instant Rollback]
                        Monitor2 -->|Issues| Rollback2[Gradual Rollback]
                        Monitor3 -->|Success| Complete[Migration Complete]
                        
                        style FeatureFlag fill:#667eea,stroke:#764ba2,stroke-width:2px
                        style Complete fill:#10b981,stroke:#059669,stroke-width:2px
                        style Rollback1 fill:#ef4444,stroke:#dc2626,stroke-width:2px
                        style Rollback2 fill:#f59e0b,stroke:#d97706,stroke-width:2px
                </div>
            </div>
        </section>

        <section class="section">
            <h2>üöÄ Key Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üß† AI Intelligence Preserved</h4>
                    <p>AI decisions drive investigation flow when confidence is high, enabling intelligent optimization and early fraud detection.</p>
                </div>
                <div class="feature-card">
                    <h4>üõ°Ô∏è Robust Safety Mechanisms</h4>
                    <p>Progressive safety limits prevent infinite loops while adapting to investigation complexity and AI confidence levels.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Adaptive Performance</h4>
                    <p>Dynamic resource allocation based on investigation needs, reducing unnecessary computation by up to 40%.</p>
                </div>
                <div class="feature-card">
                    <h4>üîç Complete Audit Trail</h4>
                    <p>Every routing decision is logged with confidence scores, reasoning, and safety validations for full transparency.</p>
                </div>
                <div class="feature-card">
                    <h4>‚ö° Real-Time Monitoring</h4>
                    <p>Live confidence tracking and performance metrics enable immediate detection of issues and optimization opportunities.</p>
                </div>
                <div class="feature-card">
                    <h4>üîÑ Zero-Risk Migration</h4>
                    <p>Feature flag system with automatic rollback ensures safe transition without impacting production investigations.</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#764ba2',
                lineColor: '#5a67d8',
                secondaryColor: '#764ba2',
                tertiaryColor: '#f8f9fa',
                background: '#ffffff',
                mainBkg: '#667eea',
                secondBkg: '#764ba2',
                tertiaryBkg: '#f8f9fa'
            }
        });
    </script>
</body>
</html>