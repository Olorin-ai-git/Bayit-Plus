# טיפול בשגיאות

ה-API של Bayit+ משתמש בקודי סטטוס HTTP סטנדרטיים ומחזיר הודעות שגיאה מפורטות. מדריך זה עוזר לכם לטפל בשגיאות בצורה יעילה.

## קודי סטטוס HTTP

| קוד | משמעות |
|-----|--------|
| 200 | הצלחה |
| 201 | נוצר |
| 204 | ללא תוכן |
| 400 | בקשה שגויה |
| 401 | לא מאומת |
| 403 | אסור |
| 404 | לא נמצא |
| 409 | קונפליקט |
| 422 | ישות שלא ניתן לעבד |
| 429 | יותר מדי בקשות |
| 500 | שגיאת שרת |

## פורמט תגובת שגיאה

כל השגיאות מחזירות מבנה JSON עקבי:

```json
{
  "error": {
    "code": "validation_error",
    "message": "קלט לא תקין",
    "details": [
      {
        "field": "email",
        "message": "פורמט אימייל לא תקין"
      }
    ],
    "request_id": "req_abc123"
  }
}
```

## קודי שגיאה נפוצים

### שגיאות אימות

| קוד | תיאור |
|-----|-------|
| `invalid_token` | טוקן גישה לא תקין או פג תוקף |
| `token_expired` | טוקן פג תוקף, דרוש רענון |
| `invalid_credentials` | פרטי התחברות שגויים |
| `mfa_required` | נדרש אימות דו-שלבי |

### שגיאות ולידציה

| קוד | תיאור |
|-----|-------|
| `validation_error` | קלט לא עבר ולידציה |
| `missing_field` | שדה חובה חסר |
| `invalid_format` | פורמט שדה לא תקין |
| `value_too_long` | ערך חורג מאורך מרבי |

### שגיאות משאבים

| קוד | תיאור |
|-----|-------|
| `not_found` | המשאב לא נמצא |
| `already_exists` | המשאב כבר קיים |
| `conflict` | קונפליקט עם מצב נוכחי |
| `gone` | המשאב כבר לא זמין |

### שגיאות מגבלות

| קוד | תיאור |
|-----|-------|
| `rate_limit_exceeded` | חריגה ממגבלת קצב |
| `quota_exceeded` | חריגה ממכסת שימוש |
| `concurrent_limit` | יותר מדי סשנים במקביל |

## שיטות עבודה מומלצות

1. **תמיד בדקו קודי סטטוס** - אל תניחו הצלחה
2. **רשמו request_id** - משמש לתמיכה וניפוי שגיאות
3. **יישמו ניסיונות חוזרים** - עבור שגיאות זמניות (5xx)
4. **טפלו בשגיאות ספציפיות** - אל תתפסו הכל גנרית
5. **הציגו הודעות ברורות למשתמש** - תרגמו שגיאות טכניות

## דיווח על באגים

אם אתם חושבים שמצאתם באג ב-API:

1. תעדו את ה-request_id
2. שמרו את הבקשה והתגובה המלאות
3. צרו קשר עם צוות ה-API עם הפרטים
