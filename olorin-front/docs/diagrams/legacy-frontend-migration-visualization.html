<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legacy Frontend Migration Plan - Interactive Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #e74c3c;
            display: block;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .mermaid {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .phase-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .phase-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .phase-card:hover {
            transform: translateY(-5px);
        }

        .phase-card h4 {
            font-size: 1.3em;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 10px;
        }

        .phase-duration {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .risk-level {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }

        .risk-high {
            background: #e74c3c;
            color: white;
        }

        .risk-medium {
            background: #f39c12;
            color: white;
        }

        .risk-low {
            background: #27ae60;
            color: white;
        }

        .component-list {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .component-list h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .component-item {
            background: white;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .file-size {
            color: #e74c3c;
            font-weight: bold;
            float: right;
        }

        .service-mapping {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .service-card {
            background: #fff;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .service-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .service-port {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .approval-required {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-left: 4px solid #e74c3c;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .approval-required h4 {
            color: #721c24;
            margin-bottom: 10px;
        }

        .checkbox-list {
            list-style: none;
            padding-left: 20px;
        }

        .checkbox-list li {
            margin: 8px 0;
            position: relative;
        }

        .checkbox-list li:before {
            content: "‚òê";
            position: absolute;
            left: -20px;
            color: #7f8c8d;
        }

        .interactive-controls {
            background: rgba(52, 73, 94, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 1em;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #2980b9;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .timeline {
            position: relative;
            margin: 30px 0;
        }

        .timeline:before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 3px;
            height: 100%;
            background: #3498db;
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            margin: 40px 0;
            width: 45%;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
        }

        .timeline-item:nth-child(even) {
            left: 55%;
        }

        .timeline-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .timeline-item:nth-child(odd) .timeline-content:after {
            content: '';
            position: absolute;
            top: 20px;
            right: -10px;
            width: 0;
            height: 0;
            border-left: 10px solid white;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
        }

        .timeline-item:nth-child(even) .timeline-content:after {
            content: '';
            position: absolute;
            top: 20px;
            left: -10px;
            width: 0;
            height: 0;
            border-right: 10px solid white;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
        }

        @media (max-width: 768px) {
            .timeline:before {
                left: 20px;
            }

            .timeline-item {
                width: 100%;
                left: 30px !important;
            }

            .timeline-item .timeline-content:after {
                left: -10px !important;
                border-right: 10px solid white !important;
                border-left: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîÑ Legacy Frontend Migration Plan</h1>
            <div class="subtitle">Olorin Frontend Refactoring: Material-UI to Module Federation Microservices</div>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">163</span>
                    <span class="stat-label">TypeScript Files</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">34,777</span>
                    <span class="stat-label">Lines of Code</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">48</span>
                    <span class="stat-label">Oversized Files</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">31</span>
                    <span class="stat-label">Material-UI Files</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">8</span>
                    <span class="stat-label">Target Services</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">30</span>
                    <span class="stat-label">Days Estimated</span>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìä Migration Architecture Overview</h2>
            <div class="mermaid">
                graph TB
                    subgraph "Current Legacy Architecture"
                        A[src/js/ Directory<br/>163 Files, 34,777 Lines]
                        A --> B[Material-UI Components]
                        A --> C[Monolithic Structure]
                        A --> D[48 Oversized Files]
                    end

                    subgraph "Target Microservices Architecture"
                        E[Shell Service :3000]
                        F[Investigation :3001]
                        G[Agent Analytics :3002]
                        H[RAG Intelligence :3003]
                        I[Visualization :3004]
                        J[Reporting :3005]
                        K[Core UI :3006]
                        L[Design System :3007]
                    end

                    A -->|Migration| E
                    A -->|Migration| F
                    A -->|Migration| G
                    A -->|Migration| H
                    A -->|Migration| I
                    A -->|Migration| J
                    A -->|Migration| K
                    A -->|Migration| L

                    style A fill:#ffebee
                    style E fill:#e8f5e8
                    style F fill:#e8f5e8
                    style G fill:#e8f5e8
                    style H fill:#e8f5e8
                    style I fill:#e8f5e8
                    style J fill:#e8f5e8
                    style K fill:#e8f5e8
                    style L fill:#e8f5e8
            </div>
        </div>

        <div class="section">
            <h2>üéØ Target Microservices Architecture</h2>
            <div class="service-mapping">
                <div class="service-card">
                    <h4>Shell Service</h4>
                    <div class="service-port">Port 3000</div>
                    <p>Main application shell and routing</p>
                </div>
                <div class="service-card">
                    <h4>Investigation Service</h4>
                    <div class="service-port">Port 3001</div>
                    <p>Core investigation functionality</p>
                </div>
                <div class="service-card">
                    <h4>Agent Analytics Service</h4>
                    <div class="service-port">Port 3002</div>
                    <p>AI agent monitoring and logs</p>
                </div>
                <div class="service-card">
                    <h4>RAG Intelligence Service</h4>
                    <div class="service-port">Port 3003</div>
                    <p>Retrieval-augmented generation</p>
                </div>
                <div class="service-card">
                    <h4>Visualization Service</h4>
                    <div class="service-port">Port 3004</div>
                    <p>Charts, maps, data visualization</p>
                </div>
                <div class="service-card">
                    <h4>Reporting Service</h4>
                    <div class="service-port">Port 3005</div>
                    <p>PDF generation and exports</p>
                </div>
                <div class="service-card">
                    <h4>Core UI Service</h4>
                    <div class="service-port">Port 3006</div>
                    <p>Shared components and auth</p>
                </div>
                <div class="service-card">
                    <h4>Design System Service</h4>
                    <div class="service-port">Port 3007</div>
                    <p>Component library</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìà Migration Timeline</h2>
            <div class="mermaid">
                gantt
                    title Migration Timeline (30 Days)
                    dateFormat  X
                    axisFormat %d

                    section Phase 1: Preparation
                    Component Mapping          :active, prep1, 0, 2d
                    Testing Infrastructure     :prep2, after prep1, 2d
                    Backup & Safety           :prep3, after prep2, 1d

                    section Phase 2: Service Migration
                    Core UI Service           :crit, ui, after prep3, 3d
                    Investigation Service     :crit, inv, after ui, 5d
                    RAG Intelligence Service  :crit, rag, after ui, 4d
                    Agent Analytics Service   :agent, after ui, 3d
                    Visualization Service     :viz, after ui, 2d
                    Reporting Service         :report, after ui, 2d
                    Design System Service     :design, after ui, 1d

                    section Phase 3: Cleanup
                    Legacy Code Removal       :crit, cleanup, after inv, 3d

                    section Phase 4: Validation
                    Testing & Validation      :valid, after cleanup, 2d
            </div>

            <div class="phase-grid">
                <div class="phase-card">
                    <h4>Phase 1: Preparation</h4>
                    <div class="phase-duration">5 Days</div>
                    <div class="risk-level risk-low">LOW RISK</div>
                    <p>Component mapping, testing infrastructure setup, backup creation</p>
                </div>

                <div class="phase-card">
                    <h4>Phase 2: Service Migration</h4>
                    <div class="phase-duration">20 Days</div>
                    <div class="risk-level risk-high">HIGH RISK</div>
                    <p>Service-by-service migration with Core UI as foundation</p>
                </div>

                <div class="phase-card">
                    <h4>Phase 3: Legacy Cleanup</h4>
                    <div class="phase-duration">3 Days</div>
                    <div class="risk-level risk-high">HIGH RISK</div>
                    <p>File deletion and dependency removal (requires approval)</p>
                </div>

                <div class="phase-card">
                    <h4>Phase 4: Validation</h4>
                    <div class="phase-duration">2 Days</div>
                    <div class="risk-level risk-medium">MEDIUM RISK</div>
                    <p>Comprehensive testing and documentation updates</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìã Critical Files Requiring Migration</h2>

            <div class="component-list">
                <h4>üî¥ Largest Files (>1000 lines)</h4>
                <div class="component-item">
                    <strong>RAGPage.tsx</strong>
                    <span class="file-size">2,273 lines</span>
                    <br><small>Target: RAG Intelligence Service (25-30 components)</small>
                </div>
                <div class="component-item">
                    <strong>InvestigationPage.tsx</strong>
                    <span class="file-size">1,913 lines</span>
                    <br><small>Target: Investigation Service (15-20 components)</small>
                </div>
                <div class="component-item">
                    <strong>useStructuredInvestigation.ts</strong>
                    <span class="file-size">1,014 lines</span>
                    <br><small>Target: Investigation Service (hook decomposition)</small>
                </div>
                <div class="component-item">
                    <strong>OlorinService.ts</strong>
                    <span class="file-size">1,001 lines</span>
                    <br><small>Target: Shared services layer</small>
                </div>
                <div class="component-item">
                    <strong>AgentDetailsTable.tsx</strong>
                    <span class="file-size">994 lines</span>
                    <br><small>Target: Agent Analytics Service (8-10 components)</small>
                </div>
            </div>

            <div class="component-list">
                <h4>‚ö†Ô∏è Material-UI Dependencies (31 files)</h4>
                <div class="component-item">
                    All components using @mui/material, @mui/icons-material, or styled-components
                    <br><small>Conversion: Material-UI ‚Üí Headless UI + Tailwind CSS</small>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîÑ Component Migration Flow</h2>
            <div class="mermaid">
                flowchart TD
                    A[Legacy Component<br/>Material-UI] --> B{Size Check}
                    B -->|>200 lines| C[Decompose into<br/>Smaller Components]
                    B -->|<200 lines| D[Direct Migration]
                    C --> E[Convert Material-UI<br/>to Tailwind CSS]
                    D --> E
                    E --> F[Implement in<br/>Target Service]
                    F --> G[Add Event Bus<br/>Communication]
                    G --> H[Integration Testing]
                    H --> I{Tests Pass?}
                    I -->|No| J[Debug & Fix]
                    J --> H
                    I -->|Yes| K[Component Complete]

                    style A fill:#ffebee
                    style K fill:#e8f5e8
                    style C fill:#fff3e0
                    style E fill:#e3f2fd
            </div>
        </div>

        <div class="section">
            <h2>‚ö†Ô∏è Risk Assessment</h2>

            <div class="component-list">
                <h4>üî¥ High-Risk Areas</h4>
                <div class="component-item">
                    <strong>Large File Decomposition</strong>
                    <br><small>Risk: Breaking 2,273-line RAGPage.tsx could introduce bugs</small>
                    <br><small>Mitigation: Comprehensive testing, incremental decomposition</small>
                </div>
                <div class="component-item">
                    <strong>Material-UI Dependency Removal</strong>
                    <br><small>Risk: UI inconsistencies and layout breakage</small>
                    <br><small>Mitigation: Visual regression testing, gradual conversion</small>
                </div>
                <div class="component-item">
                    <strong>Service Integration Dependencies</strong>
                    <br><small>Risk: Event bus communication failures</small>
                    <br><small>Mitigation: Extensive integration testing, fallbacks</small>
                </div>
            </div>

            <div class="component-list">
                <h4>üü° Medium-Risk Areas</h4>
                <div class="component-item">
                    <strong>WebSocket Integration</strong>
                    <br><small>Risk: Real-time features breaking during migration</small>
                </div>
                <div class="component-item">
                    <strong>State Management Migration</strong>
                    <br><small>Risk: Application state inconsistencies</small>
                </div>
            </div>
        </div>

        <div class="approval-required">
            <h4>üö® APPROVAL REQUIRED</h4>
            <p><strong>The following operations require explicit user approval before execution:</strong></p>
            <ul class="checkbox-list">
                <li><strong>File Deletion:</strong> Removal of src/js/ directory (163 files, 34,777 lines)</li>
                <li><strong>Dependency Removal:</strong> @mui/material, @mui/icons-material, styled-components</li>
                <li><strong>Configuration Changes:</strong> Webpack, TypeScript, package.json modifications</li>
            </ul>
        </div>

        <div class="section">
            <h2>üõ°Ô∏è Rollback Procedures</h2>
            <div class="mermaid">
                flowchart TD
                    A[Migration Issue Detected] --> B{Severity Level}
                    B -->|Critical| C[Emergency Rollback<br/>0-2 hours]
                    B -->|Service-Specific| D[Partial Rollback<br/>Service Isolation]
                    B -->|Component-Level| E[Component Rollback<br/>Feature Flags]

                    C --> F[Revert to Git Tag<br/>legacy-frontend-backup]
                    F --> G[Restore src/js/<br/>from Backup]
                    G --> H[Restore Dependencies<br/>in package.json]
                    H --> I[Restart Legacy Servers]

                    D --> J[Disable Microservice<br/>in Module Federation]
                    J --> K[Route to Legacy<br/>Components]

                    E --> L[Enable Legacy<br/>Component Fallback]
                    L --> M[Feature Flag<br/>Switch]

                    style C fill:#ffebee
                    style F fill:#ffebee
                    style G fill:#ffebee
                    style H fill:#ffebee
                    style I fill:#e8f5e8
            </div>
        </div>

        <div class="section">
            <h2>‚úÖ Success Criteria</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">0</span>
                    <span class="stat-label">Material-UI Dependencies</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">200</span>
                    <span class="stat-label">Max Lines per File</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Test Coverage Maintained</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">0</span>
                    <span class="stat-label">Runtime Errors</span>
                </div>
            </div>
        </div>

        <div class="interactive-controls">
            <h3>üéÆ Migration Controls</h3>
            <p>Interactive controls will be enabled after user approval</p>
            <button class="btn" disabled>Start Pre-Migration</button>
            <button class="btn" disabled>Begin Service Migration</button>
            <button class="btn btn-danger" disabled>Emergency Rollback</button>
        </div>

        <div class="warning-box">
            <h4>‚ö†Ô∏è Important Notes</h4>
            <ul>
                <li>This migration plan requires explicit user approval before any file deletion operations</li>
                <li>All legacy code will be preserved in backups before any modifications</li>
                <li>The migration follows a phased approach with rollback capabilities at each stage</li>
                <li>Performance monitoring will be continuous throughout the migration process</li>
                <li>Each phase includes comprehensive testing and validation procedures</li>
            </ul>
        </div>

        <div style="text-align: center; margin: 40px 0; color: #7f8c8d;">
            <p>üìä Legacy Frontend Migration Plan v1.0</p>
            <p>Generated: 2025-01-18 | Author: Gil Klainert | Project: Olorin Frontend Refactoring</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                sectionBkgColor: '#ecf0f1',
                altSectionBkgColor: '#bdc3c7',
                gridColor: '#bdc3c7',
                textColor: '#2c3e50',
                taskBkgColor: '#3498db',
                taskTextColor: '#ffffff',
                taskTextLightColor: '#ffffff',
                taskTextOutsideColor: '#2c3e50',
                taskTextClickableColor: '#e74c3c',
                activeTaskBkgColor: '#e74c3c',
                activeTaskBorderColor: '#c0392b',
                gridColor: '#bdc3c7',
                section0: '#ecf0f1',
                section1: '#d5dbdb',
                section2: '#bdc3c7',
                section3: '#a6acaf'
            }
        });

        // Simulate interactive controls (would be functional in real implementation)
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (!this.disabled) {
                    alert('Migration control activated: ' + this.textContent);
                }
            });
        });

        // Add hover effects to phase cards
        document.querySelectorAll('.phase-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.02)';
            });

            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        console.log('Legacy Frontend Migration Visualization Loaded');
        console.log('Total Files to Migrate: 163');
        console.log('Total Lines of Code: 34,777');
        console.log('Estimated Duration: 30 days');
    </script>
</body>
</html>