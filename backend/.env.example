# Application
DEBUG=true
SECRET_KEY=your-secret-key-change-in-production

# MongoDB Atlas
MONGODB_URL=mongodb+srv://username:password@cluster.mongodb.net
MONGODB_DB_NAME=bayit_plus

# Stripe
STRIPE_API_KEY=pk_live_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_BASIC=price_...
STRIPE_PRICE_PREMIUM=price_...
STRIPE_PRICE_FAMILY=price_...

# Anthropic (Claude AI)
ANTHROPIC_API_KEY=sk-ant-...
# Claude model configuration for content localization
CLAUDE_MODEL=claude-sonnet-4-20250514
CLAUDE_MAX_TOKENS_SHORT=200
CLAUDE_MAX_TOKENS_LONG=500

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
# Default redirect URI (can be overridden by frontend dynamically)
# Note: Add all redirect URIs to Google Cloud Console OAuth 2.0 Client ID:
# - https://your-domain.com/auth/google/callback (production)
# - http://localhost:3000/auth/google/callback (development)
GOOGLE_REDIRECT_URI=https://your-domain.com/auth/google/callback

# ElevenLabs (Speech-to-Text and Text-to-Speech)
ELEVENLABS_API_KEY=your-elevenlabs-api-key
ELEVENLABS_WEBHOOK_SECRET=your-elevenlabs-webhook-secret
ELEVENLABS_DEFAULT_VOICE_ID=EXAVITQu4vr4xnSDxMaL

# OpenAI (Whisper Speech-to-Text)
OPENAI_API_KEY=sk-proj-...

# Speech-to-Text Provider Selection
# Options: "google", "whisper", or "elevenlabs"
# google: Google Cloud Speech-to-Text - sub-second latency, requires GCP credentials
# whisper: OpenAI Whisper - buffered streaming (5s+), simpler setup
# elevenlabs: ElevenLabs Scribe v2 - ultra-low latency (~150ms), best Hebrew (3.1% WER)
SPEECH_TO_TEXT_PROVIDER=google

# Live Translation Provider Selection (for translating transcribed text)
# Options: "google", "openai", or "claude"
# google: Google Cloud Translate - fast, reliable, battle-tested
# openai: GPT-4o-mini - high quality, context-aware translations
# claude: Claude - excellent for nuanced translations
LIVE_TRANSLATION_PROVIDER=google

# DRM (optional)
DRM_LICENSE_URL=
DRM_API_KEY=

# Email Service (for Librarian AI Agent notifications)
SENDGRID_API_KEY=SG.your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@bayitplus.com
ADMIN_EMAIL_ADDRESSES=admin@bayitplus.com,team@bayitplus.com

# ============================================
# Content Enrichment APIs (REQUIRED for full functionality)
# ============================================

# TMDB (The Movie Database) API
# Used for: Metadata enrichment, poster/backdrop retrieval, IMDB ratings, cast/crew info
# Get your FREE API key at: https://www.themoviedb.org/settings/api
# 1. Create a TMDB account (free)
# 2. Go to Settings > API > Create > Developer
# 3. Fill in the application form (use "Personal/Education" for type)
# 4. Copy the API Key (v3 auth) below
# Without this key: Content will lack descriptions, posters, and ratings
TMDB_API_KEY=YOUR_TMDB_V3_API_KEY_HERE

# TMDB Bearer Token (v4 auth) - Optional, provides additional features
# Get this from the same API page as above (API Read Access Token)
TMDB_API_TOKEN=YOUR_TMDB_V4_BEARER_TOKEN_HERE

# OpenSubtitles API
# Used for: Automatic subtitle downloads in Hebrew, English, Spanish
# Register at: https://www.opensubtitles.com/consumers
# 1. Create a consumer account (free tier: 20 downloads/day)
# 2. Copy your API key
# Without this key: Subtitle auto-download will not work
OPENSUBTITLES_API_KEY=YOUR_OPENSUBTITLES_API_KEY_HERE

# OpenSubtitles Credentials (Optional - for higher quotas)
# Required only if you need more than the anonymous download limit
OPENSUBTITLES_USERNAME=
OPENSUBTITLES_PASSWORD=

# Google Cloud
GCP_PROJECT_ID=your-gcp-project-id
GCS_BUCKET_NAME=your-gcs-bucket-name
# CDN for serving media files (optional, falls back to direct GCS URL)
# Set up Cloud CDN with backend bucket pointing to GCS for proper CORS/COEP headers
CDN_BASE_URL=https://cdn.your-domain.com

# Storage Configuration
# Options: "local", "s3", or "gcs"
# local: Store files on local filesystem (development only)
# s3: Store files on AWS S3
# gcs: Store files on Google Cloud Storage (recommended for production)
#
# IMPORTANT FOR LOCAL DEVELOPMENT:
# If you don't have GCS credentials configured, set STORAGE_TYPE=local
# The system will automatically fall back to local storage if GCS credentials are missing
#
# Production default: gcs
# Development default: local (override this in your local .env file)
STORAGE_TYPE=gcs

# Upload Session Configuration
# Directory for temporary browser upload chunks
UPLOAD_DIR=/tmp/bayit-uploads
# Maximum age for orphaned upload sessions (hours)
UPLOAD_SESSION_MAX_AGE_HOURS=24
# Cleanup task interval (seconds)
UPLOAD_SESSION_CLEANUP_INTERVAL_SECONDS=3600
# Timeout for inactive upload sessions (hours)
UPLOAD_SESSION_TIMEOUT_HOURS=2

# GCS Upload Configuration (for large file uploads)
# Timeout for each upload operation (in seconds)
# Default: 600 (10 minutes) - increase for very large files on slow connections
GCS_UPLOAD_TIMEOUT_SECONDS=600
# Chunk size for resumable uploads (in MB)
# Larger chunks = fewer requests but more data to re-upload on failure
GCS_UPLOAD_CHUNK_SIZE_MB=8
# Maximum retry attempts for transient network errors
GCS_UPLOAD_MAX_RETRIES=5
# Initial delay for exponential backoff between retries (in seconds)
GCS_UPLOAD_RETRY_INITIAL_DELAY_SECONDS=1.0
# Maximum delay between retries (in seconds)
GCS_UPLOAD_RETRY_MAX_DELAY_SECONDS=60.0

# Librarian Agent Configuration
# Daily Audit Schedule
LIBRARIAN_DAILY_AUDIT_CRON=0 2 * * *
LIBRARIAN_DAILY_AUDIT_TIME=2:00 AM Israel Time
LIBRARIAN_DAILY_AUDIT_MODE=Rule-based
LIBRARIAN_DAILY_AUDIT_COST=~$0.01/day
LIBRARIAN_DAILY_AUDIT_STATUS=ENABLED
LIBRARIAN_DAILY_AUDIT_DESCRIPTION=Scans recent content and random 10% sample. Auto-fixes safe issues.

# Weekly AI Audit Schedule
LIBRARIAN_WEEKLY_AUDIT_CRON=0 3 * * 0
LIBRARIAN_WEEKLY_AUDIT_TIME=Sundays 3:00 AM Israel Time
LIBRARIAN_WEEKLY_AUDIT_MODE=AI Agent
LIBRARIAN_WEEKLY_AUDIT_COST=~$0.50/week
LIBRARIAN_WEEKLY_AUDIT_STATUS=ENABLED
LIBRARIAN_WEEKLY_AUDIT_DESCRIPTION=Claude decides what to check and fix. Sends email only for major issues.

# Librarian Audit Limits
LIBRARIAN_MAX_ITERATIONS=50
LIBRARIAN_DEFAULT_BUDGET_USD=10.0
LIBRARIAN_MIN_BUDGET_USD=0.1
LIBRARIAN_MAX_BUDGET_USD=20.0
LIBRARIAN_BUDGET_STEP_USD=0.5

# Librarian Pagination
LIBRARIAN_REPORTS_LIMIT=10
LIBRARIAN_ACTIONS_LIMIT=50
LIBRARIAN_ACTIVITY_PAGE_SIZE=10

# Librarian UI
LIBRARIAN_ID_TRUNCATE_LENGTH=8
LIBRARIAN_MODAL_MAX_HEIGHT=600

# Twilio SMS Verification
TWILIO_ACCOUNT_SID=YOUR_TWILIO_ACCOUNT_SID_HERE
TWILIO_AUTH_TOKEN=YOUR_TWILIO_AUTH_TOKEN_HERE
TWILIO_PHONE_NUMBER=+1234567890

# Verification Settings
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=24
PHONE_VERIFICATION_CODE_EXPIRE_MINUTES=10
MAX_VERIFICATION_ATTEMPTS_PER_HOUR=3

# Frontend URLs (for verification links)
FRONTEND_WEB_URL=https://bayit.tv
FRONTEND_MOBILE_URL=bayitplus://

# ============================================
# Judaism Section Configuration
# ============================================

# Jewish News Aggregation (RSS feeds from major US Jewish publications)
# Sources: JTA, Times of Israel, Forward, Tablet, Aish, Chabad, Jewish Week, Yeshiva World
JEWISH_NEWS_CACHE_TTL_MINUTES=15
JEWISH_NEWS_SYNC_INTERVAL_MINUTES=30
JEWISH_NEWS_REQUEST_TIMEOUT_SECONDS=10.0

# Jewish Calendar Integration (HebCal & Sefaria APIs)
# HebCal: Hebrew dates, holidays, Shabbat times
# Sefaria: Daf Yomi, daily learning
HEBCAL_API_BASE_URL=https://www.hebcal.com
SEFARIA_API_BASE_URL=https://www.sefaria.org/api
JEWISH_CALENDAR_CACHE_TTL_HOURS=6

# Jewish Community Directory
# Directory of synagogues, JCCs, kosher restaurants, mikvaot across US regions
COMMUNITY_SEARCH_RADIUS_MILES=25
COMMUNITY_DEFAULT_REGION=nyc
US_JEWISH_REGIONS=nyc,la,chicago,miami,boston,philadelphia,atlanta,dallas,denver,seattle
COMMUNITY_SCRAPE_INTERVAL_HOURS=168

# Torah Content RSS Sources
# Public RSS feeds for Torah classes and multimedia content
YUTORAH_RSS_URL=https://www.yutorah.org/rss/
CHABAD_MULTIMEDIA_RSS_URL=https://www.chabad.org/multimedia/rss.xml
TORAHANYTIME_RSS_URL=https://www.torahanytime.com/feed

# ============================================
# Picovoice Wake Word Detection
# ============================================
# Access key for Picovoice Porcupine wake word detection
# Get your key at: https://console.picovoice.ai/
PICOVOICE_ACCESS_KEY=YOUR_PICOVOICE_ACCESS_KEY_HERE
