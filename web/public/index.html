<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Bayit+ - ×”×‘×™×ª ×©×œ×š ×‘××¨×”×´×‘. ×©×™×“×•×¨×™ ×˜×œ×•×•×™×–×™×”, VOD, ×¨×“×™×• ×•×¤×•×“×§××¡×˜×™× ×‘×¢×‘×¨×™×ª" />
    <meta name="theme-color" content="#1e40af" />

    <!-- App Icons -->
    <link rel="icon" type="image/png" href="/logo.png" />
    <link rel="apple-touch-icon" href="/logo.png" />

    <!-- Hebrew Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <title>Bayit+ | ×‘×™×ª+</title>

    <!-- Samsung TV WebAPIs (only loads on Samsung TVs) -->
    <script>
      // Only load Samsung WebAPIs on actual Samsung TVs
      if (typeof tizen !== 'undefined' || navigator.userAgent.indexOf('Tizen') > -1) {
        var script = document.createElement('script');
        script.src = '$WEBAPIS/webapis/webapis.js';
        script.onerror = function() { console.log('Samsung WebAPIs not available'); };
        document.head.appendChild(script);
      }
    </script>

    <style>
      /* Base styles for React Native Web */
      html, body, #root {
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: #0d0d1a;
      }
      /* Hide scrollbar but allow scrolling */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
      }
      ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      /* Splash Screen Styles */
      #splash-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.5s ease-out;
        overflow: hidden;
      }

      #splash-screen.fade-out {
        opacity: 0;
        pointer-events: none;
      }

      /* Fullscreen background image */
      #splash-screen .splash-bg {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        object-fit: fill;
        object-position: center center;
        z-index: 1;
      }

      /* Overlay for better text visibility */
      #splash-screen .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(13, 13, 26, 0.4);
        z-index: 2;
      }

      /* Animated Logo Container - positioned above TV screen with fixed dimensions */
      #splash-screen .animated-logo-container {
        position: fixed;
        top: 2%;
        left: 50%;
        transform: translateX(-50%);
        z-index: 3;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 300px;
        height: 100px;
      }

      /* Logo image - fades in after text */
      #splash-screen .logo {
        margin-bottom: -8px;
        opacity: 0;
        animation: logoFadeIn 1s ease-out 0.7s forwards;
      }

      /* Text container - fixed dimensions to prevent layout shift */
      #splash-screen .text-container {
        position: relative;
        width: 200px;
        height: 60px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
      }

      /* Bayit text - HTML order: first, slides in from RIGHT, stays on LEFT */
      #splash-screen .bayit-text {
        position: relative;
        font-size: 48px;
        font-weight: bold;
        color: #ffffff;
        font-family: 'Heebo', sans-serif;
        line-height: 1;
        margin: 0;
        opacity: 0;
        transform: translateX(200px);
        animation: slideInBayit 0.7s ease-in-out forwards;
      }

      /* Plus sign - HTML order: second, slides in from LEFT, stays on RIGHT */
      #splash-screen .plus-text {
        position: relative;
        font-size: 42px;
        font-weight: bold;
        color: #a855f7;
        line-height: 1;
        margin: 0 0 0 4px;
        opacity: 0;
        transform: translateX(-200px);
        animation: slideInPlus 0.7s ease-in-out forwards;
      }

      /* Dual Clock - positioned below TV screen */
      #splash-screen .clock-container {
        position: fixed;
        bottom: 43%;
        left: 50%;
        transform: translateX(-50%);
        z-index: 3;
        display: flex;
        flex-direction: row;
        align-items: center;
        background-color: transparent;
        padding: 0;
        gap: 4rem;
        opacity: 0;
        animation: fadeIn 0.8s ease-out forwards;
        animation-delay: 1.2s;
      }

      #splash-screen .clock-item {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.5rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }

      #splash-screen .flag-icon {
        font-size: 24px;
      }

      #splash-screen .clock-time {
        font-size: 20px;
        font-weight: 700;
        color: #ffffff;
        font-family: 'Heebo', sans-serif;
        font-variant-numeric: tabular-nums;
        min-width: 3.5rem;
      }

      /* Animation Keyframes - elements slide to center, flex-direction handles final order */
      @keyframes slideInPlus {
        0% {
          opacity: 0;
          transform: translateX(-200px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInBayit {
        0% {
          opacity: 0;
          transform: translateX(200px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes logoFadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Powered By Section - positioned at bottom */
      #splash-screen .powered-by-container {
        position: fixed;
        bottom: 2%;
        left: 50%;
        transform: translateX(-50%);
        z-index: 3;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.25rem;
        opacity: 0;
        animation: fadeIn 0.8s ease-out forwards;
        animation-delay: 1.5s;
      }

      #splash-screen .powered-by-text {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.6);
        font-family: 'Heebo', sans-serif;
      }

      #splash-screen .powered-by-link {
        font-size: 12px;
        color: #A855F7;
        font-weight: 500;
        font-family: 'Heebo', sans-serif;
        text-decoration: none;
        transition: color 0.2s ease;
        cursor: pointer;
      }

      #splash-screen .powered-by-link:hover {
        color: #C084FC;
      }

      /* Responsive adjustments */
      @media (max-width: 640px) {
        #splash-screen .animated-logo-container {
          top: 3%;
        }
        #splash-screen .logo {
          width: 60px;
          height: 30px;
        }
        #splash-screen .bayit-text {
          font-size: 32px;
        }
        #splash-screen .plus-text {
          font-size: 28px;
        }
        #splash-screen .clock-container {
          bottom: 10%;
          gap: 2rem;
        }
        #splash-screen .clock-item {
          padding: 0.5rem 1rem;
        }
        #splash-screen .flag-icon {
          font-size: 20px;
        }
        #splash-screen .clock-time {
          font-size: 16px;
        }
        #splash-screen .powered-by-container {
          bottom: 3%;
        }
        #splash-screen .powered-by-text,
        #splash-screen .powered-by-link {
          font-size: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Splash Screen -->
    <div id="splash-screen">
      <!-- Fullscreen background image -->
      <img src="/Bayit-Splash.png" alt="Bayit+ Background" class="splash-bg" />
      
      <!-- Animated Logo at top (matches home page animation) -->
      <div class="animated-logo-container">
        <img src="/logo.png" alt="Bayit+ Logo" class="logo" />
      </div>
      
      <!-- Dual Clock at center - positioned to show image splitter -->
      <div class="clock-container">
        <div class="clock-item">
          <span class="flag-icon">ðŸ‡®ðŸ‡±</span>
          <span class="clock-time" id="israel-time">--:--</span>
        </div>
        <div class="clock-item">
          <span class="flag-icon">ðŸ‡ºðŸ‡¸</span>
          <span class="clock-time" id="local-time">--:--</span>
        </div>
      </div>
      
      <!-- Powered By Section at bottom -->
      <div class="powered-by-container">
        <a href="https://marketing.radio.olorin.ai" target="_blank" class="powered-by-link">Olorin.ai LLC</a>
        <span class="powered-by-text" id="powered-by-text">Powered by</span>
        
      </div>
    </div>

    <div id="root"></div>

    <script>
      // Localized translations
      var translations = {
        en: { poweredBy: 'Powered by' },
        he: { poweredBy: '×ž×•×¤×¢×œ ×¢×œ ×™×“×™' },
        es: { poweredBy: 'Desarrollado por' }
      };
      
      // Get saved language from localStorage
      function getSavedLanguage() {
        try {
          var saved = localStorage.getItem('i18nextLng');
          if (saved) {
            var lang = saved.split('-')[0]; // Handle locales like 'en-US'
            if (translations[lang]) return lang;
          }
        } catch (e) {}
        return 'en'; // Default to English
      }
      
      // Set localized text immediately
      var currentLang = getSavedLanguage();
      var poweredByElement = document.getElementById('powered-by-text');
      if (poweredByElement && translations[currentLang]) {
        poweredByElement.textContent = translations[currentLang].poweredBy;
      }
      
      // Track splash screen timing
      var splashStartTime = Date.now();
      var MIN_SPLASH_DURATION = 3000; // 3 seconds minimum
      var appReady = false;
      var windowLoaded = false;
      
      // Update clocks
      function updateClocks() {
        var now = new Date();
        
        // Israel time (Jerusalem timezone)
        var israelTime = now.toLocaleTimeString('en-US', {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false,
          timeZone: 'Asia/Jerusalem'
        });
        
        // Local time
        var localTime = now.toLocaleTimeString('en-US', {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false
        });
        
        var israelElement = document.getElementById('israel-time');
        var localElement = document.getElementById('local-time');
        
        if (israelElement) israelElement.textContent = israelTime;
        if (localElement) localElement.textContent = localTime;
      }
      
      // Update clocks immediately and every second
      updateClocks();
      var clockInterval = setInterval(updateClocks, 1000);
      
      // #region agent log
      // Debug: Track width changes during animation
      var widthTracking = [];
      
      function captureWidths(label, time) {
        var container = document.querySelector('.animated-logo-container');
        var textContainer = document.querySelector('.text-container');
        var bayitEl = document.querySelector('.bayit-text');
        var plusEl = document.querySelector('.plus-text');
        
        if (!container || !textContainer || !bayitEl || !plusEl) return null;
        
        var containerRect = container.getBoundingClientRect();
        var textContainerRect = textContainer.getBoundingClientRect();
        var bayitRect = bayitEl.getBoundingClientRect();
        var plusRect = plusEl.getBoundingClientRect();
        
        var containerStyle = window.getComputedStyle(container);
        var textContainerStyle = window.getComputedStyle(textContainer);
        
        return {
          label: label,
          time: time,
          container: {
            width: Math.round(containerRect.width * 100) / 100,
            height: Math.round(containerRect.height * 100) / 100,
            computedWidth: containerStyle.width,
            left: Math.round(containerRect.left * 100) / 100
          },
          textContainer: {
            width: Math.round(textContainerRect.width * 100) / 100,
            height: Math.round(textContainerRect.height * 100) / 100,
            computedWidth: textContainerStyle.width,
            left: Math.round(textContainerRect.left * 100) / 100
          },
          bayit: {
            width: Math.round(bayitRect.width * 100) / 100,
            left: Math.round(bayitRect.left * 100) / 100
          },
          plus: {
            width: Math.round(plusRect.width * 100) / 100,
            left: Math.round(plusRect.left * 100) / 100
          }
        };
      }
      
      window.addEventListener('load', function() {
        // Capture widths at multiple points during animation
        setTimeout(function() { widthTracking.push(captureWidths('T0_start', Date.now())); }, 10);
        setTimeout(function() { widthTracking.push(captureWidths('T100', Date.now())); }, 100);
        setTimeout(function() { widthTracking.push(captureWidths('T300', Date.now())); }, 300);
        setTimeout(function() { widthTracking.push(captureWidths('T700_end', Date.now())); }, 700);
        setTimeout(function() { widthTracking.push(captureWidths('T1000', Date.now())); }, 1000);
        setTimeout(function() { widthTracking.push(captureWidths('T1500_stable', Date.now())); }, 1500);
        
        setTimeout(function() {
          // Calculate width changes
          var widthChanges = [];
          for (var i = 1; i < widthTracking.length; i++) {
            if (widthTracking[i] && widthTracking[i-1]) {
              widthChanges.push({
                period: widthTracking[i-1].label + ' â†’ ' + widthTracking[i].label,
                containerWidthDelta: (widthTracking[i].container.width - widthTracking[i-1].container.width).toFixed(2),
                textContainerWidthDelta: (widthTracking[i].textContainer.width - widthTracking[i-1].textContainer.width).toFixed(2),
                containerLeftDelta: (widthTracking[i].container.left - widthTracking[i-1].container.left).toFixed(2),
                textContainerLeftDelta: (widthTracking[i].textContainer.left - widthTracking[i-1].textContainer.left).toFixed(2)
              });
            }
          }
          
          fetch('http://127.0.0.1:7244/ingest/5953914e-34ce-41fe-8a24-b30691c4a1e7', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              location: 'index.html:width-tracking',
              message: 'Width changes causing jump',
              data: {
                allWidths: widthTracking,
                widthChanges: widthChanges,
                issue: 'Non-zero width deltas indicate container size changes causing layout shifts'
              },
              timestamp: Date.now(),
              sessionId: 'debug-session',
              hypothesisId: 'width-jump'
            })
          }).catch(function() {});
        }, 2000);
      });
      // #endregion
      
      // Function to hide splash screen
      function hideSplashScreen() {
        var elapsedTime = Date.now() - splashStartTime;
        var remainingTime = Math.max(0, MIN_SPLASH_DURATION - elapsedTime);
        
        setTimeout(function() {
          clearInterval(clockInterval); // Stop clock updates
          var splash = document.getElementById('splash-screen');
          if (splash) {
            splash.classList.add('fade-out');
            // Remove from DOM after fade animation
            setTimeout(function() {
              splash.remove();
              // Signal that splash is removed - now safe to change direction
              window.splashScreenRemoved = true;
              window.dispatchEvent(new Event('splashRemoved'));
            }, 500);
          }
        }, remainingTime);
      }
      
      // Mark window as loaded
      window.addEventListener('load', function() {
        windowLoaded = true;
        // TEMPORARILY DISABLED - Testing new logo
        // if (appReady) {
        //   hideSplashScreen();
        // }
      });
      
      // Function for React to call when ready
      window.hideSplashWhenReady = function() {
        appReady = true;
        // TEMPORARILY DISABLED - Testing new logo
        // if (windowLoaded) {
        //   hideSplashScreen();
        // }
      };
      
      // TEMPORARILY DISABLED - Testing new logo
      // Fallback: Hide after max time even if React doesn't signal ready
      // setTimeout(function() {
      //   if (document.getElementById('splash-screen')) {
      //     clearInterval(clockInterval);
      //     var splash = document.getElementById('splash-screen');
      //     if (splash) {
      //       splash.classList.add('fade-out');
      //       setTimeout(function() {
      //         splash.remove();
      //         // Signal that splash is removed - now safe to change direction
      //         window.splashScreenRemoved = true;
      //         window.dispatchEvent(new Event('splashRemoved'));
      //       }, 500);
      //     }
      //   }
      // }, 10000); // 10 second failsafe
    </script>
  </body>
</html>
