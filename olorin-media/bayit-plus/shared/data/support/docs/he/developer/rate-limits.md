# מגבלות קצב

ה-API של Bayit+ משתמש במגבלות קצב כדי להבטיח שימוש הוגן ויציבות מערכת. מדריך זה מסביר את המגבלות ואיך לטפל בהן ביעילות.

## מגבלות ברירת מחדל

מגבלות קצב משתנות לפי נקודת קצה וסוג חשבון:

| סוג נקודת קצה | חינם | בסיסי | פרימיום |
|---------------|------|-------|---------|
| קריאה | 100/דקה | 500/דקה | 2000/דקה |
| כתיבה | 30/דקה | 150/דקה | 600/דקה |
| חיפוש | 20/דקה | 100/דקה | 500/דקה |
| סטרימינג | 10/דקה | 50/דקה | 200/דקה |

## כותרות תגובה

כל תגובת API כוללת כותרות מגבלת קצב:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1705312800
```

- `X-RateLimit-Limit`: מספר בקשות מרבי לחלון
- `X-RateLimit-Remaining`: בקשות שנותרו בחלון הנוכחי
- `X-RateLimit-Reset`: חותמת זמן Unix כאשר החלון מתאפס

## טיפול בחריגות

כאשר חורגים ממגבלת קצב, ה-API מחזיר סטטוס `429 Too Many Requests`:

```json
{
  "error": {
    "code": "rate_limit_exceeded",
    "message": "חריגה ממגבלת קצב. נסה שוב בעוד 45 שניות.",
    "retry_after": 45
  }
}
```

הכותרת `Retry-After` מציינת מתי לנסות שוב.

## אסטרטגיות מומלצות

### Backoff אקספוננציאלי

יישמו backoff אקספוננציאלי עם jitter לניסיונות חוזרים אמינים.

### תור בקשות

יישמו תור בקשות לניהול קצב ומניעת חריגות.

### מיזוג בקשות

מזגו מספר פעולות לבקשה אחת באמצעות נקודת הקצה `/v1/batch`.

## ניטור שימוש

עקבו אחר שימוש ב-API שלכם בלוח הבקרה למפתחים:

1. היכנסו ללוח הבקרה למפתחים
2. נווטו לסעיף שימוש ב-API
3. צפו בהיסטוריית בקשות וסטטיסטיקות מגבלות קצב
4. הגדירו התראות לחריגות קרובות

## בקשת הגדלת מגבלות

אם אתם צריכים מגבלות גבוהות יותר:

1. צרו קשר עם צוות ה-API
2. ספקו פרטי מקרה שימוש
3. הסבירו למה נדרשות מגבלות גבוהות יותר
4. המתינו לאישור
