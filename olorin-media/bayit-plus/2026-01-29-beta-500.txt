
 â–â–›â–ˆâ–ˆâ–ˆâ–œâ–Œ   Claude Code v2.1.22
â–â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–›â–˜  Opus 4.5 Â· Claude Max
  â–˜â–˜ â–â–    ~/Documents/olorin/olorin-media/bayit-plus

 âš Large /Users/olorin/.claude/CLAUDE.md will impact performance (43.6k chars > 
  40.0k) â€¢ /memory to edit

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Plan to implement                                                            â”‚
â”‚                                                                              â”‚
â”‚ Beta 500 Implementation Plan                                                 â”‚
â”‚                                                                              â”‚
â”‚ Executive Summary                                                            â”‚
â”‚                                                                              â”‚
â”‚ Objective: Launch Beta 500 - a closed beta program offering AI-powered       â”‚
â”‚ real-time dubbing of Israeli content to 500 Israeli expat families, with     â”‚
â”‚ free 5,000 AI credits ($20/month value after beta).                          â”‚
â”‚                                                                              â”‚
â”‚ Core Strategy:                                                               â”‚
â”‚ 1. "Safe" Content: Kan 11 via YouTube embed + AI audio overlay (legal        â”‚
â”‚ compliance), Israeli podcasts with AI dubbing                                â”‚
â”‚ 2. Targeted Launch: Israeli Mapped in NY, WhatsApp groups (Iconz/TechAviv),  â”‚
â”‚ LinkedIn "Build in Public"                                                   â”‚
â”‚ 3. Value Anchoring: Free for beta testers, $20/month post-beta (immediate    â”‚
â”‚ perceived value)                                                             â”‚
â”‚                                                                              â”‚
â”‚ Timeline: 4-6 weeks implementation + testing                                 â”‚
â”‚ Budget: $3,475/month for 500 beta users (approved)                           â”‚
â”‚ Expected Outcome: 500 beta signups, 60%+ activation rate, 20%+ conversion    â”‚
â”‚ intent                                                                       â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Architecture Overview                                                        â”‚
â”‚                                                                              â”‚
â”‚ Three Core Components                                                        â”‚
â”‚                                                                              â”‚
â”‚ 1. Content Delivery System                                                   â”‚
â”‚                                                                              â”‚
â”‚ - Kan 11 Integration: YouTube IFrame Player + synchronized AI audio overlay  â”‚
â”‚ - Podcast Dubbing: Automated pipeline for Israeli tech/news podcasts with    â”‚
â”‚ dual-language transcripts                                                    â”‚
â”‚                                                                              â”‚
â”‚ 2. Credit System                                                             â”‚
â”‚                                                                              â”‚
â”‚ - 5,000 AI Credits per beta tester (free during beta)                        â”‚
â”‚ - Credit Consumption: 1 credit/second dubbing, 0.5 credits/second            â”‚
â”‚ transcription                                                                â”‚
â”‚ - Beta Tier: Temporary subscription tier with Family plan features + free    â”‚
â”‚ credits                                                                      â”‚
â”‚                                                                              â”‚
â”‚ 3. Launch Infrastructure                                                     â”‚
â”‚                                                                              â”‚
â”‚ - Beta Landing Page: Problem statement, demo video, sign-up form with        â”‚
â”‚ waitlist overflow                                                            â”‚
â”‚ - Email Automation: Welcome, onboarding, surveys via SendGrid                â”‚
â”‚ - Community Outreach: Personalized materials for Guy Franklin, WhatsApp      â”‚
â”‚ groups, LinkedIn                                                             â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Phase 1: Content Delivery Implementation (Weeks 1-2)                         â”‚
â”‚                                                                              â”‚
â”‚ 1.1 Kan 11 YouTube Integration                                               â”‚
â”‚                                                                              â”‚
â”‚ Backend Changes:                                                             â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/models/content.py (Line 317-366)                          â”‚
â”‚ - Action: Extend LiveChannel model with YouTube embed support                â”‚
â”‚ - New Fields:                                                                â”‚
â”‚ content_source: str = "hls"  # Add "youtube_embed" option                    â”‚
â”‚ youtube_video_id: Optional[str] = None                                       â”‚
â”‚ youtube_channel_id: Optional[str] = None                                     â”‚
â”‚ enable_audio_overlay: bool = False                                           â”‚
â”‚ audio_overlay_languages: List[str] = []                                      â”‚
â”‚ audio_sync_buffer_ms: int = 800                                              â”‚
â”‚ fallback_stream_url: Optional[str] = None                                    â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/services/youtube_audio_overlay_service.py (NEW)           â”‚
â”‚ - Purpose: Orchestrate YouTube embed + audio overlay synchronization         â”‚
â”‚ - Key Methods:                                                               â”‚
â”‚   - start_audio_overlay_session() - Initialize dubbing session               â”‚
â”‚   - sync_audio_to_youtube_time() - Handle drift correction                   â”‚
â”‚ - Integration: Coordinates with existing LiveDubbingService and              â”‚
â”‚ ChannelSTTManager                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/api/routes/youtube_overlay.py (NEW)                       â”‚
â”‚ - Endpoints:                                                                 â”‚
â”‚   - POST /api/youtube/overlay/start - Start audio overlay session            â”‚
â”‚   - POST /api/youtube/overlay/sync - Sync audio with YouTube player time     â”‚
â”‚   - POST /api/youtube/overlay/stop - Stop session                            â”‚
â”‚   - WebSocket /ws/youtube/overlay/{session_id} - Real-time dubbed audio      â”‚
â”‚ stream                                                                       â”‚
â”‚                                                                              â”‚
â”‚ Frontend Changes:                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/player/YouTubeAudioOverlayPlayer.tsx (NEW)         â”‚
â”‚ - Purpose: React component integrating YouTube IFrame Player API with audio  â”‚
â”‚ overlay                                                                      â”‚
â”‚ - Key Features:                                                              â”‚
â”‚   - YouTube IFrame Player initialization                                     â”‚
â”‚   - 1-second sync polling (send YouTube time to backend)                     â”‚
â”‚   - Web Audio API for dubbed audio playback                                  â”‚
â”‚   - Language selector UI                                                     â”‚
â”‚   - Volume mixer (YouTube video vs AI audio)                                 â”‚
â”‚ - Reuses: Existing BufferedLiveDubbingPlayer WebSocket logic                 â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/player/FullscreenVideoOverlay.tsx (Line 215-244)   â”‚
â”‚ - Action: Extend to detect content_source === "youtube_embed"                â”‚
â”‚ - Change: Render YouTubeAudioOverlayPlayer instead of existing YouTube       â”‚
â”‚ iframe (no audio overlay)                                                    â”‚
â”‚                                                                              â”‚
â”‚ Audio Synchronization Strategy:                                              â”‚
â”‚ 1. Initial buffer: 800ms (configurable per channel)                          â”‚
â”‚ 2. Sync polling: Frontend reports YouTube time every 1 second                â”‚
â”‚ 3. Drift correction: Backend adjusts audio timing, skip/repeat frames if     â”‚
â”‚ >500ms drift                                                                 â”‚
â”‚ 4. Emergency resync: Full catch-up if >2 seconds drift                       â”‚
â”‚ 5. Fallback: Disable audio overlay if sync fails, continue with YouTube      â”‚
â”‚ video only                                                                   â”‚
â”‚                                                                              â”‚
â”‚ Legal Compliance (YouTube TOS):                                              â”‚
â”‚ - âœ… Use official YouTube IFrame Player API (not re-streaming)               â”‚
â”‚ - âœ… Preserve YouTube ads (audio overlay plays on top)                       â”‚
â”‚ - âœ… Attribution (YouTube logo, link to original)                            â”‚
â”‚ - âœ… No video download/extraction (audio overlay independent)                â”‚
â”‚                                                                              â”‚
â”‚ 1.2 Podcast Dubbing Pipeline                                                 â”‚
â”‚                                                                              â”‚
â”‚ Infrastructure Status: âœ… COMPLETE - ALREADY EXISTS                          â”‚
â”‚                                                                              â”‚
â”‚ Existing Services (Reuse as-is):                                             â”‚
â”‚ - /backend/app/services/podcast_translation_service.py - Full pipeline       â”‚
â”‚ already implemented                                                          â”‚
â”‚   - Download â†’ Vocal separation â†’ Whisper transcription â†’ Translation â†’      â”‚
â”‚ ElevenLabs TTS â†’ Mix â†’ GCS upload                                            â”‚
â”‚ - /backend/app/services/podcast_sync_service.py - RSS feed ingestion already â”‚
â”‚  running                                                                     â”‚
â”‚ - /backend/app/models/content.py - Podcast and PodcastEpisode models already â”‚
â”‚  exist                                                                       â”‚
â”‚ - Podcasts already configured with RSS feeds on podcasts page                â”‚
â”‚                                                                              â”‚
â”‚ No Configuration Needed: Podcasts already exist in production with correct   â”‚
â”‚ RSS feeds                                                                    â”‚
â”‚                                                                              â”‚
â”‚ Action Required: Enable AI dubbing for existing Israeli podcasts             â”‚
â”‚ - Mark existing podcasts as Beta 500 eligible: is_beta_content: true         â”‚
â”‚ - Ensure auto-translation is enabled for existing episodes                   â”‚
â”‚ - Verify ElevenLabs TTS dubbing is running for Hebrew â†’ English              â”‚
â”‚                                                                              â”‚
â”‚ Frontend Changes:                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/podcast/PodcastDualLanguagePlayer.tsx (NEW)        â”‚
â”‚ - Purpose: Podcast player with language switcher (original Hebrew vs         â”‚
â”‚ AI-dubbed English)                                                           â”‚
â”‚ - Features:                                                                  â”‚
â”‚   - Audio player component (reuses existing AudioPlayer)                     â”‚
â”‚   - Language toggle (he â†” en)                                                â”‚
â”‚   - Transcript viewer (synchronized with playback)                           â”‚
â”‚   - Download/copy transcript functionality                                   â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/podcast/TranscriptViewer.tsx (NEW)                 â”‚
â”‚ - Purpose: Display transcript with auto-scroll to current position           â”‚
â”‚ - Features:                                                                  â”‚
â”‚   - Full transcript display                                                  â”‚
â”‚   - Copy to clipboard                                                        â”‚
â”‚   - Download as text file                                                    â”‚
â”‚                                                                              â”‚
â”‚ Copyright Strategy (Closed Beta):                                            â”‚
â”‚ - Fair Use Justification: Educational/research, no monetization,             â”‚
â”‚ transformative use, limited distribution (500 users), attribution            â”‚
â”‚ - Transition Plan: Negotiate licensing before public launch                  â”‚
â”‚ - Risk Mitigation: Private GCS bucket, authenticated access only, DMCA       â”‚
â”‚ compliance                                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1.3 Beta Content Filtering (CRITICAL)                                        â”‚
â”‚                                                                              â”‚
â”‚ Requirement: Hide non-compliant content from beta users                      â”‚
â”‚                                                                              â”‚
â”‚ Content Visibility Rules:                                                    â”‚
â”‚ - âœ… Beta Users Can View: Kan 11 (YouTube embed), Israeli podcasts, Israeli  â”‚
â”‚ radio stations                                                               â”‚
â”‚ - âŒ Beta Users CANNOT View: Series, movies, audiobooks (non-compliant       â”‚
â”‚ copyright content)                                                           â”‚
â”‚ - âœ… Admin/Super Admin: Can view ALL content (no restrictions)               â”‚
â”‚                                                                              â”‚
â”‚ Backend Implementation:                                                      â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/models/content.py (Extend existing models)                â”‚
â”‚ - Action: Add is_beta_content field to Content, LiveChannel, Podcast,        â”‚
â”‚ RadioStation models                                                          â”‚
â”‚ - New Field:                                                                 â”‚
â”‚ is_beta_content: bool = False  # True for YouTube embeds, podcasts, radio    â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/api/dependencies/beta_content_filter.py (NEW)             â”‚
â”‚ - Purpose: Dependency to filter content based on user role and beta status   â”‚
â”‚ - Logic:                                                                     â”‚
â”‚ def filter_beta_content(user: User, content: List[Content]) ->               â”‚
â”‚ List[Content]:                                                               â”‚
â”‚     # Admin/super_admin: see everything                                      â”‚
â”‚     if user.role in ["admin", "super_admin"]:                                â”‚
â”‚         return content                                                       â”‚
â”‚                                                                              â”‚
â”‚     # Beta users: only see beta-compliant content                            â”‚
â”‚     if user.beta_tester:                                                     â”‚
â”‚         return [c for c in content if c.is_beta_content]                     â”‚
â”‚                                                                              â”‚
â”‚     # Regular users: see everything (post-beta)                              â”‚
â”‚     return content                                                           â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/api/routes/content.py (Modify existing endpoints)         â”‚
â”‚ - Action: Apply filter_beta_content to all content listing endpoints         â”‚
â”‚ - Endpoints to modify:                                                       â”‚
â”‚   - GET /api/content/featured - Filter featured content                      â”‚
â”‚   - GET /api/content/search - Filter search results                          â”‚
â”‚   - GET /api/content/category/{category} - Filter by category                â”‚
â”‚   - GET /api/content/{content_id} - Block access to non-beta content (404)   â”‚
â”‚                                                                              â”‚
â”‚ Frontend Implementation:                                                     â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/contexts/BetaContext.tsx (NEW)                                â”‚
â”‚ - Purpose: React context to manage beta mode state                           â”‚
â”‚ - State:                                                                     â”‚
â”‚ interface BetaContextState {                                                 â”‚
â”‚   isBetaUser: boolean                                                        â”‚
â”‚   isAdmin: boolean                                                           â”‚
â”‚   canViewContent: (content: Content) => boolean                              â”‚
â”‚ }                                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/content/ContentCard.tsx (Modify existing)          â”‚
â”‚ - Action: Hide non-beta content cards from beta users                        â”‚
â”‚ - Logic: Check canViewContent(content) before rendering                      â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/pages/HomePage.tsx (Modify existing)                          â”‚
â”‚ - Action: Filter content sections for beta users                             â”‚
â”‚ - Sections:                                                                  â”‚
â”‚   - âœ… Show: "Kan 11 Live", "Israeli Podcasts", "Israeli Radio"              â”‚
â”‚   - âŒ Hide: "Featured Movies", "TV Series", "Audiobooks"                    â”‚
â”‚                                                                              â”‚
â”‚ Migration Script:                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /scripts/backend/production/content/mark_beta_content.py (NEW)         â”‚
â”‚ - Purpose: Mark existing content as beta-eligible                            â”‚
â”‚ - Logic:                                                                     â”‚
â”‚ # Mark Kan 11 as beta content                                                â”‚
â”‚ await LiveChannel.find(LiveChannel.name == "×›××Ÿ 11").update({"$set":         â”‚
â”‚ {"is_beta_content": True}})                                                  â”‚
â”‚                                                                              â”‚
â”‚ # Mark all Israeli podcasts as beta content                                  â”‚
â”‚ await Podcast.find(Podcast.culture_id == "israeli").update({"$set":          â”‚
â”‚ {"is_beta_content": True}})                                                  â”‚
â”‚                                                                              â”‚
â”‚ # Mark all Israeli radio stations as beta content                            â”‚
â”‚ await RadioStation.find(RadioStation.culture_id ==                           â”‚
â”‚ "israeli").update({"$set": {"is_beta_content": True}})                       â”‚
â”‚                                                                              â”‚
â”‚ # Ensure series, movies, audiobooks are NOT beta content (default: False)    â”‚
â”‚ await Content.find(Content.type.in_(["movie", "series",                      â”‚
â”‚ "audiobook"])).update({"$set": {"is_beta_content": False}})                  â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Phase 2: Credit System Implementation (Weeks 2-3)                            â”‚
â”‚                                                                              â”‚
â”‚ 2.1 Database Schema Extensions                                               â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/models/beta_credit.py (NEW)                               â”‚
â”‚                                                                              â”‚
â”‚ from datetime import datetime, timezone                                      â”‚
â”‚ from typing import Optional                                                  â”‚
â”‚ from beanie import Document                                                  â”‚
â”‚ from pydantic import Field                                                   â”‚
â”‚                                                                              â”‚
â”‚ class BetaCredit(Document):                                                  â”‚
â”‚     """Beta tester credit tracking and transaction history."""               â”‚
â”‚                                                                              â”‚
â”‚     user_id: str  # User ObjectId as string                                  â”‚
â”‚     total_credits: int = 5000  # Free credits for beta                       â”‚
â”‚     used_credits: int = 0                                                    â”‚
â”‚     remaining_credits: int = 5000                                            â”‚
â”‚                                                                              â”‚
â”‚     # Credit lifecycle                                                       â”‚
â”‚     granted_at: datetime = Field(default_factory=lambda:                     â”‚
â”‚ datetime.now(timezone.utc))                                                  â”‚
â”‚     expires_at: Optional[datetime] = None  # Beta expiration date            â”‚
â”‚     is_expired: bool = False                                                 â”‚
â”‚                                                                              â”‚
â”‚     # Transaction history                                                    â”‚
â”‚     transactions: List[Dict[str, Any]] = []  # {timestamp, type, amount,     â”‚
â”‚ feature, description}                                                        â”‚
â”‚                                                                              â”‚
â”‚     class Settings:                                                          â”‚
â”‚         name = "beta_credits"                                                â”‚
â”‚         indexes = ["user_id", "is_expired"]                                  â”‚
â”‚                                                                              â”‚
â”‚ class BetaCreditTransaction(Document):                                       â”‚
â”‚     """Individual credit transaction record."""                              â”‚
â”‚                                                                              â”‚
â”‚     user_id: str                                                             â”‚
â”‚     credit_id: str  # BetaCredit ObjectId                                    â”‚
â”‚                                                                              â”‚
â”‚     transaction_type: str  # "debit", "credit", "bonus"                      â”‚
â”‚     amount: int  # Positive for credits added, negative for usage            â”‚
â”‚     balance_after: int                                                       â”‚
â”‚                                                                              â”‚
â”‚     feature: str  # "live_dubbing", "podcast_translation", "transcription"   â”‚
â”‚     description: str                                                         â”‚
â”‚     metadata: Dict[str, Any] = {}  # {audio_seconds, characters, provider}   â”‚
â”‚                                                                              â”‚
â”‚     created_at: datetime = Field(default_factory=lambda:                     â”‚
â”‚ datetime.now(timezone.utc))                                                  â”‚
â”‚                                                                              â”‚
â”‚     class Settings:                                                          â”‚
â”‚         name = "beta_credit_transactions"                                    â”‚
â”‚         indexes = ["user_id", "created_at", "feature"]                       â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/models/user.py (Extend existing User model)               â”‚
â”‚                                                                              â”‚
â”‚ # Add to existing User model                                                 â”‚
â”‚ beta_tester: bool = False                                                    â”‚
â”‚ beta_cohort: Optional[str] = None  # "beta_500"                              â”‚
â”‚ referral_source: Optional[str] = None  # "israeli_mapped", "iconz",          â”‚
â”‚ "linkedin"                                                                   â”‚
â”‚ beta_joined_at: Optional[datetime] = None                                    â”‚
â”‚ beta_credits_id: Optional[str] = None  # BetaCredit ObjectId                 â”‚
â”‚ beta_survey_completed: bool = False                                          â”‚
â”‚ beta_nps_score: Optional[int] = None                                         â”‚
â”‚                                                                              â”‚
â”‚ 2.2 Credit Service                                                           â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/services/beta_credit_service.py (NEW)                     â”‚
â”‚                                                                              â”‚
â”‚ class BetaCreditService:                                                     â”‚
â”‚     """Manages beta credit allocation, consumption, and tracking."""         â”‚
â”‚                                                                              â”‚
â”‚     # Credit consumption rates                                               â”‚
â”‚     CREDIT_RATES = {                                                         â”‚
â”‚         "live_dubbing": 1.0,  # credits per second                           â”‚
â”‚         "podcast_translation": 1.0,  # credits per second                    â”‚
â”‚         "transcription": 0.5,  # credits per second                          â”‚
â”‚         "live_subtitles": 0.5,  # credits per second                         â”‚
â”‚         "cultural_context": 10,  # credits per API call                      â”‚
â”‚         "semantic_search": 5,  # credits per query                           â”‚
â”‚     }                                                                        â”‚
â”‚                                                                              â”‚
â”‚     async def allocate_credits(self, user_id: str, amount: int = 5000) ->    â”‚
â”‚ BetaCredit:                                                                  â”‚
â”‚         """Allocate credits to beta tester."""                               â”‚
â”‚                                                                              â”‚
â”‚     async def deduct_credits(                                                â”‚
â”‚         self,                                                                â”‚
â”‚         user_id: str,                                                        â”‚
â”‚         feature: str,                                                        â”‚
â”‚         usage_amount: float,  # seconds, characters, calls                   â”‚
â”‚         metadata: Dict[str, Any] = {}                                        â”‚
â”‚     ) -> Tuple[bool, int]:                                                   â”‚
â”‚         """                                                                  â”‚
â”‚         Deduct credits based on feature usage.                               â”‚
â”‚         Returns (success, remaining_credits).                                â”‚
â”‚         """                                                                  â”‚
â”‚                                                                              â”‚
â”‚     async def get_balance(self, user_id: str) -> int:                        â”‚
â”‚         """Get current credit balance."""                                    â”‚
â”‚                                                                              â”‚
â”‚     async def get_transactions(self, user_id: str, limit: int = 50) ->       â”‚
â”‚ List[BetaCreditTransaction]:                                                 â”‚
â”‚         """Get transaction history."""                                       â”‚
â”‚                                                                              â”‚
â”‚     async def check_low_balance(self, user_id: str) -> Optional[str]:        â”‚
â”‚         """                                                                  â”‚
â”‚         Check if user has low balance and return warning level.              â”‚
â”‚         Returns: "low" (500 credits), "critical" (100 credits), "depleted"   â”‚
â”‚ (0 credits), or None.                                                        â”‚
â”‚         """                                                                  â”‚
â”‚                                                                              â”‚
â”‚ 2.3 Metering Integration                                                     â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/services/olorin/metering/service.py (Extend existing)     â”‚
â”‚                                                                              â”‚
â”‚ Action: Add credit deduction to existing metering calls                      â”‚
â”‚                                                                              â”‚
â”‚ # In MeteringService.record_usage()                                          â”‚
â”‚ if user.beta_tester and user.beta_credits_id:                                â”‚
â”‚     credit_service = BetaCreditService()                                     â”‚
â”‚     success, remaining = await credit_service.deduct_credits(                â”‚
â”‚         user_id=str(user.id),                                                â”‚
â”‚         feature=feature_name,                                                â”‚
â”‚         usage_amount=usage_quantity,                                         â”‚
â”‚         metadata={"provider": provider, "cost_usd": actual_cost}             â”‚
â”‚     )                                                                        â”‚
â”‚                                                                              â”‚
â”‚     if not success:                                                          â”‚
â”‚         raise HTTPException(                                                 â”‚
â”‚             status_code=402,                                                 â”‚
â”‚             detail="Insufficient AI credits. Please upgrade your plan."      â”‚
â”‚         )                                                                    â”‚
â”‚                                                                              â”‚
â”‚ 2.4 Beta Tier Subscription                                                   â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/models/subscription.py (Extend existing)                  â”‚
â”‚                                                                              â”‚
â”‚ # Add new subscription plan                                                  â”‚
â”‚ class SubscriptionPlan:                                                      â”‚
â”‚     # ... existing plans ...                                                 â”‚
â”‚                                                                              â”‚
â”‚     BETA = {                                                                 â”‚
â”‚         "id": "beta",                                                        â”‚
â”‚         "name": "Beta Tester",                                               â”‚
â”‚         "price": 0.00,  # Free during beta                                   â”‚
â”‚         "currency": "USD",                                                   â”‚
â”‚         "interval": "month",                                                 â”‚
â”‚         "features": {                                                        â”‚
â”‚             **FAMILY["features"],  # All Family features                     â”‚
â”‚             "ai_credits": 5000,                                              â”‚
â”‚             "credits_reset": "monthly",                                      â”‚
â”‚             "beta_access": True,                                             â”‚
â”‚         },                                                                   â”‚
â”‚         "limits": {                                                          â”‚
â”‚             "concurrent_streams": 4,                                         â”‚
â”‚             "profiles": 5,                                                   â”‚
â”‚             "quality": "4k",                                                 â”‚
â”‚             "downloads": True,                                               â”‚
â”‚         }                                                                    â”‚
â”‚     }                                                                        â”‚
â”‚                                                                              â”‚
â”‚     CREDITS_SUBSCRIPTION = {                                                 â”‚
â”‚         "id": "credits_20",                                                  â”‚
â”‚         "name": "AI Credits Subscription",                                   â”‚
â”‚         "price": 20.00,                                                      â”‚
â”‚         "currency": "USD",                                                   â”‚
â”‚         "interval": "month",                                                 â”‚
â”‚         "features": {                                                        â”‚
â”‚             "ai_credits": 5000,                                              â”‚
â”‚             "credits_reset": "monthly",                                      â”‚
â”‚         }                                                                    â”‚
â”‚     }                                                                        â”‚
â”‚                                                                              â”‚
â”‚ 2.5 User Experience Components                                               â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/beta/CreditBalanceWidget.tsx (NEW)                 â”‚
â”‚                                                                              â”‚
â”‚ interface CreditBalanceWidgetProps {                                         â”‚
â”‚   userId: string                                                             â”‚
â”‚ }                                                                            â”‚
â”‚                                                                              â”‚
â”‚ export function CreditBalanceWidget({ userId }: CreditBalanceWidgetProps) {  â”‚
â”‚   const [credits, setCredits] = useState<number>(0)                          â”‚
â”‚   const [warningLevel, setWarningLevel] = useState<'low' | 'critical' |      â”‚
â”‚ 'depleted' | null>(null)                                                     â”‚
â”‚                                                                              â”‚
â”‚   useEffect(() => {                                                          â”‚
â”‚     // Fetch credit balance                                                  â”‚
â”‚     fetch(`/api/beta/credits/${userId}`)                                     â”‚
â”‚       .then(res => res.json())                                               â”‚
â”‚       .then(data => {                                                        â”‚
â”‚         setCredits(data.remaining_credits)                                   â”‚
â”‚         setWarningLevel(data.warning_level)                                  â”‚
â”‚       })                                                                     â”‚
â”‚   }, [userId])                                                               â”‚
â”‚                                                                              â”‚
â”‚   return (                                                                   â”‚
â”‚     <View style={styles.container}>                                          â”‚
â”‚       <Text style={styles.label}>AI Credits</Text>                           â”‚
â”‚       <Text style={styles.balance}>{credits.toLocaleString()} / 5,000</Text> â”‚
â”‚                                                                              â”‚
â”‚       {warningLevel === 'low' && (                                           â”‚
â”‚         <Text style={styles.warningLow}>                                     â”‚
â”‚           âš ï¸ 10% remaining - upgrade soon                                    â”‚
â”‚         </Text>                                                              â”‚
â”‚       )}                                                                     â”‚
â”‚                                                                              â”‚
â”‚       {warningLevel === 'critical' && (                                      â”‚
â”‚         <Text style={styles.warningCritical}>                                â”‚
â”‚           ğŸš¨ 2% remaining - upgrade now                                      â”‚
â”‚         </Text>                                                              â”‚
â”‚       )}                                                                     â”‚
â”‚                                                                              â”‚
â”‚       {warningLevel === 'depleted' && (                                      â”‚
â”‚         <View style={styles.depleted}>                                       â”‚
â”‚           <Text style={styles.depletedText}>Credits depleted</Text>          â”‚
â”‚           <GlassButton onPress={() => navigate('/upgrade')}>                 â”‚
â”‚             Upgrade to Continue                                              â”‚
â”‚           </GlassButton>                                                     â”‚
â”‚         </View>                                                              â”‚
â”‚       )}                                                                     â”‚
â”‚     </View>                                                                  â”‚
â”‚   )                                                                          â”‚
â”‚ }                                                                            â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/components/beta/BetaGraduationModal.tsx (NEW)                 â”‚
â”‚                                                                              â”‚
â”‚ // Modal shown when beta expires or credits depleted                         â”‚
â”‚ export function BetaGraduationModal({ onClose }: { onClose: () => void }) {  â”‚
â”‚   return (                                                                   â”‚
â”‚     <GlassModal visible={true} onClose={onClose}>                            â”‚
â”‚       <GlassCard style={styles.card}>                                        â”‚
â”‚         <Text style={styles.title}>Your Beta 500 Access is Ending</Text>     â”‚
â”‚                                                                              â”‚
â”‚         <Text style={styles.description}>                                    â”‚
â”‚           Thank you for being an early adopter! Choose your next plan:       â”‚
â”‚         </Text>                                                              â”‚
â”‚                                                                              â”‚
â”‚         <GlassButton variant="primary" onPress={handleUpgradeCredits}>       â”‚
â”‚           Continue with AI Credits - $20/month                               â”‚
â”‚           (5,000 credits/month)                                              â”‚
â”‚         </GlassButton>                                                       â”‚
â”‚                                                                              â”‚
â”‚         <GlassButton variant="secondary" onPress={handleUpgradePremium}>     â”‚
â”‚           Premium Streaming + Credits - $34.99/month                         â”‚
â”‚           (Premium features + 5,000 credits)                                 â”‚
â”‚         </GlassButton>                                                       â”‚
â”‚                                                                              â”‚
â”‚         <GlassButton variant="ghost" onPress={handleDowngrade}>              â”‚
â”‚           Free Tier (No AI features)                                         â”‚
â”‚         </GlassButton>                                                       â”‚
â”‚       </GlassCard>                                                           â”‚
â”‚     </GlassModal>                                                            â”‚
â”‚   )                                                                          â”‚
â”‚ }                                                                            â”‚
â”‚                                                                              â”‚
â”‚ 2.6 Admin Tools                                                              â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/api/routes/admin/beta_management.py (NEW)                 â”‚
â”‚                                                                              â”‚
â”‚ Endpoints:                                                                   â”‚
â”‚ - POST /api/admin/beta/grant-access - Grant beta access to user (email)      â”‚
â”‚ - POST /api/admin/beta/adjust-credits - Add/remove credits                   â”‚
â”‚ - GET /api/admin/beta/analytics - Beta cohort analytics                      â”‚
â”‚ - GET /api/admin/beta/users - List beta testers with credit usage            â”‚
â”‚ - POST /api/admin/beta/expire - Force-expire beta access                     â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Phase 3: Launch Infrastructure (Weeks 2-4)                                   â”‚
â”‚                                                                              â”‚
â”‚ 3.1 Beta Landing Page                                                        â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/pages/BetaLandingPage.tsx (NEW)                               â”‚
â”‚                                                                              â”‚
â”‚ Key Sections:                                                                â”‚
â”‚ 1. Hero Section                                                              â”‚
â”‚   - Headline: "Your Kids Can't Understand Hebrew News?"                      â”‚
â”‚   - Subheadline: "We Built an AI to Fix That."                               â”‚
â”‚   - Demo video embed (30-second split-screen)                                â”‚
â”‚   - CTA: "Join Beta 500 - Free Access"                                       â”‚
â”‚ 2. Value Proposition                                                         â”‚
â”‚   - "5,000 AI Credits - $0 for Beta Testers"                                 â”‚
â”‚   - Strikethrough: "~~$20/month~~ Free during beta"                          â”‚
â”‚   - "Limited to 500 Israeli expat families"                                  â”‚
â”‚ 3. Sign-up Form                                                              â”‚
â”‚   - Email (required)                                                         â”‚
â”‚   - Name (required)                                                          â”‚
â”‚   - Referral source dropdown (israeli_mapped, iconz, techaviv, linkedin,     â”‚
â”‚ other)                                                                       â”‚
â”‚   - Submit â†’ Email verification â†’ Waitlist if 501+                           â”‚
â”‚ 4. Social Proof                                                              â”‚
â”‚   - Testimonial quotes (from pilot users)                                    â”‚
â”‚   - Community logos (pending approval)                                       â”‚
â”‚   - "Built by Israeli expat founders"                                        â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/api/routes/beta.py (NEW)                                  â”‚
â”‚                                                                              â”‚
â”‚ Endpoints:                                                                   â”‚
â”‚ - POST /api/beta/signup - Beta signup (email, name, referral_source)         â”‚
â”‚ - GET /api/beta/status - Check beta availability (slots remaining)           â”‚
â”‚ - POST /api/beta/verify-email - Email verification for beta signup           â”‚
â”‚                                                                              â”‚
â”‚ Waitlist Logic:                                                              â”‚
â”‚                                                                              â”‚
â”‚ async def process_beta_signup(email: str, name: str, referral_source: str):  â”‚
â”‚     # Count current beta users                                               â”‚
â”‚     beta_count = await User.find(User.beta_tester == True).count()           â”‚
â”‚                                                                              â”‚
â”‚     if beta_count >= 500:                                                    â”‚
â”‚         # Add to waitlist                                                    â”‚
â”‚         waitlist_user = WaitlistUser(                                        â”‚
â”‚             email=email,                                                     â”‚
â”‚             name=name,                                                       â”‚
â”‚             referral_source=referral_source,                                 â”‚
â”‚             position=await WaitlistUser.find().count() + 1                   â”‚
â”‚         )                                                                    â”‚
â”‚         await waitlist_user.insert()                                         â”‚
â”‚         await send_waitlist_email(email, name, waitlist_user.position)       â”‚
â”‚         return {"status": "waitlist", "position": waitlist_user.position}    â”‚
â”‚                                                                              â”‚
â”‚     # Create beta user                                                       â”‚
â”‚     user = User(                                                             â”‚
â”‚         email=email,                                                         â”‚
â”‚         name=name,                                                           â”‚
â”‚         beta_tester=True,                                                    â”‚
â”‚         beta_cohort="beta_500",                                              â”‚
â”‚         referral_source=referral_source,                                     â”‚
â”‚         beta_joined_at=datetime.now(timezone.utc)                            â”‚
â”‚     )                                                                        â”‚
â”‚     await user.insert()                                                      â”‚
â”‚                                                                              â”‚
â”‚     # Allocate 5,000 AI credits                                              â”‚
â”‚     credit_service = BetaCreditService()                                     â”‚
â”‚     await credit_service.allocate_credits(str(user.id), 5000)                â”‚
â”‚                                                                              â”‚
â”‚     # Send welcome email                                                     â”‚
â”‚     await send_beta_welcome_email(user)                                      â”‚
â”‚                                                                              â”‚
â”‚     return {"status": "approved", "user_id": str(user.id)}                   â”‚
â”‚                                                                              â”‚
â”‚ 3.2 Email Automation                                                         â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/services/email_templates/beta_welcome.html (NEW -         â”‚
â”‚ SendGrid Template)                                                           â”‚
â”‚                                                                              â”‚
â”‚ Subject: Welcome to Bayit+ Beta 500! ğŸ‰                                      â”‚
â”‚                                                                              â”‚
â”‚ Content:                                                                     â”‚
â”‚ Hi {{name}},                                                                 â”‚
â”‚                                                                              â”‚
â”‚ You're in! You've secured one of 500 Beta spots for Bayit+.                  â”‚
â”‚                                                                              â”‚
â”‚ ğŸ Your Beta Perks:                                                          â”‚
â”‚ â€¢ 5,000 AI Credits (100 hours of content)                                    â”‚
â”‚ â€¢ Early access to all features                                               â”‚
â”‚ â€¢ Direct feedback channel to founders                                        â”‚
â”‚ â€¢ Lock in Beta pricing forever ($0 â†’ $20/month after Beta)                   â”‚
â”‚                                                                              â”‚
â”‚ ğŸ“± Next Steps:                                                               â”‚
â”‚ 1. Verify your email (link below)                                            â”‚
â”‚ 2. Download the app (iOS/Android/Web)                                        â”‚
â”‚ 3. Start streaming Israeli content with real-time AI dubbing                 â”‚
â”‚                                                                              â”‚
â”‚ [Verify Email] [Download App] [Watch Demo]                                   â”‚
â”‚                                                                              â”‚
â”‚ Questions? Reply to this email or join our Beta community.                   â”‚
â”‚                                                                              â”‚
â”‚ Welcome aboard!                                                              â”‚
â”‚ The Bayit+ Team                                                              â”‚
â”‚                                                                              â”‚
â”‚ File: /backend/app/services/email_templates/beta_waitlist.html (NEW -        â”‚
â”‚ SendGrid Template)                                                           â”‚
â”‚                                                                              â”‚
â”‚ Subject: You're on the Bayit+ Beta Waitlist                                  â”‚
â”‚                                                                              â”‚
â”‚ Content:                                                                     â”‚
â”‚ Hi {{name}},                                                                 â”‚
â”‚                                                                              â”‚
â”‚ Thanks for your interest in Bayit+ Beta!                                     â”‚
â”‚                                                                              â”‚
â”‚ All 500 Beta spots are currently filled, but you're on our priority          â”‚
â”‚ waitlist.                                                                    â”‚
â”‚                                                                              â”‚
â”‚ ğŸ“ Your Position: #{{position}}                                              â”‚
â”‚                                                                              â”‚
â”‚ We'll notify you immediately when a spot opens up (usually within 48 hours). â”‚
â”‚                                                                              â”‚
â”‚ Meanwhile, watch our demo video to see what you're missing:                  â”‚
â”‚ [Watch Demo]                                                                 â”‚
â”‚                                                                              â”‚
â”‚ Stay tuned!                                                                  â”‚
â”‚ The Bayit+ Team                                                              â”‚
â”‚                                                                              â”‚
â”‚ Email Sequence:                                                              â”‚
â”‚ - Day 0: Welcome email (immediately after signup)                            â”‚
â”‚ - Day 3: Product tour email (3 tips to get the most out of Bayit+)           â”‚
â”‚ - Day 7: Feedback survey (NPS, feature requests, would you pay $20/month?)   â”‚
â”‚                                                                              â”‚
â”‚ 3.3 Community Outreach Materials                                             â”‚
â”‚                                                                              â”‚
â”‚ File: /docs/marketing/beta_500_outreach_materials.md (NEW)                   â”‚
â”‚                                                                              â”‚
â”‚ Guy Franklin (Israeli Mapped in NY) - Email Template:                        â”‚
â”‚                                                                              â”‚
â”‚ Subject: Built an AI tool for Israeli expat kids - would love your feedback  â”‚
â”‚                                                                              â”‚
â”‚ Hi Guy,                                                                      â”‚
â”‚                                                                              â”‚
â”‚ I'm [Founder Name], co-founder of Bayit+. We've built an AI-powered tool     â”‚
â”‚ that solves a problem many Israeli expats face: kids can't understand Hebrew â”‚
â”‚  news and cultural content.                                                  â”‚
â”‚                                                                              â”‚
â”‚ Problem: Israeli expat kids in NY lose connection to Israeli culture because â”‚
â”‚  they can't understand Hebrew media.                                         â”‚
â”‚                                                                              â”‚
â”‚ Solution: Bayit+ uses AI to dub Israeli content (Kan 11, radio, podcasts)    â”‚
â”‚ into English in real-time, while preserving cultural context.                â”‚
â”‚                                                                              â”‚
â”‚ Why I'm reaching out: Israeli Mapped in NY is a hub for tech-savvy Israeli   â”‚
â”‚ expats who'd benefit from this. I'd love to offer your community early       â”‚
â”‚ access to Beta 500 (free testing, 100 hours of content).                     â”‚
â”‚                                                                              â”‚
â”‚ Demo: [30-second video link]                                                 â”‚
â”‚                                                                              â”‚
â”‚ Would you be open to a quick call? I'd love to show you a live demo and      â”‚
â”‚ explore if this would add value to your community.                           â”‚
â”‚                                                                              â”‚
â”‚ Thanks for building such an amazing space for Israelis in NY!                â”‚
â”‚                                                                              â”‚
â”‚ Best,                                                                        â”‚
â”‚ [Founder Name]                                                               â”‚
â”‚                                                                              â”‚
â”‚ P.S. We're limiting Beta to 500 users, and I'd love Israeli Mapped members   â”‚
â”‚ to get first access.                                                         â”‚
â”‚                                                                              â”‚
â”‚ WhatsApp Groups (Iconz, TechAviv) - Message Template:                        â”‚
â”‚                                                                              â”‚
â”‚ Hey everyone! ğŸ‘‹                                                             â”‚
â”‚                                                                              â”‚
â”‚ Quick share: I just shipped a feature I built because my kids couldn't       â”‚
â”‚ understand the Hebrew news.                                                  â”‚
â”‚                                                                              â”‚
â”‚ Built an LLM pipeline that dubs Kan 11 live broadcasts into English - in     â”‚
â”‚ real-time. Latency is ~2-3 seconds.                                          â”‚
â”‚                                                                              â”‚
â”‚ Would love feedback on the AI audio quality and if the translation preserves â”‚
â”‚  cultural context.                                                           â”‚
â”‚                                                                              â”‚
â”‚ Testing with 500 beta users - totally free (normally $20/mo after beta).     â”‚
â”‚                                                                              â”‚
â”‚ Demo (30s): [link]                                                           â”‚
â”‚ Beta signup: [bayitplus.com/beta]                                            â”‚
â”‚                                                                              â”‚
â”‚ Tech stack: ElevenLabs for TTS, GPT-4 for context-aware translation, GCS for â”‚
â”‚  streaming.                                                                  â”‚
â”‚                                                                              â”‚
â”‚ Any Israeli expat founders here? This might be useful for your kids too.     â”‚
â”‚                                                                              â”‚
â”‚ LinkedIn "Build in Public" Post:                                             â”‚
â”‚                                                                              â”‚
â”‚ My kids couldn't understand the Hebrew news. So I built an AI to translate   â”‚
â”‚ it in real-time. ğŸ™ï¸                                                          â”‚
â”‚                                                                              â”‚
â”‚ Here's the demo: [30-second video embed]                                     â”‚
â”‚                                                                              â”‚
â”‚ Problem: Israeli expat kids in the US lose connection to Israeli culture     â”‚
â”‚ because they can't understand Hebrew media.                                  â”‚
â”‚                                                                              â”‚
â”‚ Solution: AI-powered real-time dubbing for Israeli content (TV, radio,       â”‚
â”‚ podcasts). Original Hebrew audio + English AI translation, playing           â”‚
â”‚ simultaneously.                                                              â”‚
â”‚                                                                              â”‚
â”‚ Tech behind it:                                                              â”‚
â”‚ â€¢ ElevenLabs TTS for natural voices                                          â”‚
â”‚ â€¢ GPT-4 for context-aware translation                                        â”‚
â”‚ â€¢ Custom LLM pipeline for 2-3s latency                                       â”‚
â”‚ â€¢ React Native for cross-platform (iOS/Android/Web/TV)                       â”‚
â”‚                                                                              â”‚
â”‚ Why I'm sharing: We're opening Beta 500 (free testing for Israeli expats).   â”‚
â”‚                                                                              â”‚
â”‚ If you're raising bilingual kids and struggle with Hebrew content, this      â”‚
â”‚ might help. Drop a comment or DM for beta access.                            â”‚
â”‚                                                                              â”‚
â”‚ #BuildInPublic #AI #MultilingualKids #IsraeliExpats                          â”‚
â”‚                                                                              â”‚
â”‚ 3.4 Analytics & Tracking                                                     â”‚
â”‚                                                                              â”‚
â”‚ File: /web/src/services/beta_analytics.ts (NEW)                              â”‚
â”‚                                                                              â”‚
â”‚ export const betaAnalytics = {                                               â”‚
â”‚   trackLandingView: (source: string) => {                                    â”‚
â”‚     growthbook.trackEvent('beta_landing_viewed', { source })                 â”‚
â”‚   },                                                                         â”‚
â”‚                                                                              â”‚
â”‚   trackEmailSubmit: (source: string, email: string) => {                     â”‚
â”‚     growthbook.trackEvent('beta_email_submitted', { source, email })         â”‚
â”‚   },                                                                         â”‚
â”‚                                                                              â”‚
â”‚   trackVerification: (userId: string, source: string) => {                   â”‚
â”‚     growthbook.trackEvent('beta_email_verified', { userId, source })         â”‚
â”‚   },                                                                         â”‚
â”‚                                                                              â”‚
â”‚   trackFirstSession: (userId: string, source: string) => {                   â”‚
â”‚     growthbook.trackEvent('beta_first_session', { userId, source })          â”‚
â”‚   },                                                                         â”‚
â”‚                                                                              â”‚
â”‚   trackConversion: (userId: string, source: string, creditsUsed: number) =>  â”‚
â”‚ {                                                                            â”‚
â”‚     growthbook.trackEvent('beta_converted', { userId, source, creditsUsed }) â”‚
â”‚   }                                                                          â”‚
â”‚ }                                                                            â”‚
â”‚                                                                              â”‚
â”‚ UTM Parameters:                                                              â”‚
â”‚ - ?utm_source=israeli_mapped&utm_medium=community&utm_campaign=beta_500      â”‚
â”‚ - ?utm_source=iconz&utm_medium=whatsapp&utm_campaign=beta_500                â”‚
â”‚ - ?utm_source=techaviv&utm_medium=whatsapp&utm_campaign=beta_500             â”‚
â”‚ - ?utm_source=linkedin&utm_medium=social&utm_campaign=beta_500               â”‚
â”‚                                                                              â”‚
â”‚ Conversion Funnel Tracking:                                                  â”‚
â”‚ Landing View â†’ Email Submit â†’ Email Verify â†’ First Session â†’ Active User (7  â”‚
â”‚ days)                                                                        â”‚
â”‚                                                                              â”‚
â”‚ Target Metrics:                                                              â”‚
â”‚ â€¢ Landing â†’ Email: 30% conversion                                            â”‚
â”‚ â€¢ Email â†’ Verify: 80% conversion                                             â”‚
â”‚ â€¢ Verify â†’ First Session: 90% conversion                                     â”‚
â”‚ â€¢ First Session â†’ Active: 60% retention                                      â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Implementation Timeline                                                      â”‚
â”‚                                                                              â”‚
â”‚ Week 1: Foundation                                                           â”‚
â”‚                                                                              â”‚
â”‚ - Days 1-2: Kan 11 YouTube integration (backend model, service, API)         â”‚
â”‚ - Days 3-4: YouTubeAudioOverlayPlayer component (frontend)                   â”‚
â”‚ - Days 5-6: Beta landing page + signup API                                   â”‚
â”‚ - Day 7: Demo video production                                               â”‚
â”‚                                                                              â”‚
â”‚ Week 2: Credit System                                                        â”‚
â”‚                                                                              â”‚
â”‚ - Days 8-9: BetaCredit models, credit service, metering integration          â”‚
â”‚ - Days 10-11: Credit balance widget, transaction history UI                  â”‚
â”‚ - Days 12-13: Admin tools for beta management                                â”‚
â”‚ - Day 14: Email templates (SendGrid)                                         â”‚
â”‚                                                                              â”‚
â”‚ Week 3: Beta Content Filtering & Podcast Enhancement                         â”‚
â”‚                                                                              â”‚
â”‚ - Days 15-16: Implement beta content filtering (backend + frontend)          â”‚
â”‚ - Days 17-18: Migration script to mark existing content as beta-eligible     â”‚
â”‚ - Days 19-20: PodcastDualLanguagePlayer, TranscriptViewer components         â”‚
â”‚ - Day 21: Verify existing podcasts have AI dubbing enabled                   â”‚
â”‚                                                                              â”‚
â”‚ Week 4: Integration & Launch                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Days 22-23: Internal testing (landing page, signup flow, credit system,    â”‚
â”‚ content filtering)                                                           â”‚
â”‚ - Days 24-25: Verify beta users cannot access series/movies/audiobooks       â”‚
â”‚ - Day 26: Demo video production and upload                                   â”‚
â”‚ - Day 27: Guy Franklin outreach                                              â”‚
â”‚ - Day 28: WhatsApp groups (Iconz, TechAviv) + LinkedIn post                  â”‚
â”‚                                                                              â”‚
â”‚ Weeks 5-6: Optimization & Scaling                                            â”‚
â”‚                                                                              â”‚
â”‚ - Days 29-35: Monitor signups, conversion funnel, credit usage               â”‚
â”‚ - Days 36-42: Collect feedback, iterate on user experience                   â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Critical Files Summary                                                       â”‚
â”‚                                                                              â”‚
â”‚ Backend Files (16 files)                                                     â”‚
â”‚                                                                              â”‚
â”‚ New Files (10):                                                              â”‚
â”‚ 1. /backend/app/models/beta_credit.py - BetaCredit and BetaCreditTransaction â”‚
â”‚  models                                                                      â”‚
â”‚ 2. /backend/app/services/beta_credit_service.py - Credit allocation,         â”‚
â”‚ deduction, tracking                                                          â”‚
â”‚ 3. /backend/app/services/youtube_audio_overlay_service.py - YouTube sync     â”‚
â”‚ orchestration                                                                â”‚
â”‚ 4. /backend/app/api/routes/youtube_overlay.py - YouTube overlay API          â”‚
â”‚ endpoints                                                                    â”‚
â”‚ 5. /backend/app/api/routes/beta.py - Beta signup, verification, status       â”‚
â”‚ 6. /backend/app/api/routes/admin/beta_management.py - Admin tools for beta   â”‚
â”‚ 7. /backend/app/api/dependencies/beta_content_filter.py - Beta content       â”‚
â”‚ filtering logic                                                              â”‚
â”‚ 8. /backend/app/services/email_templates/beta_welcome.html - Welcome email   â”‚
â”‚ template                                                                     â”‚
â”‚ 9. /backend/app/services/email_templates/beta_waitlist.html - Waitlist email â”‚
â”‚  template                                                                    â”‚
â”‚ 10. /scripts/backend/production/content/mark_beta_content.py - Migration     â”‚
â”‚ script to mark beta content                                                  â”‚
â”‚                                                                              â”‚
â”‚ Modified Files (6):                                                          â”‚
â”‚ 1. /backend/app/models/content.py (Line 317-366) - Extend LiveChannel with   â”‚
â”‚ YouTube fields + is_beta_content field                                       â”‚
â”‚ 2. /backend/app/models/user.py - Add beta_tester, beta_cohort,               â”‚
â”‚ referral_source fields                                                       â”‚
â”‚ 3. /backend/app/models/subscription.py - Add BETA and CREDITS_SUBSCRIPTION   â”‚
â”‚ plans                                                                        â”‚
â”‚ 4. /backend/app/services/olorin/metering/service.py - Integrate credit       â”‚
â”‚ deduction                                                                    â”‚
â”‚ 5. /backend/app/api/routes/websocket_live_dubbing.py - Add YouTube sync mode â”‚
â”‚ 6. /backend/app/api/routes/content.py - Apply beta content filtering to all  â”‚
â”‚ endpoints                                                                    â”‚
â”‚                                                                              â”‚
â”‚ Frontend Files (9 files)                                                     â”‚
â”‚                                                                              â”‚
â”‚ New Files (8):                                                               â”‚
â”‚ 1. /web/src/components/player/YouTubeAudioOverlayPlayer.tsx - YouTube +      â”‚
â”‚ audio overlay player                                                         â”‚
â”‚ 2. /web/src/components/podcast/PodcastDualLanguagePlayer.tsx - Podcast       â”‚
â”‚ player with language switcher                                                â”‚
â”‚ 3. /web/src/components/podcast/TranscriptViewer.tsx - Transcript display     â”‚
â”‚ component                                                                    â”‚
â”‚ 4. /web/src/components/beta/CreditBalanceWidget.tsx - Credit balance display â”‚
â”‚ 5. /web/src/components/beta/BetaGraduationModal.tsx - Beta expiration        â”‚
â”‚ upgrade modal                                                                â”‚
â”‚ 6. /web/src/pages/BetaLandingPage.tsx - Beta 500 landing page                â”‚
â”‚ 7. /web/src/services/beta_analytics.ts - Beta analytics tracking             â”‚
â”‚ 8. /web/src/contexts/BetaContext.tsx - Beta mode state management            â”‚
â”‚                                                                              â”‚
â”‚ Modified Files (3):                                                          â”‚
â”‚ 1. /web/src/components/player/FullscreenVideoOverlay.tsx (Line 215-244) -    â”‚
â”‚ Add YouTube overlay mode                                                     â”‚
â”‚ 2. /web/src/components/content/ContentCard.tsx - Apply beta content          â”‚
â”‚ filtering                                                                    â”‚
â”‚ 3. /web/src/pages/HomePage.tsx - Filter content sections for beta users      â”‚
â”‚                                                                              â”‚
â”‚ Configuration Files (2 files)                                                â”‚
â”‚                                                                              â”‚
â”‚ 1. /docs/marketing/beta_500_outreach_materials.md (NEW) - Outreach templates â”‚
â”‚ 2. /.env - Add Beta 500 environment variables (via Google Cloud Secret       â”‚
â”‚ Manager)                                                                     â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Configuration Requirements                                                   â”‚
â”‚                                                                              â”‚
â”‚ Environment Variables (Google Cloud Secret Manager)                          â”‚
â”‚                                                                              â”‚
â”‚ # Beta 500 Configuration                                                     â”‚
â”‚ BETA_MAX_USERS=500                                                           â”‚
â”‚ BETA_AI_CREDITS=5000                                                         â”‚
â”‚ BETA_TIER=beta                                                               â”‚
â”‚ BETA_EXPIRATION_MONTHS=3                                                     â”‚
â”‚                                                                              â”‚
â”‚ # YouTube Integration                                                        â”‚
â”‚ YOUTUBE_API_KEY=[Google Cloud API Key]                                       â”‚
â”‚ YOUTUBE_EMBED_ALLOWED_DOMAINS=youtube.com,youtu.be                           â”‚
â”‚                                                                              â”‚
â”‚ # SendGrid Email                                                             â”‚
â”‚ SENDGRID_BETA_WELCOME_TEMPLATE_ID=[SendGrid Template ID]                     â”‚
â”‚ SENDGRID_BETA_WAITLIST_TEMPLATE_ID=[SendGrid Template ID]                    â”‚
â”‚ SENDGRID_BETA_SURVEY_TEMPLATE_ID=[SendGrid Template ID]                      â”‚
â”‚                                                                              â”‚
â”‚ # Credit Consumption Rates                                                   â”‚
â”‚ CREDIT_RATE_LIVE_DUBBING=1.0  # credits per second                           â”‚
â”‚ CREDIT_RATE_PODCAST_TRANSLATION=1.0                                          â”‚
â”‚ CREDIT_RATE_TRANSCRIPTION=0.5                                                â”‚
â”‚ CREDIT_RATE_LIVE_SUBTITLES=0.5                                               â”‚
â”‚ CREDIT_RATE_CULTURAL_CONTEXT=10  # credits per API call                      â”‚
â”‚ CREDIT_RATE_SEMANTIC_SEARCH=5  # credits per query                           â”‚
â”‚                                                                              â”‚
â”‚ # Feature Flags (GrowthBook)                                                 â”‚
â”‚ GROWTHBOOK_BETA_LANDING_ENABLED=true                                         â”‚
â”‚ GROWTHBOOK_BETA_SIGNUP_RATE_LIMIT=10  # signups per minute                   â”‚
â”‚                                                                              â”‚
â”‚ # Analytics                                                                  â”‚
â”‚ BETA_LANDING_PAGE_URL=https://bayitplus.com/beta                             â”‚
â”‚ BETA_DEMO_VIDEO_URL=[YouTube URL]                                            â”‚
â”‚                                                                              â”‚
â”‚ Important: Follow secrets management workflow:                               â”‚
â”‚ 1. Add secrets to Google Cloud Secret Manager first                          â”‚
â”‚ 2. Run /scripts/sync-gcloud-secrets.sh to regenerate .env                    â”‚
â”‚ 3. Restart services to pick up new configuration                             â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Cost Projections                                                             â”‚
â”‚                                                                              â”‚
â”‚ Beta Cost Breakdown (500 users)                                              â”‚
â”‚                                                                              â”‚
â”‚ Monthly Costs:                                                               â”‚
â”‚ - ElevenLabs TTS: $1,500/month (3M characters @ $0.50/1K chars)              â”‚
â”‚ - Google Cloud Translation: $900/month (60M chars @ $15/1M chars)            â”‚
â”‚ - OpenAI Whisper: $720/month (24K audio minutes @ $0.03/min)                 â”‚
â”‚ - Infrastructure (GCS, MongoDB): $275/month (storage, bandwidth)             â”‚
â”‚ - Email (SendGrid): $80/month (10K emails @ $0.008/email)                    â”‚
â”‚                                                                              â”‚
â”‚ Total: $3,475/month for 500 users                                            â”‚
â”‚                                                                              â”‚
â”‚ Assumptions:                                                                 â”‚
â”‚ - Average 3,000 credits used per user (60% of allocation)                    â”‚
â”‚ - 70% live dubbing, 20% podcast translation, 10% other features              â”‚
â”‚ - 50 hours dubbing per user during beta                                      â”‚
â”‚                                                                              â”‚
â”‚ Post-Beta Revenue Model                                                      â”‚
â”‚                                                                              â”‚
â”‚ Credits Subscription: $20/month                                              â”‚
â”‚ - Cost per user: $6.95/month (ElevenLabs, translation, transcription)        â”‚
â”‚ - Margin: $13.05/month (65% gross margin)                                    â”‚
â”‚ - Break-even: 174 users needed (35% conversion from beta)                    â”‚
â”‚                                                                              â”‚
â”‚ Expected Beta Conversion:                                                    â”‚
â”‚ - 500 beta users Ã— 20% conversion = 100 paid subscribers                     â”‚
â”‚ - 100 Ã— $20/month = $2,000 MRR                                               â”‚
â”‚ - Month 1 cost: $3,475 (beta) - Month 2 revenue: $2,000 (paid) = Break-even  â”‚
â”‚ in ~6 months                                                                 â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Success Metrics                                                              â”‚
â”‚                                                                              â”‚
â”‚ Technical Metrics                                                            â”‚
â”‚                                                                              â”‚
â”‚ - YouTube Audio Sync Quality: < 300ms average drift, < 5% emergency resyncs  â”‚
â”‚ - YouTube Uptime: > 95% availability (with fallback to HLS)                  â”‚
â”‚ - Podcast Translation Time: < 15 minutes per 1-hour episode                  â”‚
â”‚ - Translation Quality: > 90% user satisfaction (NPS survey)                  â”‚
â”‚                                                                              â”‚
â”‚ User Engagement Metrics                                                      â”‚
â”‚                                                                              â”‚
â”‚ - Beta Signups: 500 within 2 weeks                                           â”‚
â”‚ - Activation Rate: 60%+ (first session within 7 days)                        â”‚
â”‚ - YouTube Audio Overlay Usage: 40%+ of users enable audio overlay            â”‚
â”‚ - Podcast Listening: 30%+ average listen time per episode                    â”‚
â”‚ - Credit Usage: 3,000+ average credits used per user (60% utilization)       â”‚
â”‚                                                                              â”‚
â”‚ Conversion Metrics                                                           â”‚
â”‚                                                                              â”‚
â”‚ - Landing â†’ Email: 30% conversion                                            â”‚
â”‚ - Email â†’ Verification: 80% conversion                                       â”‚
â”‚ - Verification â†’ First Session: 90% conversion                               â”‚
â”‚ - NPS Score: 4.0+ (would recommend)                                          â”‚
â”‚ - Conversion Intent: 20%+ (would pay $20/month after beta)                   â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Risk Mitigation Strategies                                                   â”‚
â”‚                                                                              â”‚
â”‚ Risk 1: YouTube Audio Sync Drift                                             â”‚
â”‚                                                                              â”‚
â”‚ Mitigation:                                                                  â”‚
â”‚ - Adaptive buffer (800ms default, auto-adjust)                               â”‚
â”‚ - 1-second sync polling with drift correction                                â”‚
â”‚ - Emergency resync if >2 seconds drift                                       â”‚
â”‚ - Fallback: Disable audio overlay if sync fails                              â”‚
â”‚                                                                              â”‚
â”‚ Risk 2: YouTube Stream Availability                                          â”‚
â”‚                                                                              â”‚
â”‚ Mitigation:                                                                  â”‚
â”‚ - Fallback HLS stream configured (fallback_stream_url)                       â”‚
â”‚ - Health check endpoint for YouTube video accessibility                      â”‚
â”‚ - Automatic fallback detection                                               â”‚
â”‚ - Admin notification on failures                                             â”‚
â”‚                                                                              â”‚
â”‚ Risk 3: Podcast Copyright Claims                                             â”‚
â”‚                                                                              â”‚
â”‚ Mitigation:                                                                  â”‚
â”‚ - Closed beta only (no public access)                                        â”‚
â”‚ - Fair use justification (educational, no monetization)                      â”‚
â”‚ - Attribution and links to original content                                  â”‚
â”‚ - DMCA compliance (immediate takedown)                                       â”‚
â”‚ - Pre-emptive outreach to podcast creators                                   â”‚
â”‚                                                                              â”‚
â”‚ Risk 4: Credit System Gaming                                                 â”‚
â”‚                                                                              â”‚
â”‚ Mitigation:                                                                  â”‚
â”‚ - Rate limiting on API endpoints                                             â”‚
â”‚ - Device fingerprinting (prevent multi-account abuse)                        â”‚
â”‚ - Credit transaction audit logs                                              â”‚
â”‚ - Admin tools for manual credit adjustment                                   â”‚
â”‚ - Fraud detection (usage patterns, IP tracking)                              â”‚
â”‚                                                                              â”‚
â”‚ Risk 5: Budget Overrun                                                       â”‚
â”‚                                                                              â”‚
â”‚ Mitigation:                                                                  â”‚
â”‚ - Real-time cost monitoring (Olorin metering service)                        â”‚
â”‚ - Per-feature cost tracking (ElevenLabs, translation, transcription)         â”‚
â”‚ - Credit consumption alerts (admin dashboard)                                â”‚
â”‚ - Emergency credit freeze if budget exceeded                                 â”‚
â”‚ - Fallback to cheaper providers (Google TTS vs ElevenLabs)                   â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Verification & Testing                                                       â”‚
â”‚                                                                              â”‚
â”‚ End-to-End Testing Checklist                                                 â”‚
â”‚                                                                              â”‚
â”‚ Content Delivery:                                                            â”‚
â”‚ - Kan 11 YouTube embed loads correctly                                       â”‚
â”‚ - Audio overlay syncs within 300ms                                           â”‚
â”‚ - Language switcher works (he â†’ en)                                          â”‚
â”‚ - Drift correction maintains sync over 30-minute session                     â”‚
â”‚ - Fallback to HLS if YouTube unavailable                                     â”‚
â”‚ - Podcast dual-language player switches languages                            â”‚
â”‚ - Transcripts display and download correctly                                 â”‚
â”‚ - Israeli radio stations are visible to beta users                           â”‚
â”‚                                                                              â”‚
â”‚ Beta Content Filtering (CRITICAL):                                           â”‚
â”‚ - Beta users can view: Kan 11, podcasts, radio stations                      â”‚
â”‚ - Beta users CANNOT view: series, movies, audiobooks (404 or hidden)         â”‚
â”‚ - Admin/super_admin users can view ALL content                               â”‚
â”‚ - Content cards for non-beta content are hidden in UI                        â”‚
â”‚ - Direct URL access to non-beta content returns 404 for beta users           â”‚
â”‚ - Homepage sections filter correctly for beta users                          â”‚
â”‚                                                                              â”‚
â”‚ Credit System:                                                               â”‚
â”‚ - Beta signup allocates 5,000 credits                                        â”‚
â”‚ - Credit balance displays in real-time                                       â”‚
â”‚ - Credits deducted correctly (1 credit/sec dubbing)                          â”‚
â”‚ - Low credit warnings appear (500, 100, 0)                                   â”‚
â”‚ - Credit exhaustion blocks access                                            â”‚
â”‚ - Transaction history displays correctly                                     â”‚
â”‚ - Admin tools grant/adjust credits                                           â”‚
â”‚                                                                              â”‚
â”‚ Landing Page & Signup:                                                       â”‚
â”‚ - Landing page loads with demo video                                         â”‚
â”‚ - Signup form submits successfully                                           â”‚
â”‚ - Waitlist logic activates at 501 users                                      â”‚
â”‚ - Welcome email sent after signup                                            â”‚
â”‚ - Email verification link works                                              â”‚
â”‚ - UTM tracking captures referral source                                      â”‚
â”‚ - Analytics events fire correctly                                            â”‚
â”‚                                                                              â”‚
â”‚ User Experience:                                                             â”‚
â”‚ - First-time user onboarding completes                                       â”‚
â”‚ - Credit balance widget visible                                              â”‚
â”‚ - Beta graduation modal appears on expiration                                â”‚
â”‚ - Upgrade flow to paid plan works                                            â”‚
â”‚ - Feedback survey collects NPS scores                                        â”‚
â”‚                                                                              â”‚
â”‚ Performance Testing                                                          â”‚
â”‚                                                                              â”‚
â”‚ - YouTube sync latency < 300ms (p95)                                         â”‚
â”‚ - Podcast translation completes < 15 min/hour                                â”‚
â”‚ - Landing page loads < 2 seconds                                             â”‚
â”‚ - API response times < 200ms (p95)                                           â”‚
â”‚ - WebSocket connections stable > 98% uptime                                  â”‚
â”‚                                                                              â”‚
â”‚ Security Testing                                                             â”‚
â”‚                                                                              â”‚
â”‚ - Email verification required before access                                  â”‚
â”‚ - Credit deduction uses atomic transactions                                  â”‚
â”‚ - Admin tools require super_admin role                                       â”‚
â”‚ - Rate limiting prevents abuse (10 signups/min)                              â”‚
â”‚ - CSRF protection on all forms                                               â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Documentation Requirements                                                   â”‚
â”‚                                                                              â”‚
â”‚ User Documentation                                                           â”‚
â”‚                                                                              â”‚
â”‚ 1. Beta User Guide (/docs/beta/user_guide.md)                                â”‚
â”‚   - How to use audio overlay feature                                         â”‚
â”‚   - How to switch languages on podcasts                                      â”‚
â”‚   - How to monitor credit usage                                              â”‚
â”‚   - FAQ and troubleshooting                                                  â”‚
â”‚ 2. Onboarding Tutorial (In-app)                                              â”‚
â”‚   - Step-by-step first-time user flow                                        â”‚
â”‚   - Interactive tooltips for key features                                    â”‚
â”‚                                                                              â”‚
â”‚ Admin Documentation                                                          â”‚
â”‚                                                                              â”‚
â”‚ 1. Beta Management Guide (/docs/beta/admin_guide.md)                         â”‚
â”‚   - How to grant beta access                                                 â”‚
â”‚   - How to adjust credits                                                    â”‚
â”‚   - How to view analytics                                                    â”‚
â”‚   - How to handle escalations                                                â”‚
â”‚ 2. Secrets Management (/docs/deployment/GCLOUD_SECRETS_BETA_500.md)          â”‚
â”‚   - List of new secrets for Beta 500                                         â”‚
â”‚   - GCloud commands to add secrets                                           â”‚
â”‚   - Regeneration workflow                                                    â”‚
â”‚                                                                              â”‚
â”‚ Technical Documentation                                                      â”‚
â”‚                                                                              â”‚
â”‚ 1. YouTube Audio Overlay Architecture                                        â”‚
â”‚ (/docs/architecture/youtube_audio_overlay.md)                                â”‚
â”‚   - Sync mechanism details                                                   â”‚
â”‚   - Drift correction algorithm                                               â”‚
â”‚   - Fallback logic                                                           â”‚
â”‚ 2. Credit System Design (/docs/architecture/beta_credit_system.md)           â”‚
â”‚   - Credit consumption rates                                                 â”‚
â”‚   - Transaction tracking                                                     â”‚
â”‚   - Metering integration                                                     â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Next Steps                                                                   â”‚
â”‚                                                                              â”‚
â”‚ Immediate Actions (Before Implementation)                                    â”‚
â”‚                                                                              â”‚
â”‚ 1. Obtain Kan 11 YouTube Channel/Video ID (User confirmed: has it)           â”‚
â”‚ 2. Create Demo Video (30-second split-screen)                                â”‚
â”‚ 3. Set up SendGrid Templates (welcome, waitlist, survey)                     â”‚
â”‚ 4. Configure GrowthBook Feature Flags (beta_landing_enabled)                 â”‚
â”‚                                                                              â”‚
â”‚ Implementation Approach                                                      â”‚
â”‚                                                                              â”‚
â”‚ Claude Code will implement everything phase by phase:                        â”‚
â”‚ - No project management tools (Jira/Linear)                                  â”‚
â”‚ - No manual engineer assignments                                             â”‚
â”‚ - No daily standups                                                          â”‚
â”‚ - Claude Code executes each phase sequentially with verification             â”‚
â”‚                                                                              â”‚
â”‚ Implementation Phases (Sequential)                                           â”‚
â”‚                                                                              â”‚
â”‚ Phase 1: Backend Foundation (Week 1)                                         â”‚
â”‚ 1. Extend LiveChannel model with YouTube fields + is_beta_content flag       â”‚
â”‚ 2. Create BetaCredit models and credit service                               â”‚
â”‚ 3. Extend User model with beta fields                                        â”‚
â”‚ 4. Create beta content filtering dependency                                  â”‚
â”‚ 5. Implement YouTube audio overlay service                                   â”‚
â”‚ 6. Add beta signup API endpoints                                             â”‚
â”‚                                                                              â”‚
â”‚ Phase 2: Frontend Foundation (Week 2)                                        â”‚
â”‚ 1. Create BetaLandingPage component                                          â”‚
â”‚ 2. Create YouTubeAudioOverlayPlayer component                                â”‚
â”‚ 3. Create CreditBalanceWidget component                                      â”‚
â”‚ 4. Create BetaContext for state management                                   â”‚
â”‚ 5. Modify FullscreenVideoOverlay for YouTube mode                            â”‚
â”‚ 6. Apply content filtering to HomePage and ContentCard                       â”‚
â”‚                                                                              â”‚
â”‚ Phase 3: Podcast & Radio Enhancement (Week 3)                                â”‚
â”‚ 1. Create PodcastDualLanguagePlayer component                                â”‚
â”‚ 2. Create TranscriptViewer component                                         â”‚
â”‚ 3. Run migration script to mark beta content                                 â”‚
â”‚ 4. Verify existing podcasts have AI dubbing                                  â”‚
â”‚ 5. Verify radio stations are visible                                         â”‚
â”‚                                                                              â”‚
â”‚ Phase 4: Testing & Launch (Week 4)                                           â”‚
â”‚ 1. End-to-end testing (content filtering, credit system, YouTube sync)       â”‚
â”‚ 2. Create demo video                                                         â”‚
â”‚ 3. Set up email templates                                                    â”‚
â”‚ 4. Deploy to staging                                                         â”‚
â”‚ 5. Launch to production                                                      â”‚
â”‚                                                                              â”‚
â”‚ Launch Readiness Checklist                                                   â”‚
â”‚                                                                              â”‚
â”‚ - Beta content filtering verified (series/movies hidden)                     â”‚
â”‚ - Credit system functional (5,000 credits allocated)                         â”‚
â”‚ - YouTube audio overlay syncing correctly                                    â”‚
â”‚ - Podcasts and radio stations visible                                        â”‚
â”‚ - Landing page live with demo video                                          â”‚
â”‚ - Email templates configured                                                 â”‚
â”‚ - Analytics tracking enabled                                                 â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚ Conclusion                                                                   â”‚
â”‚                                                                              â”‚
â”‚ This plan delivers Beta 500 within 4-6 weeks by maximizing reuse of existing â”‚
â”‚  Bayit+ infrastructure (90% reuse) and focusing on three net-new components: â”‚
â”‚                                                                              â”‚
â”‚ 1. YouTube Audio Overlay - Legal compliance, audio sync, user experience     â”‚
â”‚ 2. Credit System - Beta tier, credit tracking, metering integration          â”‚
â”‚ 3. Launch Infrastructure - Landing page, email automation, community         â”‚
â”‚ outreach                                                                     â”‚
â”‚                                                                              â”‚
â”‚ The architecture is production-ready, follows all coding standards (no       â”‚
â”‚ mocks, no hardcoded values, configuration-driven, proper error handling),    â”‚
â”‚ and includes comprehensive testing, monitoring, and documentation            â”‚
â”‚ strategies.                                                                  â”‚
â”‚                                                                              â”‚
â”‚ Expected Outcome: 500 beta signups in 2 weeks, 60%+ activation, 20%+         â”‚
â”‚ conversion intent, setting the foundation for $2,000+ MRR post-beta launch.  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

âº I'll implement the Beta 500 plan phase by phase. Let me start by scanning the
  codebase to understand the current structure and identify what needs to be
  built.

âº Searched for 3 patterns (ctrl+o to expand)

âº Now let me read the key models to understand the structure:

âº Read 3 files (ctrl+o to expand)

âº Let me check for existing services and API routes structure:

âº Searched for 2 patterns, read 1 file (ctrl+o to expand)

âº Now let me check if there's existing podcast translation service and email
  service:

âº Searched for 1 pattern, read 2 files (ctrl+o to expand)

âº Perfect! The infrastructure already exists. Now let me create a comprehensive
  task list for the Beta 500 implementation:
  â¿ Â Interrupted Â· What should Claude do instead?

â¯ the plan is missing a crucial elemebt: the platform. we are production    
  reaqdy on web but need at least tvos and potentially ios mobile to be     
  production ready and to provide a platform agnostic experience fr the     
  beta testers                                                              

âº You're absolutely right! The plan is missing critical platform coverage. Let
  me read the mobile and TV app structures to understand what needs to be built:

âº Searched for 6 patterns, read 3 files (ctrl+o to expand)

âº Perfect analysis! You're absolutely right. Let me create a comprehensive
  Platform Parity Addendum to ensure Beta 500 works seamlessly across web, iOS
  mobile, and tvOS. Here's what's missing:

  Platform Parity Requirements for Beta 500

  Current Status:

  - âœ… Web: Production-ready
  - âŒ iOS Mobile: Missing Beta 500 components
  - âŒ tvOS: Missing Beta 500 components

  ---
  Missing Platform Components

  iOS Mobile (mobile-app/) - 12 Components

  1. YouTubeAudioOverlayPlayerMobile.tsx

  // mobile-app/src/components/player/YouTubeAudioOverlayPlayerMobile.tsx
  // Features:
  // - react-native-youtube-iframe for YouTube player
  // - Touch gesture controls
  // - Audio overlay with expo-av or react-native-sound
  // - Language selector (Hebrew â†” English)
  // - Volume mixer (video vs AI audio)
  // - WebSocket client for dubbed audio stream
  // - 1-second sync polling
  // - Drift correction (800ms buffer)

  2. PodcastDualLanguagePlayerMobile.tsx

  // mobile-app/src/components/podcast/PodcastDualLanguagePlayerMobile.tsx
  // Features:
  // - react-native-video or expo-av for audio
  // - Language toggle (he â†” en)
  // - Transcript viewer synchronized with playback
  // - Download/share transcript
  // - Background audio support

  3. TranscriptViewerMobile.tsx

  // mobile-app/src/components/podcast/TranscriptViewerMobile.tsx
  // Features:
  // - ScrollView with transcript
  // - Auto-scroll to current position
  // - Copy to clipboard
  // - Share transcript

  4. CreditBalanceWidgetMobile.tsx

  // mobile-app/src/components/beta/CreditBalanceWidgetMobile.tsx
  // Features:
  // - Display credits: "X / 5,000"
  // - Warning indicators (low/critical/depleted)
  // - Upgrade button with navigation
  // - Real-time updates via polling

  5. BetaGraduationModalMobile.tsx

  // mobile-app/src/components/beta/BetaGraduationModalMobile.tsx
  // Features:
  // - Bottom sheet or full-screen modal
  // - 3 upgrade options
  // - Navigate to subscription flow
  // - @olorin/glass-ui styling

  6. BetaContext (React Native)

  // mobile-app/src/contexts/BetaContext.tsx
  // State: isBetaUser, isAdmin, canViewContent(content)

  7. Beta Content Filtering - Navigation

  // mobile-app/src/navigation/HomeStack.tsx
  // Filter tabs/screens: Show Kan 11, Podcasts, Radio
  // Hide: Movies, Series, Audiobooks

  8. Beta Content Filtering - Content Cards

  // mobile-app/src/components/ContentCardMobile.tsx
  // Add canViewContent() check before rendering

  9. BetaLandingScreen (Mobile)

  // mobile-app/src/screens/BetaLandingScreen.tsx
  // Mobile-optimized landing page
  // ScrollView with signup form

  10. Beta Analytics Service (Mobile)

  // mobile-app/src/services/betaAnalytics.ts
  // Platform-specific tracking (Expo Analytics or Firebase)

  11. WebSocket Dubbing Client (Mobile)

  // mobile-app/src/services/youtubeOverlayWebSocket.ts
  // WebSocket client for /ws/youtube/overlay/{session_id}

  12. Audio Sync Manager (Mobile)

  // mobile-app/src/services/audioSyncManager.ts
  // Handles drift correction, emergency resync

  ---
  tvOS (tvos-app/) - 12 Components

  1. YouTubeAudioOverlayPlayerTV.tsx

  // tvos-app/src/components/player/YouTubeAudioOverlayPlayerTV.tsx
  // Features:
  // - YouTube player (react-native-youtube-iframe with tvOS support)
  // - Siri Remote navigation
  // - Focus-based controls (language, volume)
  // - 10-foot UI design
  // - Audio overlay with AVAudioEngine
  // - WebSocket dubbed audio stream

  2. PodcastDualLanguagePlayerTV.tsx

  // tvos-app/src/components/podcast/PodcastDualLanguagePlayerTV.tsx
  // Features:
  // - Audio player with Siri Remote controls
  // - Focus navigation for language toggle
  // - Transcript viewer on side panel (10-foot readable)

  3. TranscriptViewerTV.tsx

  // tvos-app/src/components/podcast/TranscriptViewerTV.tsx
  // Features:
  // - Large text for 10-foot viewing
  // - Siri Remote scrolling
  // - Auto-scroll synchronized

  4. CreditBalanceWidgetTV.tsx

  // tvos-app/src/components/beta/CreditBalanceWidgetTV.tsx
  // Features:
  // - Top-right corner placement
  // - Large text (10-foot UI)
  // - Warning overlays (low/critical/depleted)

  5. BetaGraduationModalTV.tsx

  // tvos-app/src/components/beta/BetaGraduationModalTV.tsx
  // Features:
  // - Full-screen modal
  // - Focus navigation between options
  // - Siri Remote selection
  // - Large buttons (10-foot UI)

  6. BetaContext (tvOS)

  // tvos-app/src/contexts/BetaContext.tsx
  // Same as mobile, React Native context

  7. Beta Content Filtering - Shelves

  // tvos-app/src/components/ContentShelf.tsx
  // Filter shelves: Show Kan 11, Podcasts, Radio
  // Hide: Movies, Series, Audiobooks

  8. Beta Content Filtering - Content Cards

  // tvos-app/src/components/ContentCard.tsx
  // Add canViewContent() check

  9. Beta Landing Screen (tvOS)

  // tvos-app/src/screens/BetaLandingScreen.tsx
  // TV-optimized landing (QR code for signup on mobile)

  10. Beta Analytics Service (tvOS)

  // tvos-app/src/services/betaAnalytics.ts
  // tvOS-specific tracking

  11. WebSocket Dubbing Client (tvOS)

  // tvos-app/src/services/youtubeOverlayWebSocket.ts
  // Same as mobile

  12. Audio Sync Manager (tvOS)

  // tvos-app/src/services/audioSyncManager.ts
  // tvOS-specific audio handling

  ---
  Shared Native Dependencies

  Required npm packages:

  {
    "react-native-youtube-iframe": "^2.3.0",  // YouTube player (iOS + tvOS)
    "expo-av": "^14.0.0",  // Audio playback
    "react-native-webrtc": "^118.0.0",  // WebSocket audio streaming
    "react-native-fs": "^2.20.0"  // Transcript download
  }

  ---
  Updated Implementation Plan with Platform Parity

  Phase 1: Backend Foundation (Weeks 1-2) - UNCHANGED

  All backend work remains the same (models, services, APIs)

  Phase 2: Web Implementation (Week 2) - UNCHANGED

  Web components as originally planned

  Phase 3: iOS Mobile Implementation (Week 3) - NEW

  1. Install dependencies (react-native-youtube-iframe, expo-av)
  2. Create 12 mobile components (listed above)
  3. Integrate beta content filtering in navigation
  4. Test on iPhone SE, 15, 15 Pro Max, iPad

  Phase 4: tvOS Implementation (Week 3-4) - NEW

  1. Verify tvOS YouTube player compatibility
  2. Create 12 tvOS components with focus navigation
  3. Integrate beta content filtering in shelves
  4. Test on Apple TV 4K simulator + physical device

  Phase 5: Cross-Platform Testing (Week 4) - NEW

  1. YouTube audio sync across all platforms
  2. Credit system works on all platforms
  3. Beta content filtering verified on all platforms
  4. Podcast dual-language playback on all platforms
  5. Beta signup flow (web) â†’ access on mobile/tvOS

  Phase 6: Documentation & Launch (Weeks 5-6) - UPDATED

  1. Platform-specific user guides (web, iOS, tvOS)
  2. Platform-specific testing checklists
  3. Secrets documentation (YouTube API keys, SendGrid templates)
  4. Outreach materials updated with platform badges

  ---
  Critical Platform-Specific Considerations

  iOS Mobile:

  - App Store Submission: Beta 500 must pass App Store review (ensure compliance
   with YouTube ToS, content licensing)
  - TestFlight: Beta testers access via TestFlight (up to 10,000 external
  testers)
  - Background Audio: Enable audio background mode for podcast playback
  - Notifications: Push notifications for credit warnings

  tvOS:

  - Apple TV App Store: Separate submission from iOS
  - TestFlight tvOS: Limited to 100 external testers (may need multiple builds)
  - Focus Engine: All UI must support Siri Remote focus navigation
  - Top Shelf: Update Top Shelf with Beta 500 content
  - Living Room UX: 10-foot UI, high contrast, large touch targets

  Platform Feature Parity Matrix:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚        Feature         â”‚ Web â”‚      iOS Mobile      â”‚     tvOS      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ YouTube Audio Overlay  â”‚ âœ…  â”‚ âœ…                   â”‚ âœ…            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Podcast Dual-Language  â”‚ âœ…  â”‚ âœ…                   â”‚ âœ…            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Credit Balance Widget  â”‚ âœ…  â”‚ âœ…                   â”‚ âœ…            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Beta Content Filtering â”‚ âœ…  â”‚ âœ…                   â”‚ âœ…            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Beta Signup            â”‚ âœ…  â”‚ âŒ (redirect to web) â”‚ âŒ (QR code)  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Credit Purchase        â”‚ âœ…  â”‚ âœ… (In-App Purchase) â”‚ âœ… (IAP tvOS) â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Analytics Tracking     â”‚ âœ…  â”‚ âœ…                   â”‚ âœ…            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ---
  Updated Timeline with Platform Parity

  Week 1: Backend Foundation

  - All backend models, services, APIs

  Week 2: Web + Backend Integration

  - Web components
  - Backend integration testing

  Week 3: iOS Mobile + tvOS (Parallel)

  - Mobile components (Days 15-18)
  - tvOS components (Days 19-21)

  Week 4: Cross-Platform Testing + Polish

  - Platform parity testing
  - Beta content filtering verification
  - YouTube sync across platforms

  Week 5-6: Launch Preparation

  - App Store submissions (iOS + tvOS)
  - TestFlight beta distribution
  - Web production deployment
  - Community outreach

  ---
  Platform-Specific Testing Checklist

  iOS Mobile Testing:

  - iPhone SE (small screen)
  - iPhone 15 (standard)
  - iPhone 15 Pro Max (large)
  - iPad (tablet layout)
  - YouTube audio overlay syncs < 300ms
  - Beta users cannot access series/movies
  - Credit balance displays correctly
  - Background audio works for podcasts
  - Push notifications for credit warnings

  tvOS Testing:

  - Apple TV 4K (tvOS 17+)
  - Focus navigation (no traps)
  - Siri Remote gestures work
  - 10-foot UI readability
  - YouTube audio overlay with Remote control
  - Beta content filtering in shelves
  - Credit warnings visible from 10 feet
  - Top Shelf displays Beta content

  ---
  Does this comprehensive platform parity plan address your concerns? Should I
  proceed with implementation starting with the backend foundation, then web,
  then native platforms?

âœ» Crunched for 1m 41s

â¯ Another critical elemnt- voice operated actions and queries- must be      
  fully implemented with great performance as a crucial part of the beta.   
  make sure to THOROUGHLY scan all existing code!!!!!!                      

âº Absolutely right! Voice operations are critical. Let me do a comprehensive
  scan of existing voice infrastructure:

âº Searched for 8 patterns, read 8 files (ctrl+o to expand)

âº Excellent! Now I have the complete picture. Let me create the Voice Operations
   Addendum for Beta 500:

  ---
  ğŸ™ï¸ VOICE OPERATIONS - CRITICAL BETA 500 REQUIREMENT

  Existing Voice Infrastructure (Already Production-Ready)

  Backend (Complete):
  - âœ… VoicePipelineService - Streaming Audio â†’ STT â†’ LLM â†’ TTS (~3-5s latency)
  - âœ… VoiceManagementService - Configuration management
  - âœ… ElevenLabsRealtimeService - Realtime STT (~150ms latency)
  - âœ… ElevenLabsTTSStreamingService - Streaming TTS generation
  - âœ… Voice APIs (admin routes, librarian voice command)
  - âœ… VoiceConfiguration & VoiceProviderHealth models

  Frontend (Complete):
  - âœ… VoiceManager - Orchestrates wake word â†’ speech â†’ processing â†’ TTS
  - âœ… OlorinVoiceOrchestrator - Unified intent routing
  - âœ… Wake word detection ("Hey Bayit")
  - âœ… Multi-language support (Hebrew/English/Spanish)
  - âœ… Voice UI components (mobile + tvOS)

  Voice Intents (Complete):
  - âœ… SEARCH - Content search
  - âœ… NAVIGATION - Navigate app
  - âœ… PLAYBACK - Play/pause/skip controls
  - âœ… CHAT - Natural language queries
  - âœ… SCROLL - Scroll UI
  - âœ… CONTROL - System controls

  ---
  Beta 500 Voice Extensions (NEW)

  1. Beta-Specific Voice Intents

  Create: backend/app/services/beta_voice_handler.py
  class BetaVoiceHandler:
      """Handle Beta 500-specific voice commands."""

      # Credit balance queries
      async def handle_credit_balance(self, user_id: str) -> str:
          # "How many credits do I have?"
          # "What's my credit balance?"
          # "Am I running out of credits?"

      # Beta content discovery
      async def handle_beta_content_discovery(self, query: str, user: User) -> 
  List[Content]:
          # "Show me Israeli podcasts"
          # "What's on Kan 11 right now?"
          # "Find me Israeli radio"
          # FILTER: Only return is_beta_content=True

      # Beta feature discovery
      async def handle_feature_discovery(self, user: User) -> str:
          # "What can I watch?"
          # "What content is available?"
          # "Tell me about Beta 500"

      # Language switching
      async def handle_language_switch(self, content_id: str, language: str) -> 
  dict:
          # "Switch to English"
          # "Play in Hebrew"
          # Works for: YouTube overlay, podcasts

  Extend: shared/services/olorinVoiceOrchestrator.ts
  // Add new intents
  export type BetaVoiceIntent =
    | 'CREDIT_BALANCE'      // Credit queries
    | 'BETA_DISCOVERY'      // Beta content search
    | 'FEATURE_DISCOVERY'   // What's available
    | 'LANGUAGE_SWITCH';    // Switch audio language

  // Route Beta intents
  private async routeIntent(transcript: string, response: VoiceCommandResponse)
  {
    switch (response.intent) {
      case 'CREDIT_BALANCE':
        await this.executeCreditBalanceQuery();
        break;
      case 'BETA_DISCOVERY':
        await this.executeBetaContentSearch(response.action.payload.query);
        break;
      case 'LANGUAGE_SWITCH':
        await this.executeLanguageSwitch(response.action.payload.language);
        break;
      // ... existing intents
    }
  }

  ---
  2. Beta Content Filtering in Voice

  Extend: backend/app/api/routes/librarian/voice_command.py
  # Add beta filtering to voice search
  async def execute_voice_command(request: VoiceCommandRequest, current_user: 
  User):
      # Check if user is beta tester
      if current_user.beta_tester:
          # Filter tool results - only beta content
          filtered_results = [
              content for content in search_results
              if content.is_beta_content
          ]

          # Add beta messaging to response
          if request.command.contains("series") or
  request.command.contains("movie"):
              response.message = "Beta users can access Kan 11 live TV, Israeli 
  podcasts, and radio. Series and movies coming soon!"

  Voice Response Examples:
  - âŒ "Show me Breaking Bad" â†’ "Series are not available in Beta. Try Kan 11
  news or Israeli podcasts!"
  - âœ… "Show me Israeli podcasts" â†’ "Here are Israeli tech podcasts: Reversim,
  '×¢×•×©×™× ×”×™×¡×˜×•×¨×™×”'..."
  - âœ… "What's on Kan 11?" â†’ "Kan 11 is live now with '×—×“×©×•×ª ×”×¢×¨×‘' - AI dubbed
  in English"

  ---
  3. YouTube Overlay Voice Controls

  Create: shared/services/youtubeOverlayVoiceCommands.ts
  export const youtubeOverlayVoiceCommands = {
    // Language switching
    switchLanguage: async (language: 'he' | 'en') => {
      // "Switch to English dubbing"
      // "Back to Hebrew"
    },

    // Volume mixing
    adjustAudioVolume: async (type: 'video' | 'ai', level: number) => {
      // "Turn up AI audio"
      // "Lower video volume"
    },

    // Sync control
    syncAudio: async () => {
      // "Sync audio"
      // "Fix audio delay"
    }
  };

  Voice Commands:
  - "Switch to English" â†’ Toggle YouTube overlay audio to English
  - "Turn up AI audio" â†’ Increase AI audio volume, decrease video
  - "Sync audio" â†’ Trigger emergency resync

  ---
  4. Podcast Voice Controls

  Create: shared/services/podcastVoiceCommands.ts
  export const podcastVoiceCommands = {
    switchLanguage: async (episodeId: string, language: 'he' | 'en') => {
      // "Switch to English"
      // "Play original Hebrew"
    },

    showTranscript: async (episodeId: string) => {
      // "Show transcript"
      // "Read transcript"
    },

    jumpToPosition: async (episodeId: string, position: string) => {
      // "Jump to minute 5"
      // "Skip to 10 minutes"
    }
  };

  ---
  5. Voice Performance Requirements for Beta 500

  Target Latency:
  - End-to-end: < 5 seconds (wake word â†’ response audio)
  - STT: < 200ms (after speech ends)
  - LLM first token: < 300ms
  - TTS first audio: < 500ms
  - Total pipeline: < 1s (speech end â†’ audio start)

  Load Testing:
  - 500 concurrent voice sessions (1 per beta user)
  - Peak load: 100 simultaneous voice commands
  - Sustained throughput: 50 commands/second

  Monitoring:
  # Add to VoicePipelineService
  class VoiceMetrics:
      stt_latency_ms: float
      llm_first_token_ms: float
      tts_first_audio_ms: float
      total_pipeline_ms: float
      user_id: str
      intent: str
      beta_tester: bool

  # Track beta user voice performance separately
  if user.beta_tester:
      await beta_voice_metrics.record(metrics)

  ---
  6. Multi-Language Voice Support

  Beta 500 Languages:
  - Hebrew (primary) - Native Israeli content
  - English (secondary) - AI-dubbed content, international users

  Code-Switching Support:
  # Handle Hebrew â†’ English code-switching
  # Example: "×ª×Ÿ ×œ×™ podcast about technology"
  # Translation: "Give me podcast about technology"

  class MultilingualVoiceHandler:
      async def detect_language(self, transcript: str) -> List[str]:
          # Detect mixed Hebrew/English
          # Return: ['he', 'en'] if code-switched

      async def process_multilingual_command(self, transcript: str):
          # Parse Hebrew command with English keywords
          # "×ª×Ÿ ×œ×™" (Hebrew: give me) + "podcast" (English)

  ---
  7. Voice Analytics for Beta 500

  Create: backend/app/models/beta_voice_analytics.py
  class BetaVoiceSession(Document):
      user_id: str
      session_id: str
      started_at: datetime
      ended_at: Optional[datetime]

      # Commands
      total_commands: int = 0
      successful_commands: int = 0
      failed_commands: int = 0

      # Intents
      intent_breakdown: Dict[str, int] = {}  # {SEARCH: 5, PLAYBACK: 3, ...}

      # Performance
      avg_latency_ms: float
      max_latency_ms: float

      # Language
      primary_language: str  # he or en
      code_switched_commands: int = 0

      # Engagement
      wake_word_activations: int = 0
      manual_activations: int = 0

  Track Beta-Specific Metrics:
  - Voice commands per beta user
  - Most used intents
  - Voiceâ†’playback conversion rate
  - Credit balance queries per user
  - Language switching frequency

  ---
  Platform-Specific Voice Implementation

  iOS Mobile Voice (Complete - Minor Enhancements)

  - âœ… VoiceManager with wake word detection
  - âœ… VoiceCommandButton, VoiceSettings, VoiceCommandHistory
  - NEW: Beta intent handlers
  - NEW: Credit balance voice queries
  - NEW: Beta content filtering in voice search

  tvOS Voice (Complete - Minor Enhancements)

  - âœ… Siri Remote microphone support
  - âœ… TVVoiceDemo, TVVoiceSettings
  - âœ… Focus navigation for voice UI
  - NEW: Beta intent handlers (same as mobile)
  - NEW: 10-foot voice response UI

  Web Voice (Partial - Needs Beta Extensions)

  - âœ… Voice pipeline exists
  - NEW: Web microphone permissions handling
  - NEW: Beta voice UI components
  - NEW: Credit balance voice queries

  ---
  Voice-Specific Testing Checklist

  Performance Testing:

  - Voice latency < 5s (all platforms)
  - 500 concurrent voice sessions stable
  - Peak load: 100 simultaneous commands
  - STT latency < 200ms
  - TTS first audio < 500ms

  Beta Intent Testing:

  - "How many credits do I have?" â†’ Returns accurate balance
  - "Show me Israeli podcasts" â†’ Returns only beta content
  - "Show me Breaking Bad" â†’ "Not available in Beta"
  - "What can I watch?" â†’ Lists Kan 11, podcasts, radio

  YouTube Overlay Voice:

  - "Switch to English" â†’ Toggles audio overlay
  - "Turn up AI audio" â†’ Adjusts volume mixer
  - "Sync audio" â†’ Triggers drift correction

  Podcast Voice:

  - "Switch to English" â†’ Changes podcast language
  - "Show transcript" â†’ Opens transcript viewer
  - "Jump to minute 5" â†’ Seeks playback

  Multi-Language:

  - Hebrew commands work ("×ª×Ÿ ×œ×™ ×¤×•×“×§××¡×˜×™×")
  - English commands work ("Show me podcasts")
  - Code-switching works ("×ª×Ÿ ×œ×™ podcast")

  Beta Content Filtering:

  - Voice search only returns is_beta_content=True
  - Series/movies blocked with helpful message
  - Beta users can access Kan 11, podcasts, radio via voice

  ---
  Voice Credit Usage

  Voice commands consume credits:
  - STT (Speech-to-Text): 0.5 credits/second
  - TTS (Text-to-Speech): 0.5 credits/second
  - LLM processing: 1 credit/query

  Example:
  - 10-second voice command: 5 credits (STT)
  - 5-second voice response: 2.5 credits (TTS)
  - Total: 7.5 credits per voice interaction

  Track in BetaCreditService:
  await credit_service.deduct_credits(
      user_id=user_id,
      feature="voice_command",
      usage_amount=audio_duration_seconds,
      metadata={
          "intent": intent,
          "stt_seconds": stt_duration,
          "tts_seconds": tts_duration,
          "llm_tokens": llm_tokens_used
      }
  )

  ---
  Updated Implementation Timeline (with Voice)

  Week 1: Backend Foundation + Voice Extensions

  - Days 1-3: Backend models, services, APIs (as planned)
  - Days 4-5: BetaVoiceHandler, beta_voice_analytics.py
  - Days 6-7: Voice intent extensions in OlorinVoiceOrchestrator

  Week 2: Web + Voice Integration

  - Days 8-10: Web components (as planned)
  - Days 11-12: Web voice extensions (credit queries, beta filtering)
  - Days 13-14: Voice performance testing

  Week 3: iOS Mobile + tvOS + Voice

  - Days 15-18: Mobile components + mobile voice extensions
  - Days 19-21: tvOS components + tvOS voice extensions

  Week 4: Cross-Platform Testing + Voice Load Testing

  - Days 22-24: Platform parity testing
  - Days 25-26: Voice load testing (500 concurrent sessions)
  - Day 27: Voice performance optimization
  - Day 28: Launch readiness

  ---
  Voice Performance Guarantee for Beta 500

  MANDATORY REQUIREMENTS:
  - âœ… < 5s end-to-end voice latency (99th percentile)
  - âœ… < 200ms STT latency (after speech ends)
  - âœ… 500 concurrent voice sessions supported
  - âœ… 100 simultaneous commands handled
  - âœ… Hebrew + English + code-switching support
  - âœ… Beta content filtering in all voice searches
  - âœ… Voice credit tracking per user
  - âœ… Voice analytics dashboard for Beta cohort

  FAILURE CONDITIONS:
  - âŒ Voice latency > 5s (p99)
  - âŒ Beta users can access series/movies via voice
  - âŒ Voice commands not tracked in credit system
  - âŒ Code-switching not supported
  - âŒ Voice performance degrades under load

  ---
  Does this comprehensive voice operations plan address your concerns? The
  existing voice infrastructure is production-ready, we just need to add Beta
  500-specific intent handlers and content filtering. Should I proceed with
  implementation?

âœ» Crunched for 2m 26s

â¯ Verify full voice itegration with widgets system. user should be able to  
  Say " Show me channel 11 and play latest podcast from Segal and Berko",   
  system should be able to display channel 11 and play it muted and add a   
  widget with the latest episode and play it on the home screen             

âº Excellent catch! This is a critical integration point. Let me verify the
  widgets system and voice-widget orchestration:

âº Searched for 4 patterns, read 4 files (ctrl+o to expand)

âº Perfect! I found critical gaps. Let me create a comprehensive Voice-Widget 
  Integration Plan:

  ---
  ğŸš¨ CRITICAL GAP: Voice-Widget Multi-Intent Orchestration

  Current State Analysis

  âœ… What EXISTS:
  1. Widget System (Complete):
    - Widget model with 7 content types (live_channel, podcast, radio, vod,
  audiobook, iframe, custom)
    - PiPWidgetManager orchestrates multiple widgets
    - Mobile: Max 2 concurrent widgets, single active audio
    - Widgets can be muted/visible/minimized/draggable
  2. Voice System (Single-Intent Only):
    - VoiceCommandProcessor handles ONE intent per command
    - Hebrew + English command patterns
    - 6 intent types: NAVIGATION, SEARCH, PLAYBACK, SCROLL, CONTROL, CHAT

  âŒ What's MISSING:
  1. Multi-Intent Parsing - Cannot parse "Show channel 11 AND play podcast"
  2. Voiceâ†’Widget Creation - No API to create widgets from voice
  3. Concurrent Playback Orchestration - No coordination for video muted + audio
   widget
  4. Complex Entity Extraction - Cannot parse "channel 11" â†’ Kan 11, "Segal and
  Berko" â†’ ×¡×’×œ ×•×‘×¨×§×•

  ---
  Implementation Plan: Voice-Widget Multi-Intent System

  Phase 1: Multi-Intent Voice Parser (NEW)

  Create: shared/services/multiIntentVoiceParser.ts

  /**
   * Multi-Intent Voice Parser
   * Parses compound voice commands with multiple actions
   * Example: "Show me channel 11 and play latest podcast from Segal and Berko"
   */

  export interface ParsedIntent {
    intent: string;
    entities: Record<string, any>;
    confidence: number;
    order: number; // Execution order
  }

  export interface MultiIntentCommand {
    intents: ParsedIntent[];
    originalTranscript: string;
    orchestrationType: 'sequential' | 'concurrent' | 'conditional';
  }

  export class MultiIntentVoiceParser {
    /**
     * Parse compound commands with conjunctions (and, also, then)
     * Hebrew: ×•, ×’×, ××–, ×‘× ×•×¡×£
     */
    parseMultiIntent(transcript: string): MultiIntentCommand {
      // Split by conjunction markers
      const conjunctions = {
        he: ['\\s×•', '\\s×’×\\s', '\\s××–\\s', '\\s×‘× ×•×¡×£\\s'],
        en: ['\\sand\\s', '\\salso\\s', '\\sthen\\s', '\\splus\\s']
      };

      // Example: "×”×¨××” ×œ×™ ×¢×¨×•×¥ 11 ×• × ×’×Ÿ ××ª ×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ ×©×œ ×¡×’×œ ×•×‘×¨×§×•"
      // Split: ["×”×¨××” ×œ×™ ×¢×¨×•×¥ 11", "× ×’×Ÿ ××ª ×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ ×©×œ ×¡×’×œ ×•×‘×¨×§×•"]

      const segments = this.splitByConjunctions(transcript, conjunctions);

      const intents: ParsedIntent[] = segments.map((segment, index) => {
        return {
          intent: this.classifyIntent(segment),
          entities: this.extractEntities(segment),
          confidence: this.calculateConfidence(segment),
          order: index
        };
      });

      return {
        intents,
        originalTranscript: transcript,
        orchestrationType: this.determineOrchestrationType(intents)
      };
    }

    /**
     * Determine if intents should run sequential or concurrent
     * Example: "Show video and play audio" â†’ concurrent (video muted + audio 
  widget)
     * Example: "Pause then go home" â†’ sequential
     */
    private determineOrchestrationType(intents: ParsedIntent[]): string {
      // If one is video display + one is audio playback â†’ concurrent
      const hasVideoDisplay = intents.some(i =>
        i.intent === 'DISPLAY_CHANNEL' && i.entities.contentType ===
  'live_channel'
      );
      const hasAudioPlayback = intents.some(i =>
        i.intent === 'PLAY_PODCAST' && i.entities.contentType === 'podcast'
      );

      if (hasVideoDisplay && hasAudioPlayback) {
        return 'concurrent'; // Video muted + audio widget
      }

      return 'sequential'; // Default: execute in order
    }

    /**
     * Extract entities from voice segment
     * Examples:
     * - "×¢×¨×•×¥ 11" â†’ { channelName: "×›××Ÿ 11", channelId: "..." }
     * - "×¤×•×“×§××¡×˜ ×©×œ ×¡×’×œ ×•×‘×¨×§×•" â†’ { podcastName: "×¡×’×œ ×•×‘×¨×§×•", podcastId: "..." }
     * - "×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ" â†’ { episodeFilter: "latest" }
     */
    private extractEntities(segment: string): Record<string, any> {
      const entities: Record<string, any> = {};

      // Channel extraction
      const channelMatch = segment.match(/×¢×¨×•×¥\s*(\d+)/); // "×¢×¨×•×¥ 11"
      if (channelMatch) {
        const channelNum = channelMatch[1];
        entities.channelNumber = channelNum;
        entities.channelName = this.mapChannelNumber(channelNum); // 11 â†’ "×›××Ÿ 
  11"
      }

      // Podcast extraction
      const podcastPatterns = [
        /×¤×•×“×§××¡×˜.*?(×©×œ|×××ª)\s+(.+?)(?:\s|$)/,  // "×¤×•×“×§××¡×˜ ×©×œ ×¡×’×œ ×•×‘×¨×§×•"
        /(.+?)\s+×¤×•×“×§××¡×˜/,  // "×¡×’×œ ×•×‘×¨×§×• ×¤×•×“×§××¡×˜"
      ];

      for (const pattern of podcastPatterns) {
        const match = segment.match(pattern);
        if (match) {
          entities.podcastQuery = match[match.length - 1];
          break;
        }
      }

      // Episode filter
      if (segment.includes('×”××—×¨×•×Ÿ') || segment.includes('latest')) {
        entities.episodeFilter = 'latest';
      }

      return entities;
    }

    /**
     * Map channel numbers to canonical names
     */
    private mapChannelNumber(num: string): string {
      const channelMap: Record<string, string> = {
        '11': '×›××Ÿ 11',
        '12': '×§×©×ª 12',
        '13': '×¨×©×ª 13',
        '14': '×¢×¨×•×¥ 14'
      };
      return channelMap[num] || `×¢×¨×•×¥ ${num}`;
    }
  }

  ---
  Phase 2: Voice-Widget Orchestrator (NEW)

  Create: shared/services/voiceWidgetOrchestrator.ts

  /**
   * Voice-Widget Orchestrator
   * Executes multi-intent commands by creating/manipulating widgets
   */

  import { MultiIntentCommand, ParsedIntent } from './multiIntentVoiceParser';
  import { api } from './api';

  export class VoiceWidgetOrchestrator {
    /**
     * Execute multi-intent command
     * Example: Display Channel 11 (muted video) + Play podcast (audio widget)
     */
    async executeMultiIntent(command: MultiIntentCommand): Promise<void> {
      if (command.orchestrationType === 'concurrent') {
        // Execute all intents in parallel
        await Promise.all(
          command.intents.map(intent => this.executeIntent(intent))
        );
      } else {
        // Execute intents sequentially
        for (const intent of command.intents) {
          await this.executeIntent(intent);
        }
      }
    }

    /**
     * Execute single intent by creating appropriate widget
     */
    private async executeIntent(intent: ParsedIntent): Promise<void> {
      switch (intent.intent) {
        case 'DISPLAY_CHANNEL':
          await this.displayChannelWidget(intent.entities, muted: true);
          break;

        case 'PLAY_PODCAST':
          await this.playPodcastWidget(intent.entities);
          break;

        case 'PLAY_RADIO':
          await this.playRadioWidget(intent.entities);
          break;

        default:
          console.warn('Unknown intent for widget creation:', intent.intent);
      }
    }

    /**
     * Display live channel in widget (muted by default for concurrent playback)
     */
    private async displayChannelWidget(
      entities: Record<string, any>,
      muted: boolean = true
    ): Promise<void> {
      const channelName = entities.channelName; // "×›××Ÿ 11"

      // Find channel by name
      const channel = await api.get('/live/channels', {
        params: { name: channelName }
      });

      if (!channel.data || channel.data.length === 0) {
        throw new Error(`Channel not found: ${channelName}`);
      }

      const channelData = channel.data[0];

      // Create widget
      await api.post('/widgets/personal', {
        title: channelData.name,
        description: `Live: ${channelData.current_show || 'Now Playing'}`,
        content: {
          content_type: 'live_channel',
          live_channel_id: channelData.id
        },
        position: {
          x: 20,
          y: 100,
          width: 480,
          height: 270,
          z_index: 100
        },
        is_muted: muted, // CRITICAL: Muted if concurrent audio playback
        is_visible: true,
        is_minimized: false
      });
    }

    /**
     * Play podcast in audio widget
     */
    private async playPodcastWidget(entities: Record<string, any>):
  Promise<void> {
      const podcastQuery = entities.podcastQuery; // "×¡×’×œ ×•×‘×¨×§×•"
      const episodeFilter = entities.episodeFilter; // "latest"

      // Search for podcast
      const podcast = await api.get('/podcasts/search', {
        params: { q: podcastQuery, limit: 1 }
      });

      if (!podcast.data || podcast.data.length === 0) {
        throw new Error(`Podcast not found: ${podcastQuery}`);
      }

      const podcastData = podcast.data[0];

      // Get latest episode
      const episodes = await api.get(`/podcasts/${podcastData.id}/episodes`, {
        params: { sort: 'date_desc', limit: 1 }
      });

      if (!episodes.data || episodes.data.length === 0) {
        throw new Error(`No episodes found for: ${podcastData.title}`);
      }

      const latestEpisode = episodes.data[0];

      // Create audio widget
      await api.post('/widgets/personal', {
        title: latestEpisode.title,
        description: podcastData.title,
        cover_url: latestEpisode.thumbnail || podcastData.thumbnail,
        content: {
          content_type: 'podcast',
          podcast_id: podcastData.id,
          content_id: latestEpisode.id
        },
        position: {
          x: 20,
          y: 400, // Below video widget
          width: 480,
          height: 120,
          z_index: 101 // Above video widget
        },
        is_muted: false, // Audio widget NOT muted
        is_visible: true,
        is_minimized: false
      });
    }
  }

  ---
  Phase 3: Backend Voice-Widget API (NEW)

  Create: backend/app/api/routes/voice_widget.py

  """
  Voice-Widget API
  Creates widgets from voice commands with concurrent playback support
  """

  from fastapi import APIRouter, Depends, HTTPException
  from pydantic import BaseModel
  from typing import List, Optional
  from app.models.user import User
  from app.models.widget import Widget, WidgetContent, WidgetContentType,
  WidgetPosition, WidgetType
  from app.models.content import LiveChannel, Podcast, PodcastEpisode
  from app.api.routes.auth import get_current_user

  router = APIRouter()

  class VoiceWidgetRequest(BaseModel):
      """Request to create widget from voice command"""
      transcript: str
      intents: List[dict]
      orchestration_type: str  # sequential or concurrent

  @router.post("/voice-widget/create-multi")
  async def create_multi_widgets(
      request: VoiceWidgetRequest,
      current_user: User = Depends(get_current_user)
  ):
      """
      Create multiple widgets from multi-intent voice command.
      
      Example request:
      {
        "transcript": "×”×¨××” ×œ×™ ×¢×¨×•×¥ 11 ×• × ×’×Ÿ ××ª ×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ ×©×œ ×¡×’×œ ×•×‘×¨×§×•",
        "intents": [
          {
            "intent": "DISPLAY_CHANNEL",
            "entities": {"channelName": "×›××Ÿ 11"},
            "order": 0
          },
          {
            "intent": "PLAY_PODCAST",
            "entities": {"podcastQuery": "×¡×’×œ ×•×‘×¨×§×•", "episodeFilter": 
  "latest"},
            "order": 1
          }
        ],
        "orchestration_type": "concurrent"
      }
      """

      created_widgets = []
      is_concurrent = request.orchestration_type == "concurrent"

      for intent_data in request.intents:
          intent = intent_data["intent"]
          entities = intent_data["entities"]

          widget = None

          if intent == "DISPLAY_CHANNEL":
              widget = await create_channel_widget(
                  current_user,
                  entities,
                  muted=is_concurrent  # Mute video if concurrent audio
              )

          elif intent == "PLAY_PODCAST":
              widget = await create_podcast_widget(
                  current_user,
                  entities,
                  muted=False  # Audio NOT muted
              )

          if widget:
              created_widgets.append(widget)

      return {
          "success": True,
          "widgets_created": len(created_widgets),
          "widgets": [w.dict() for w in created_widgets]
      }

  async def create_channel_widget(
      user: User,
      entities: dict,
      muted: bool = True
  ) -> Widget:
      """Create live channel widget"""

      channel_name = entities.get("channelName")

      # Find channel
      channel = await LiveChannel.find_one(LiveChannel.name == channel_name)
      if not channel:
          raise HTTPException(status_code=404, detail=f"Channel not found: 
  {channel_name}")

      # Check beta filtering
      if user.beta_tester and not channel.is_beta_content:
          raise HTTPException(
              status_code=403,
              detail="Beta users can only access Kan 11, podcasts, and radio"
          )

      # Create widget
      widget = Widget(
          type=WidgetType.PERSONAL,
          user_id=str(user.id),
          title=channel.name,
          description=f"Live: {channel.current_show or 'Now Playing'}",
          cover_url=channel.thumbnail,
          content=WidgetContent(
              content_type=WidgetContentType.LIVE_CHANNEL,
              live_channel_id=str(channel.id)
          ),
          position=WidgetPosition(
              x=20, y=100, width=480, height=270, z_index=100
          ),
          is_muted=muted,
          is_visible=True,
          is_minimized=False
      )

      await widget.insert()
      return widget

  async def create_podcast_widget(
      user: User,
      entities: dict,
      muted: bool = False
  ) -> Widget:
      """Create podcast widget with latest episode"""

      podcast_query = entities.get("podcastQuery")

      # Search podcast (fuzzy match)
      podcasts = await Podcast.find(
          {"$text": {"$search": podcast_query}}
      ).limit(1).to_list()

      if not podcasts:
          raise HTTPException(status_code=404, detail=f"Podcast not found: 
  {podcast_query}")

      podcast = podcasts[0]

      # Check beta filtering
      if user.beta_tester and not podcast.is_beta_content:
          raise HTTPException(
              status_code=403,
              detail="Beta users can only access Israeli podcasts"
          )

      # Get latest episode
      episodes = await PodcastEpisode.find(
          PodcastEpisode.podcast_id == str(podcast.id)
      ).sort(-PodcastEpisode.published_at).limit(1).to_list()

      if not episodes:
          raise HTTPException(status_code=404, detail=f"No episodes found for: 
  {podcast.title}")

      episode = episodes[0]

      # Create widget
      widget = Widget(
          type=WidgetType.PERSONAL,
          user_id=str(user.id),
          title=episode.title,
          description=podcast.title,
          cover_url=episode.thumbnail or podcast.thumbnail,
          content=WidgetContent(
              content_type=WidgetContentType.PODCAST,
              podcast_id=str(podcast.id),
              content_id=str(episode.id)
          ),
          position=WidgetPosition(
              x=20, y=400, width=480, height=120, z_index=101
          ),
          is_muted=muted,
          is_visible=True,
          is_minimized=False
      )

      await widget.insert()
      return widget

  ---
  Phase 4: Integration with Existing Voice System

  Extend: shared/services/olorinVoiceOrchestrator.ts

  import { MultiIntentVoiceParser } from './multiIntentVoiceParser';
  import { VoiceWidgetOrchestrator } from './voiceWidgetOrchestrator';

  export class OlorinVoiceOrchestrator {
    private multiIntentParser: MultiIntentVoiceParser;
    private widgetOrchestrator: VoiceWidgetOrchestrator;

    constructor(config: VoiceConfig) {
      // ... existing code
      this.multiIntentParser = new MultiIntentVoiceParser();
      this.widgetOrchestrator = new VoiceWidgetOrchestrator();
    }

    async processTranscript(transcript: string): Promise<VoiceCommandResponse> {
      // Check if multi-intent command
      if (this.isMultiIntent(transcript)) {
        return await this.processMultiIntentCommand(transcript);
      }

      // Single intent (existing flow)
      return await this.processSingleIntent(transcript);
    }

    private isMultiIntent(transcript: string): boolean {
      // Check for conjunction markers
      const conjunctions = ['\\s×•', '\\s×’×\\s', '\\sand\\s', '\\salso\\s'];
      return conjunctions.some(conj => new RegExp(conj).test(transcript));
    }

    private async processMultiIntentCommand(transcript: string):
  Promise<VoiceCommandResponse> {
      const command = this.multiIntentParser.parseMultiIntent(transcript);

      // Execute via widget orchestrator
      await this.widgetOrchestrator.executeMultiIntent(command);

      return {
        intent: 'MULTI_INTENT',
        action: { type: 'widget_created', payload: { count:
  command.intents.length } },
        spokenResponse: this.generateMultiIntentResponse(command),
        confidence: 0.9
      };
    }

    private generateMultiIntentResponse(command: MultiIntentCommand): string {
      // Hebrew: "×”×¦×’×ª×™ ×¢×¨×•×¥ 11 ×•××©××™×¢ ××ª ×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ ×©×œ ×¡×’×œ ×•×‘×¨×§×•"
      // English: "Displaying Channel 11 and playing latest podcast from Segal 
  and Berko"

      const intents = command.intents.map(i => this.describeIntent(i)).join(' 
  ×•');
      return `××‘×¦×¢: ${intents}`;
    }
  }

  ---
  Phase 5: Testing & Validation

  Test Cases:

  1. Simple Multi-Intent (Sequential):
    - Hebrew: "×”×©×”×” ×•××– ×—×–×•×¨ ×”×‘×™×ª×”"
    - English: "Pause then go home"
    - Expected: Pause â†’ Navigate home (sequential)
  2. Complex Multi-Intent (Concurrent):
    - Hebrew: "×”×¨××” ×œ×™ ×¢×¨×•×¥ 11 ×• × ×’×Ÿ ××ª ×”×¤×•×“×§××¡×˜ ×”××—×¨×•×Ÿ ×©×œ ×¡×’×œ ×•×‘×¨×§×•"
    - English: "Show me channel 11 and play latest podcast from Segal and Berko"
    - Expected:
        - Channel 11 widget (video, muted, 480x270, z-index 100)
      - Podcast widget (audio, unmuted, 480x120, z-index 101)
  3. Triple Intent:
    - Hebrew: "×”×¨××” ×—×“×©×•×ª ×’× ×¤×•×“×§××¡×˜ ×•×’×œ×•×œ ×œ××˜×”"
    - English: "Show news also podcast and scroll down"
    - Expected: News widget â†’ Podcast widget â†’ Scroll
  4. Beta Content Filtering:
    - Hebrew: "×”×¨××” ×œ×™ ×¢×¨×•×¥ 12 ×• × ×’×Ÿ ×¡×“×¨×ª breaking bad"
    - Expected: Channel 12 blocked (not beta content), Breaking Bad blocked
  (series not allowed)

  ---
  Updated Implementation Timeline (with Voice-Widget Integration)

  Week 1: Backend + Voice-Widget Foundation
  - Days 1-3: Backend models, services, APIs (as planned)
  - Days 4-5: MultiIntentVoiceParser, VoiceWidgetOrchestrator
  - Days 6-7: Backend voice-widget API (/voice-widget/create-multi)

  Week 2: Frontend Integration
  - Days 8-10: Web components + voice-widget integration
  - Days 11-12: Multi-intent testing (sequential + concurrent)
  - Days 13-14: Beta content filtering in voice-widget creation

  Week 3: Mobile + tvOS
  - Days 15-18: Mobile voice-widget integration
  - Days 19-21: tvOS voice-widget integration (Siri Remote)

  Week 4: Load Testing & Polish
  - Days 22-24: Voice-widget concurrent playback stress testing
  - Days 25-26: Multi-intent parsing accuracy tuning
  - Day 27: Entity extraction optimization (channel names, podcast names)
  - Day 28: Launch readiness

  ---
  Voice-Widget Integration Checklist

  Functionality:

  - Multi-intent parsing ("Show X and play Y")
  - Concurrent playback (video muted + audio widget)
  - Sequential execution (pause then navigate)
  - Entity extraction (channel numbers, podcast names)
  - Widget creation from voice
  - Beta content filtering in voice-widget

  Performance:

  - Multi-intent latency < 6s (2 intents)
  - Widget creation < 1s per widget
  - Concurrent playback starts simultaneously
  - No audio conflict (video auto-muted)

  User Experience:

  - Voice response confirms both actions
  - Widgets appear in correct positions
  - Z-index ordering correct (audio above video)
  - Beta users get helpful error messages

  ---
  Does this comprehensive voice-widget integration plan address the critical
  requirement? Should I proceed with implementation starting with the
  multi-intent parser?

âœ» Baked for 2m 5s

â¯ not enough, add our dubbing system and live translation subtitles         
  systems, they are the key features of the platform                        

âº ABSOLUTELY CRITICAL! You're right - I need to deeply integrate the live 
  dubbing and live translation subtitles systems. Let me scan these core
  features:

âº Searched for 2 patterns, read 2 files (ctrl+o to expand)

âº PERFECT! Now let me scan the WebSocket APIs and frontend components:

âº Searched for 2 patterns, read 2 files (ctrl+o to expand)

âº Perfect! Now I have everything. Let me create the MASTER INTEGRATION PLAN
  bringing together ALL core systems:

  ---
  ğŸ¯ MASTER BETA 500 INTEGRATION PLAN

  Core Features: Live Dubbing + Live Subtitles + Voice + Widgets

  Current State: Production-Ready Systems

  âœ… Live Dubbing System (COMPLETE)
  - Backend: LiveDubbingService - Audio â†’ STT â†’ Translation â†’ TTS (~3-5s
  latency)
  - WebSocket: /ws/live/{channel_id}/dubbing
  - Providers: ElevenLabs Scribe (STT), Google/OpenAI/Claude (Translation),
  ElevenLabs (TTS)
  - Features: ChannelSTTManager (cost optimization), session management, latency
   tracking
  - Multi-language: he, en, ar, es, ru, fr, de, it, pt, yi
  - Voice selection: Customizable ElevenLabs voices

  âœ… Live Translation Subtitles (COMPLETE)
  - Backend: LiveTranslationService - STT â†’ Translation â†’ Formatted Subtitles
  - WebSocket: /ws/live/{channel_id}/subtitles
  - Providers: Google Cloud Speech / OpenAI Whisper / ElevenLabs (STT),
  Google/OpenAI/Claude (Translation)
  - Features: Subtitle chunking (80 char max), multi-language, WebVTT format
  - Optimization: Natural breakpoint splitting (punctuation, spaces)

  âœ… Voice System (COMPLETE)
  - VoiceCommandProcessor: Single-intent classification
  - OlorinVoiceOrchestrator: Intent routing
  - VoicePipelineService: Audio â†’ STT â†’ LLM â†’ TTS (~3-5s)
  - Wake word: "Hey Bayit"

  âœ… Widget System (COMPLETE)
  - PiPWidgetManager: Multi-widget orchestration
  - Widget types: live_channel, podcast, radio, vod, audiobook, iframe, custom
  - Mobile: Max 2 concurrent, single active audio
  - Features: Draggable, muted/unmuted, minimized, z-index ordering

  ---
  CRITICAL GAPS (What Must Be Built)

  Gap 1: Voice-Controlled Live Dubbing/Subtitles

  Voice commands currently don't control dubbing or subtitles

  Gap 2: Multi-Intent + Dubbing/Subtitles

  Cannot parse: "Show channel 11 WITH English dubbing AND Spanish subtitles"

  Gap 3: Widget + Dubbing/Subtitles Integration

  Widgets don't support live dubbing/subtitle sessions

  Gap 4: Credit Tracking for Live Features

  Beta credits not deducted for live dubbing/subtitles

  Gap 5: YouTube Overlay + Dubbing

  YouTube audio overlay doesn't integrate with dubbing system

  ---
  MASTER IMPLEMENTATION PLAN

  Phase 1: Voice Intent Extensions for Live Features

  Create: shared/services/liveFeaturesVoiceParser.ts

  /**
   * Live Features Voice Parser
   * Parses voice commands for dubbing and subtitles
   */

  export type LiveFeatureIntent =
    | 'ENABLE_DUBBING'     // "Turn on English dubbing"
    | 'DISABLE_DUBBING'    // "Turn off dubbing"
    | 'SWITCH_DUBBING_LANG' // "Switch to Spanish audio"
    | 'ENABLE_SUBTITLES'   // "Show English subtitles"
    | 'DISABLE_SUBTITLES'  // "Turn off subtitles"
    | 'SWITCH_SUBTITLE_LANG'; // "Change subtitles to Spanish"

  export class LiveFeaturesVoiceParser {
    /**
     * Parse voice commands for live features
     * Examples:
     * - "×”×¤×¢×œ ×“×™×‘×•×‘ ×‘×× ×’×œ×™×ª" â†’ ENABLE_DUBBING, lang: en
     * - "×”×¨××” ×›×ª×•×‘×™×•×ª ×‘×¡×¤×¨×“×™×ª" â†’ ENABLE_SUBTITLES, lang: es
     * - "×›×‘×” ×“×™×‘×•×‘" â†’ DISABLE_DUBBING
     */
    parseLiveFeatureCommand(transcript: string): ParsedLiveFeatureIntent | null
  {
      const normalized = transcript.toLowerCase();

      // Dubbing patterns (Hebrew + English)
      const dubbingPatterns = {
        enable: [
          /×”×¤×¢×œ ×“×™×‘×•×‘/,
          /×“×‘×‘/,
          /turn on.*dubbing/,
          /enable.*dubbing/,
          /start.*dubbing/
        ],
        disable: [
          /×›×‘×” ×“×™×‘×•×‘/,
          /×”×¤×¡×§ ×“×™×‘×•×‘/,
          /turn off.*dubbing/,
          /disable.*dubbing/,
          /stop.*dubbing/
        ],
        switchLang: [
          /×“×‘×‘ ×‘(×× ×’×œ×™×ª|×¡×¤×¨×“×™×ª|×¢×¨×‘×™×ª)/,
          /×”×—×œ×£ ×“×™×‘×•×‘ ×œ(×× ×’×œ×™×ª|×¡×¤×¨×“×™×ª)/,
          /switch.*dubbing.*to\s+(\w+)/,
          /dub.*in\s+(\w+)/
        ]
      };

      // Subtitle patterns
      const subtitlePatterns = {
        enable: [
          /×”×¨××” ×›×ª×•×‘×™×•×ª/,
          /×”×¤×¢×œ ×›×ª×•×‘×™×•×ª/,
          /show.*subtitles/,
          /enable.*subtitles/,
          /turn on.*subtitles/
        ],
        disable: [
          /×›×‘×” ×›×ª×•×‘×™×•×ª/,
          /×”×¡×ª×¨ ×›×ª×•×‘×™×•×ª/,
          /hide.*subtitles/,
          /turn off.*subtitles/,
          /disable.*subtitles/
        ],
        switchLang: [
          /×›×ª×•×‘×™×•×ª ×‘(×× ×’×œ×™×ª|×¡×¤×¨×“×™×ª|×¢×¨×‘×™×ª)/,
          /×”×—×œ×£ ×›×ª×•×‘×™×•×ª ×œ(×× ×’×œ×™×ª|×¡×¤×¨×“×™×ª)/,
          /subtitles.*in\s+(\w+)/,
          /change.*subtitles.*to\s+(\w+)/
        ]
      };

      // Extract language from command
      const langMap: Record<string, string> = {
        'english': 'en', '×× ×’×œ×™×ª': 'en',
        'spanish': 'es', '×¡×¤×¨×“×™×ª': 'es',
        'arabic': 'ar', '×¢×¨×‘×™×ª': 'ar',
        'hebrew': 'he', '×¢×‘×¨×™×ª': 'he',
        'russian': 'ru', '×¨×•×¡×™×ª': 'ru',
        'french': 'fr', '×¦×¨×¤×ª×™×ª': 'fr'
      };

      // Parse intent
      // ... implementation
    }
  }

  ---
  Phase 2: Extended Multi-Intent Parser with Live Features

  Extend: shared/services/multiIntentVoiceParser.ts

  /**
   * Parse compound commands with live features
   * Example: "Show channel 11 with English dubbing and Spanish subtitles"
   * Parsed intents:
   * 1. DISPLAY_CHANNEL (entities: {channelName: "×›××Ÿ 11"})
   * 2. ENABLE_DUBBING (entities: {language: "en"})
   * 3. ENABLE_SUBTITLES (entities: {language: "es"})
   */

  export class EnhancedMultiIntentParser extends MultiIntentVoiceParser {
    parseWithLiveFeatures(transcript: string): MultiIntentCommand {
      // Parse base intents (channel display, podcast play)
      const baseIntents = super.parseMultiIntent(transcript);

      // Parse live feature modifiers
      const liveFeatureParser = new LiveFeaturesVoiceParser();
      const dubbingIntent = liveFeatureParser.parseDubbingCommand(transcript);
      const subtitleIntent = liveFeatureParser.parseSubtitleCommand(transcript);

      // Merge intents
      const allIntents = [
        ...baseIntents.intents,
        ...(dubbingIntent ? [dubbingIntent] : []),
        ...(subtitleIntent ? [subtitleIntent] : [])
      ];

      return {
        intents: allIntents,
        originalTranscript: transcript,
        orchestrationType: this.determineOrchestration(allIntents)
      };
    }
  }

  ---
  Phase 3: Voice-Widget-Dubbing-Subtitles Orchestrator

  Create: shared/services/masterVoiceOrchestrator.ts

  /**
   * Master Voice Orchestrator
   * Coordinates widgets + dubbing + subtitles from voice commands
   */

  export class MasterVoiceOrchestrator {
    private widgetOrchestrator: VoiceWidgetOrchestrator;
    private dubbingService: LiveDubbingService;
    private subtitleService: LiveSubtitleService; // New service

    /**
     * Execute master voice command
     * Example: "Show channel 11 with English dubbing and Spanish subtitles"
     */
    async executeMasterCommand(command: MultiIntentCommand): Promise<void> {
      const sessions: LiveSession[] = [];

      // Step 1: Create widget (if DISPLAY_CHANNEL intent)
      const displayIntent = command.intents.find(i => i.intent ===
  'DISPLAY_CHANNEL');
      if (displayIntent) {
        const widget = await this.widgetOrchestrator.displayChannelWidget(
          displayIntent.entities,
          muted: false // Keep audio for now
        );

        const channelId = widget.content.live_channel_id;

        // Step 2: Start dubbing (if ENABLE_DUBBING intent)
        const dubbingIntent = command.intents.find(i => i.intent ===
  'ENABLE_DUBBING');
        if (dubbingIntent) {
          const dubbingSession = await this.dubbingService.connect({
            channelId,
            targetLang: dubbingIntent.entities.language,
            voiceId: dubbingIntent.entities.voiceId,
            onAudio: (audio) => this.playDubbedAudio(widget.id, audio),
            onLatency: (report) => this.trackDubbingMetrics(report)
          });
          sessions.push({ type: 'dubbing', session: dubbingSession });

          // Mute original video if dubbing enabled
          await this.widgetOrchestrator.muteWidget(widget.id);
        }

        // Step 3: Start subtitles (if ENABLE_SUBTITLES intent)
        const subtitleIntent = command.intents.find(i => i.intent ===
  'ENABLE_SUBTITLES');
        if (subtitleIntent) {
          const subtitleSession = await this.subtitleService.connect({
            channelId,
            targetLang: subtitleIntent.entities.language,
            onSubtitle: (subtitle) => this.displaySubtitle(widget.id, subtitle),
            onError: (error) => this.handleSubtitleError(error)
          });
          sessions.push({ type: 'subtitles', session: subtitleSession });
        }
      }

      // Step 4: Track credit usage
      await this.trackCreditUsage(sessions);
    }

    /**
     * Track credit usage for live features
     * Dubbing: 1 credit/second
     * Subtitles: 0.5 credits/second
     */
    private async trackCreditUsage(sessions: LiveSession[]): Promise<void> {
      for (const session of sessions) {
        const rate = session.type === 'dubbing' ? 1.0 : 0.5;

        // Continuous credit deduction every second
        setInterval(async () => {
          await api.post('/beta/credits/deduct', {
            feature: `live_${session.type}`,
            amount: rate,
            metadata: {
              session_id: session.session.session_id,
              channel_id: session.session.channel_id
            }
          });
        }, 1000);
      }
    }
  }

  ---
  Phase 4: Backend Voice-Live-Features API

  Create: backend/app/api/routes/voice_live_features.py

  """
  Voice-controlled live features API
  Creates widget + starts dubbing/subtitle sessions from voice
  """

  from fastapi import APIRouter, Depends, HTTPException
  from pydantic import BaseModel
  from typing import List, Optional
  from app.models.user import User
  from app.services.live_dubbing_service import LiveDubbingService
  from app.services.live_translation_service import LiveTranslationService
  from app.services.beta_credit_service import BetaCreditService
  from app.api.routes.auth import get_current_user

  router = APIRouter()

  class VoiceLiveFeaturesRequest(BaseModel):
      """Request to create widget with live features from voice"""
      transcript: str
      intents: List[dict]  # DISPLAY_CHANNEL, ENABLE_DUBBING, ENABLE_SUBTITLES
      orchestration_type: str = "concurrent"

  @router.post("/voice-live-features/create")
  async def create_widget_with_live_features(
      request: VoiceLiveFeaturesRequest,
      current_user: User = Depends(get_current_user)
  ):
      """
      Create widget with live dubbing and/or subtitles from voice command.
      
      Example:
      {
        "transcript": "Show channel 11 with English dubbing and Spanish 
  subtitles",
        "intents": [
          {"intent": "DISPLAY_CHANNEL", "entities": {"channelName": "×›××Ÿ 11"}},
          {"intent": "ENABLE_DUBBING", "entities": {"language": "en"}},
          {"intent": "ENABLE_SUBTITLES", "entities": {"language": "es"}}
        ]
      }
      """

      # Parse intents
      display_intent = next((i for i in request.intents if i["intent"] ==
  "DISPLAY_CHANNEL"), None)
      dubbing_intent = next((i for i in request.intents if i["intent"] ==
  "ENABLE_DUBBING"), None)
      subtitle_intent = next((i for i in request.intents if i["intent"] ==
  "ENABLE_SUBTITLES"), None)

      if not display_intent:
          raise HTTPException(status_code=400, detail="DISPLAY_CHANNEL intent 
  required")

      # Create widget
      widget = await create_channel_widget(
          current_user,
          display_intent["entities"],
          muted=bool(dubbing_intent)  # Mute if dubbing enabled
      )

      # Initialize live feature sessions
      sessions = {}

      if dubbing_intent:
          # Check beta credits
          if current_user.beta_tester:
              credit_service = BetaCreditService()
              balance = await credit_service.get_balance(str(current_user.id))
              if balance < 60:  # Need at least 1 minute (60 credits)
                  raise HTTPException(
                      status_code=402,
                      detail="Insufficient credits for live dubbing (need 60+)"
                  )

          # Create dubbing session metadata (WebSocket connects separately)
          sessions["dubbing"] = {
              "channel_id": widget.content.live_channel_id,
              "target_lang": dubbing_intent["entities"]["language"],
              "voice_id": dubbing_intent["entities"].get("voice_id"),
              "credit_rate": 1.0  # 1 credit/second
          }

      if subtitle_intent:
          # Check beta credits
          if current_user.beta_tester:
              credit_service = BetaCreditService()
              balance = await credit_service.get_balance(str(current_user.id))
              if balance < 30:  # Need at least 1 minute (30 credits)
                  raise HTTPException(
                      status_code=402,
                      detail="Insufficient credits for live subtitles (need 
  30+)"
                  )

          # Create subtitle session metadata
          sessions["subtitles"] = {
              "channel_id": widget.content.live_channel_id,
              "target_lang": subtitle_intent["entities"]["language"],
              "credit_rate": 0.5  # 0.5 credits/second
          }

      return {
          "success": True,
          "widget": widget.dict(),
          "sessions": sessions,
          "websocket_endpoints": {
              "dubbing": f"/ws/live/{widget.content.live_channel_id}/dubbing" if
   "dubbing" in sessions else None,
              "subtitles":
  f"/ws/live/{widget.content.live_channel_id}/subtitles" if "subtitles" in
  sessions else None
          }
      }

  ---
  Phase 5: YouTube Overlay + Dubbing Integration

  The YouTube audio overlay IS the dubbing system!

  Clarification:
  - YouTube overlay doesn't need separate dubbing
  - YouTube audio overlay = AI-dubbed audio synchronized with YouTube video
  - This is ALREADY the dubbing implementation for YouTube content

  Enhancement Needed: Voice control

  // Voice command: "Switch YouTube dubbing to Spanish"
  async function switchYouTubeDubbingLanguage(language: string) {
    // Stop current dubbing WebSocket
    await youtubeOverlayService.stopDubbing();

    // Start new dubbing with different language
    await youtubeOverlayService.startDubbing({
      channelId: currentYoutubeChannelId,
      targetLang: language,
      syncWithYouTube: true
    });
  }

  ---
  Phase 6: Credit Consumption Tracking

  Extend: backend/app/services/beta_credit_service.py

  class BetaCreditService:
      # Existing credit rates
      CREDIT_RATES = {
          "live_dubbing": 1.0,  # 1 credit/second
          "podcast_translation": 1.0,
          "transcription": 0.5,
          "live_subtitles": 0.5,  # 0.5 credits/second
          "voice_command": 0.5,  # Voice STT/TTS
      }

      async def start_continuous_deduction(
          self,
          user_id: str,
          feature: str,
          session_id: str
      ) -> str:
          """
          Start continuous credit deduction for live features.
          Returns deduction_task_id for cancellation.
          """
          rate = self.CREDIT_RATES[feature]

          async def deduct_loop():
              while True:
                  await asyncio.sleep(1)  # Deduct every second
                  success, remaining = await self.deduct_credits(
                      user_id=user_id,
                      feature=feature,
                      usage_amount=1.0,  # 1 second
                      metadata={"session_id": session_id}
                  )

                  if not success:
                      # Credits depleted - emit event to close session
                      await emit_credits_depleted_event(user_id, session_id)
                      break

          task = asyncio.create_task(deduct_loop())
          return id(task)

  ---
  Phase 7: Testing Matrix
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚        Voice Command        â”‚     Expected Result     â”‚  Systems Involved  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Show channel 11"           â”‚ Widget with Channel 11  â”‚ Widget             â”‚
  â”‚                             â”‚ (unmuted)               â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Show channel 11 with       â”‚ Widget + Dubbing (video â”‚ Widget + Dubbing + â”‚
  â”‚ English dubbing"            â”‚  muted, AI audio)       â”‚  Credits           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Show channel 11 with       â”‚ Widget + Subtitles      â”‚ Widget + Subtitles â”‚
  â”‚ Spanish subtitles"          â”‚                         â”‚  + Credits         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Show channel 11 with       â”‚ Widget + Dubbing +      â”‚ Widget + Dubbing + â”‚
  â”‚ English dubbing and Spanish â”‚ Subtitles               â”‚  Subtitles +       â”‚
  â”‚  subtitles"                 â”‚ (simultaneous)          â”‚ Credits            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Turn on English dubbing"   â”‚ Enable dubbing          â”‚ Dubbing            â”‚
  â”‚ (during playback)           â”‚ mid-stream              â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Switch dubbing to Spanish" â”‚ Change dubbing language â”‚ Dubbing            â”‚
  â”‚                             â”‚  live                   â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Turn off dubbing"          â”‚ Disable dubbing, unmute â”‚ Dubbing            â”‚
  â”‚                             â”‚  video                  â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Show English subtitles"    â”‚ Enable subtitles        â”‚ Subtitles          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Turn off subtitles"        â”‚ Disable subtitles       â”‚ Subtitles          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ "Play podcast from Segal    â”‚ Podcast widget +        â”‚ Widget + Subtitles â”‚
  â”‚ and Berko with Hebrew       â”‚ Subtitles               â”‚  + Credits         â”‚
  â”‚ subtitles"                  â”‚                         â”‚                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ---
  Updated Timeline with FULL Integration

  Week 1: Backend Foundation + Live Features Integration
  - Days 1-3: Models, BetaCredit, User extensions
  - Days 4-5: Live features voice parser, continuous credit deduction
  - Days 6-7: Voice-live-features API, YouTube dubbing voice control

  Week 2: Frontend Master Orchestration
  - Days 8-10: MasterVoiceOrchestrator, widget-dubbing-subtitles integration
  - Days 11-12: Multi-intent testing (display + dubbing + subtitles)
  - Days 13-14: Credit tracking UI, low balance warnings

  Week 3: Platform Parity
  - Days 15-18: Mobile master orchestrator
  - Days 19-21: tvOS master orchestrator

  Week 4: Load Testing & Launch
  - Days 22-24: 500 concurrent dubbing sessions
  - Days 25-26: Multi-feature stress testing (dubbing + subtitles
  simultaneously)
  - Day 27: Credit consumption validation
  - Day 28: Launch readiness

  ---
  ğŸ¯ MASTER INTEGRATION CHECKLIST

  Voice + Dubbing:

  - "Turn on English dubbing" starts dubbing
  - "Switch dubbing to Spanish" changes language live
  - "Turn off dubbing" disables dubbing
  - Dubbing consumes 1 credit/second
  - Low credit warning at 60 credits (1 minute remaining)

  Voice + Subtitles:

  - "Show English subtitles" starts subtitles
  - "Change subtitles to Spanish" switches language
  - "Turn off subtitles" disables subtitles
  - Subtitles consume 0.5 credits/second
  - Low credit warning at 30 credits (1 minute remaining)

  Voice + Widget + Dubbing:

  - "Show channel 11 with English dubbing" creates widget + starts dubbing
  - Video automatically muted when dubbing enabled
  - Dubbed audio plays through widget audio system

  Voice + Widget + Subtitles:

  - "Show channel 11 with Spanish subtitles" creates widget + starts subtitles
  - Subtitles displayed over widget video

  Voice + Widget + Dubbing + Subtitles:

  - "Show channel 11 with English dubbing and Spanish subtitles" works
  - Both systems run concurrently
  - Credits deducted for both (1.5 credits/second total)
  - Low credit warning considers both features

  Beta Content Filtering:

  - Beta users can dub Kan 11, podcasts, radio only
  - Series/movies blocked even with voice dubbing request

  ---
  Does this MASTER PLAN address all core features? Ready to implement?

âœ» Cooked for 2m 17s